

################################################################################
üìÅ Carpeta: C:\Users\kevin\OneDrive\Liceo\Escritorio\Info\4_semestre\proyecto_integrado\Backend\Inacap_reserva\reservas
################################################################################


===== admin.py =====
from django.contrib import admin
from .models import Area, PerfilUsuario, Equipamiento, Espacio, Reserva, HistorialAprobacion, Notificacion, Mantenimiento, HorariosDisponibilidad, Incidencia

@admin.register(Area)
class AreaAdmin(admin.ModelAdmin):
    list_display = ['nombre_area', 'descripcion']
    search_fields = ['nombre_area']

@admin.register(PerfilUsuario)
class PerfilUsuarioAdmin(admin.ModelAdmin):
    list_display = ['user', 'rol', 'departamento', 'estado', 'fecha_registro']
    list_filter = ['rol', 'estado']
    search_fields = ['user__username', 'user__email', 'departamento']

@admin.register(Equipamiento)
class EquipamientoAdmin(admin.ModelAdmin):
    list_display = ['nombre_equipo', 'tipo_equipo', 'id_espacio', 'marca_modelo']
    list_filter = ['tipo_equipo']
    search_fields = ['nombre_equipo', 'marca_modelo']

@admin.register(Espacio)
class EspacioAdmin(admin.ModelAdmin):
    list_display = ['nombre', 'tipo', 'edificio', 'piso', 'capacidad', 'estado']
    list_filter = ['tipo', 'estado', 'edificio']
    search_fields = ['nombre', 'edificio']

@admin.register(Reserva)
class ReservaAdmin(admin.ModelAdmin):
    list_display = ['espacio', 'solicitante', 'fecha_reserva', 'hora_inicio', 'hora_fin', 'estado']
    list_filter = ['estado', 'fecha_reserva']
    search_fields = ['espacio__nombre', 'solicitante__username']
    date_hierarchy = 'fecha_reserva'

@admin.register(HistorialAprobacion)
class HistorialAprobacionAdmin(admin.ModelAdmin):
    list_display = ['reserva', 'usuario_admin', 'tipo_accion', 'fecha_accion']
    list_filter = ['tipo_accion', 'fecha_accion']
    search_fields = ['reserva__espacio__nombre', 'usuario_admin__username']

@admin.register(Notificacion)
class NotificacionAdmin(admin.ModelAdmin):
    list_display = ['destinatario', 'tipo', 'titulo', 'leida', 'fecha_creacion']
    list_filter = ['tipo', 'leida']
    search_fields = ['titulo', 'destinatario__username']

@admin.register(Mantenimiento)
class MantenimientoAdmin(admin.ModelAdmin):
    list_display = ['id_espacio', 'tipo_mantenimiento', 'fecha_inicio', 'fecha_fin', 'estado']
    list_filter = ['tipo_mantenimiento', 'estado']
    search_fields = ['id_espacio__nombre']

@admin.register(HorariosDisponibilidad)
class HorariosDisponibilidadAdmin(admin.ModelAdmin):
    list_display = ['id_espacio', 'dia_semana', 'hora_apertura', 'hora_cierre']
    list_filter = ['dia_semana']
    search_fields = ['id_espacio__nombre']

@admin.register(Incidencia)
class IncidenciaAdmin(admin.ModelAdmin):
    list_display = ['id_usuario', 'prioridad', 'estado', 'fecha_reporte']
    list_filter = ['prioridad', 'estado']
    search_fields = ['descripcion', 'id_usuario__username']
============================================================


===== apps.py =====
from django.apps import AppConfig

class ReservasConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'reservas'
    verbose_name = 'Sistema de Reservas'
============================================================


===== backends.py =====
from django.contrib.auth.backends import ModelBackend
from django.contrib.auth import get_user_model
from django.db.models import Q

UserModel = get_user_model()

class EmailBackend(ModelBackend):
    def authenticate(self, request, username=None, password=None, **kwargs):
        try:
            print(f"üîê Intentando autenticar: {username}")
            
            # Buscar por email o username (case insensitive)
            user = UserModel.objects.get(
                Q(email__iexact=username) | 
                Q(username__iexact=username)
            )
            print(f"‚úÖ Usuario encontrado: {user.username}")
            
        except UserModel.DoesNotExist:
            print(f"‚ùå Usuario no encontrado: {username}")
            return None
        except UserModel.MultipleObjectsReturned:
            user = UserModel.objects.filter(
                Q(email__iexact=username) | 
                Q(username__iexact=username)
            ).first()
            print(f"‚ö†Ô∏è M√∫ltiples usuarios, usando: {user.username}")

        # Verificar contrase√±a
        if user and user.check_password(password):
            print(f"‚úÖ Contrase√±a correcta para: {user.username}")
            return user
        else:
            print(f"‚ùå Contrase√±a incorrecta para: {username}")
            return None

    def get_user(self, user_id):
        try:
            return UserModel.objects.get(pk=user_id)
        except UserModel.DoesNotExist:
            return None
============================================================


===== fix_views.py =====

============================================================


===== models.py =====
from django.db import models
from django.contrib.auth.models import User
from django.utils import timezone

class Area(models.Model):
    nombre_area = models.CharField(max_length=100)
    descripcion = models.TextField(blank=True, null=True)
    
    def __str__(self):
        return self.nombre_area

class PerfilUsuario(models.Model):
    ROL_CHOICES = (
        ('Usuario', 'Usuario'), 
        ('Admin', 'Administrador'),
        ('Aprobador', 'Aprobador')
    )
    
    ESTADO_CHOICES = (
        ('activo', 'Activo'),
        ('inactivo', 'Inactivo'),
        ('suspendido', 'Suspendido')
    )
    
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    rol = models.CharField(max_length=50, choices=ROL_CHOICES, default='Usuario')
    area = models.ForeignKey(Area, on_delete=models.SET_NULL, null=True, blank=True)
    departamento = models.CharField(max_length=100, blank=True, null=True)
    estado = models.CharField(max_length=50, choices=ESTADO_CHOICES, default='activo')
    fecha_registro = models.DateTimeField(auto_now_add=True)
    ultimo_acceso = models.DateTimeField(null=True, blank=True)
    
    def __str__(self):
        return f"{self.user.username} ({self.rol})"

class Espacio(models.Model):
    ESTADO_CHOICES = (
        ('Disponible', 'Disponible'),
        ('Mantenimiento', 'Mantenimiento'),
        ('Fuera de Servicio', 'Fuera de Servicio'),
    )
    
    TIPO_CHOICES = (
        ('Sala de Reuniones', 'Sala de Reuniones'),
        ('Auditorio', 'Auditorio'),
        ('Laboratorio', 'Laboratorio'),
        ('Oficina', 'Oficina'),
        ('Aula', 'Aula'),
    )
    
    nombre = models.CharField(max_length=100)
    tipo = models.CharField(max_length=100, choices=TIPO_CHOICES)
    edificio = models.CharField(max_length=100, blank=True, null=True)
    piso = models.IntegerField(blank=True, null=True)
    capacidad = models.IntegerField()
    descripcion = models.TextField(blank=True, null=True)
    estado = models.CharField(max_length=50, choices=ESTADO_CHOICES, default='Disponible')
    
    def __str__(self):
        return self.nombre

class Equipamiento(models.Model):
    TIPO_EQUIPO_CHOICES = (
        ('Proyector', 'Proyector'),
        ('Computador', 'Computador'),
        ('Audio', 'Sistema de Audio'),
        ('Video', 'Sistema de Video'),
        ('Mobiliario', 'Mobiliario'),
    )
    
    id_espacio = models.ForeignKey(Espacio, on_delete=models.CASCADE, related_name='equipamientos')
    nombre_equipo = models.CharField(max_length=100)
    tipo_equipo = models.CharField(max_length=100, choices=TIPO_EQUIPO_CHOICES)
    marca_modelo = models.CharField(max_length=255, blank=True, null=True)
    numero_serie = models.CharField(max_length=100, blank=True, null=True)
    
    def __str__(self):
        return self.nombre_equipo

class Reserva(models.Model):
    ESTADO_CHOICES = (
        ('Pendiente', 'Pendiente'),
        ('Aprobada', 'Aprobada'),
        ('Rechazada', 'Rechazada'),
        ('Cancelada', 'Cancelada'),
    )
    
    espacio = models.ForeignKey(Espacio, on_delete=models.CASCADE)
    solicitante = models.ForeignKey(User, on_delete=models.CASCADE, related_name='reservas_solicitadas')
    fecha_reserva = models.DateField()
    hora_inicio = models.TimeField()
    hora_fin = models.TimeField()
    proposito = models.TextField()
    num_asistentes = models.IntegerField()
    estado = models.CharField(max_length=50, choices=ESTADO_CHOICES, default='Pendiente')
    fecha_solicitud = models.DateTimeField(auto_now_add=True)
    id_aprobador = models.ForeignKey(User, on_delete=models.SET_NULL, null=True, blank=True, related_name='reservas_aprobadas')
    comentario_admin = models.TextField(blank=True, null=True)
    
    def __str__(self):
        return f"Reserva de {self.espacio.nombre} por {self.solicitante.username}"

class HistorialAprobacion(models.Model):
    TIPO_ACCION_CHOICES = (
        ('Aprobada', 'Aprobada'),
        ('Rechazada', 'Rechazada'),
        ('Cancelada', 'Cancelada'),
    )
    
    reserva = models.ForeignKey(Reserva, on_delete=models.CASCADE)
    usuario_admin = models.ForeignKey(User, on_delete=models.CASCADE)
    tipo_accion = models.CharField(max_length=50, choices=TIPO_ACCION_CHOICES)
    fecha_accion = models.DateField(auto_now_add=True)
    hora_accion = models.TimeField(auto_now_add=True)
    motivo = models.TextField(blank=True, null=True)
    
    def __str__(self):
        return f"Aprobaci√≥n {self.tipo_accion} - Reserva {self.reserva.id}"

class Notificacion(models.Model):
    TIPO_CHOICES = (
        ('reserva_aprobada', 'Reserva Aprobada'),
        ('reserva_rechazada', 'Reserva Rechazada'),
        ('reserva_cancelada', 'Reserva Cancelada'),
        ('reserva_pendiente', 'Reserva Pendiente'),
        ('reserva_creada', 'Reserva Creada'),
        ('mantenimiento', 'Mantenimiento'),
        ('incidencia', 'Incidencia'),
        ('sistema', 'Sistema'),
    )
    
    destinatario = models.ForeignKey(User, on_delete=models.CASCADE, related_name='notificaciones')
    tipo = models.CharField(max_length=100, choices=TIPO_CHOICES)
    titulo = models.CharField(max_length=255)
    mensaje = models.TextField()
    leida = models.BooleanField(default=False)
    fecha_creacion = models.DateTimeField(auto_now_add=True)
    fecha_lectura = models.DateTimeField(null=True, blank=True)
    reserva = models.ForeignKey('Reserva', on_delete=models.CASCADE, null=True, blank=True, related_name='notificaciones')  # A√±adido related_name
    
    def __str__(self):
        return self.titulo
    
    def get_fecha_creacion_formateada(self):
        """Retorna la fecha formateada de manera legible"""
        return self.fecha_creacion.strftime('%d/%m/%Y %H:%M')
    
    def marcar_como_leida(self):
        """Marca la notificaci√≥n como le√≠da"""
        self.leida = True
        self.fecha_lectura = timezone.now()
        self.save()
    
    class Meta:
        ordering = ['-fecha_creacion']
        verbose_name = 'Notificaci√≥n'
        verbose_name_plural = 'Notificaciones'
    
    def get_fecha_creacion_formateada(self):
        """Retorna la fecha formateada de manera legible"""
        return self.fecha_creacion.strftime('%d/%m/%Y %H:%M')
    
    def marcar_como_leida(self):
        """Marca la notificaci√≥n como le√≠da"""
        self.leida = True
        self.fecha_lectura = timezone.now()
        self.save()
    
    class Meta:
        ordering = ['-fecha_creacion']
        verbose_name = 'Notificaci√≥n'
        verbose_name_plural = 'Notificaciones'

class Mantenimiento(models.Model):
    ESTADO_CHOICES = (
        ('Programado', 'Programado'),
        ('En Proceso', 'En Proceso'),
        ('Completado', 'Completado'),
        ('Cancelado', 'Cancelado'),
    )
    
    TIPO_MANTENIMIENTO_CHOICES = (
        ('Preventivo', 'Preventivo'),
        ('Correctivo', 'Correctivo'),
        ('Urgente', 'Urgente'),
    )
    
    id_espacio = models.ForeignKey(Espacio, on_delete=models.CASCADE)
    tipo_mantenimiento = models.CharField(max_length=100, choices=TIPO_MANTENIMIENTO_CHOICES)
    fecha_inicio = models.DateField()
    fecha_fin = models.DateField()
    estado = models.CharField(max_length=50, choices=ESTADO_CHOICES)
    hora_inicio = models.TimeField()
    hora_fin = models.TimeField()
    
    def __str__(self):
        return f"Mantenimiento {self.tipo_mantenimiento} - {self.id_espacio.nombre}"

class HorariosDisponibilidad(models.Model):
    DIA_SEMANA_CHOICES = (
        ('Lunes', 'Lunes'),
        ('Martes', 'Martes'),
        ('Mi√©rcoles', 'Mi√©rcoles'),
        ('Jueves', 'Jueves'),
        ('Viernes', 'Viernes'),
        ('S√°bado', 'S√°bado'),
        ('Domingo', 'Domingo'),
    )
    
    id_espacio = models.ForeignKey(Espacio, on_delete=models.CASCADE)
    dia_semana = models.CharField(max_length=20, choices=DIA_SEMANA_CHOICES)
    hora_apertura = models.TimeField()
    hora_cierre = models.TimeField()
    fecha_inicio_vigencia = models.DateField()
    bloques_disponibles = models.IntegerField(default=1)
    fecha_registro = models.DateTimeField(auto_now_add=True)
    
    def __str__(self):
        return f"{self.id_espacio.nombre} - {self.dia_semana}"

class Incidencia(models.Model):
    PRIORIDAD_CHOICES = (
        ('Baja', 'Baja'),
        ('Media', 'Media'),
        ('Alta', 'Alta'),
        ('Cr√≠tica', 'Cr√≠tica'),
    )
    
    ESTADO_CHOICES = (
        ('Reportada', 'Reportada'),
        ('En Proceso', 'En Proceso'),
        ('Resuelta', 'Resuelta'),
        ('Cerrada', 'Cerrada'),
    )
    
    id_usuario = models.ForeignKey(User, on_delete=models.CASCADE, related_name='incidencias_reportadas')
    id_espacio = models.ForeignKey(Espacio, on_delete=models.SET_NULL, null=True, blank=True)
    id_equipo = models.ForeignKey(Equipamiento, on_delete=models.SET_NULL, null=True, blank=True)
    descripcion = models.TextField()
    prioridad = models.CharField(max_length=50, choices=PRIORIDAD_CHOICES, default='Media')
    estado = models.CharField(max_length=50, choices=ESTADO_CHOICES, default='Reportada')
    fecha_reporte = models.DateTimeField(auto_now_add=True)
    fecha_resolucion = models.DateTimeField(null=True, blank=True)
    acciones_tomadas = models.TextField(blank=True, null=True)
    responsable = models.ForeignKey(User, on_delete=models.SET_NULL, null=True, blank=True, related_name='incidencias_asignadas')
    observaciones = models.TextField(blank=True, null=True)
    
    def __str__(self):
        return f"Incidencia {self.id} - {self.descripcion[:50]}"
============================================================


===== serializers.py =====
from rest_framework import serializers
from django.contrib.auth.models import User
from .models import Espacio, Reserva, PerfilUsuario, Equipamiento, Area, Notificacion, HistorialAprobacion

class UserSerializer(serializers.ModelSerializer):
    class Meta:
        model = User
        fields = ['id', 'username', 'first_name', 'last_name', 'email']

class PerfilUsuarioSerializer(serializers.ModelSerializer):
    user = UserSerializer(read_only=True)
    area_nombre = serializers.CharField(source='area.nombre_area', read_only=True)
    class Meta:
        model = PerfilUsuario
        fields = ['id', 'user', 'rol', 'area', 'area_nombre']

class EquipamientoSerializer(serializers.ModelSerializer):
    class Meta:
        model = Equipamiento
        fields = '__all__'

class AreaSerializer(serializers.ModelSerializer):
    class Meta:
        model = Area
        fields = '__all__'

class EspacioSerializer(serializers.ModelSerializer):
    equipamiento = EquipamientoSerializer(many=True, read_only=True)
    class Meta:
        model = Espacio
        fields = ['id', 'nombre', 'tipo', 'capacidad', 'descripcion', 'estado', 'equipamiento']

class ReservaSerializer(serializers.ModelSerializer):
    espacio_nombre = serializers.CharField(source='espacio.nombre', read_only=True)
    solicitante_nombre = serializers.CharField(source='solicitante.username', read_only=True)
    class Meta:
        model = Reserva
        fields = [
            'id', 'espacio', 'espacio_nombre', 'solicitante', 'solicitante_nombre',
            'fecha_reserva', 'hora_inicio', 'hora_fin', 'proposito',
            'num_asistentes', 'estado', 'fecha_solicitud'
        ]

class NotificacionSerializer(serializers.ModelSerializer):
    espacio_nombre = serializers.CharField(source='reserva.espacio.nombre', read_only=True, allow_null=True)
    fecha_creacion_formateada = serializers.CharField(source='get_fecha_creacion_formateada', read_only=True)
    
    class Meta:
        model = Notificacion
        fields = [
            'id', 'tipo', 'titulo', 'mensaje', 'leida', 'fecha_creacion', 
            'fecha_creacion_formateada', 'reserva', 'espacio_nombre'
        ]
        read_only_fields = ['fecha_creacion']

class HistorialAprobacionSerializer(serializers.ModelSerializer):
    admin_nombre = serializers.CharField(source='usuario_admin.username', read_only=True)
    class Meta:
        model = HistorialAprobacion
        fields = '__all__'
============================================================


===== services.py =====
from django.utils import timezone
from .models import Notificacion, Reserva
from django.contrib.auth.models import User

class NotificacionService:
    
    @staticmethod
    def crear_notificacion(destinatario, tipo, titulo, mensaje, reserva=None):
        """
        Crea una notificaci√≥n gen√©rica - VERSI√ìN CORREGIDA
        """
        try:
            notificacion = Notificacion.objects.create(
                destinatario=destinatario,
                tipo=tipo,
                titulo=titulo,
                mensaje=mensaje,
                reserva=reserva  # Ahora se guarda correctamente
            )
            print(f"üìß Notificaci√≥n creada: {titulo} para {destinatario.username} - Reserva: {reserva.id if reserva else 'N/A'}")
            return notificacion
        except Exception as e:
            print(f"‚ùå Error creando notificaci√≥n: {e}")
            return None
    
    @staticmethod
    def crear_notificacion_reserva(reserva, tipo, titulo, mensaje):
        """
        Crea una notificaci√≥n relacionada con una reserva - VERSI√ìN CORREGIDA
        """
        try:
            return NotificacionService.crear_notificacion(
                destinatario=reserva.solicitante,
                tipo=tipo,
                titulo=titulo,
                mensaje=mensaje,
                reserva=reserva  # Pasar la instancia completa de reserva
            )
        except Exception as e:
            print(f"‚ùå Error en crear_notificacion_reserva: {e}")
            return None
    
    @staticmethod
    def notificar_creacion_reserva(reserva):
        """
        Notifica al usuario que su reserva fue creada exitosamente - VERSI√ìN CORREGIDA
        """
        try:
            mensaje = f"Tu solicitud de reserva para {reserva.espacio.nombre} el {reserva.fecha_reserva.strftime('%d/%m/%Y')} de {reserva.hora_inicio.strftime('%H:%M')} a {reserva.hora_fin.strftime('%H:%M')} ha sido recibida y est√° pendiente de aprobaci√≥n."
            
            notificacion = NotificacionService.crear_notificacion_reserva(
                reserva=reserva,
                tipo='reserva_creada',
                titulo='üìã Reserva Creada Exitosamente',
                mensaje=mensaje
            )
            
            if notificacion:
                print(f"‚úÖ Notificaci√≥n de creaci√≥n enviada para reserva {reserva.id}")
            else:
                print(f"‚ùå Fall√≥ notificaci√≥n de creaci√≥n para reserva {reserva.id}")
                
            return notificacion
        except Exception as e:
            print(f"‚ùå Error en notificar_creacion_reserva: {e}")
            return None
    
    @staticmethod
    def notificar_aprobacion_reserva(reserva, comentario_admin=None):
        """
        Notifica al usuario que su reserva fue aprobada - VERSI√ìN CORREGIDA
        """
        try:
            mensaje = f"‚úÖ Tu reserva para {reserva.espacio.nombre} el {reserva.fecha_reserva.strftime('%d/%m/%Y')} ha sido APROBADA."
            if comentario_admin:
                mensaje += f"\n\nComentario del administrador: {comentario_admin}"
            
            notificacion = NotificacionService.crear_notificacion_reserva(
                reserva=reserva,
                tipo='reserva_aprobada',
                titulo='‚úÖ Reserva Aprobada',
                mensaje=mensaje
            )
            
            if notificacion:
                print(f"‚úÖ Notificaci√≥n de aprobaci√≥n enviada para reserva {reserva.id}")
            else:
                print(f"‚ùå Fall√≥ notificaci√≥n de aprobaci√≥n para reserva {reserva.id}")
                
            return notificacion
        except Exception as e:
            print(f"‚ùå Error en notificar_aprobacion_reserva: {e}")
            return None
    
    @staticmethod
    def notificar_rechazo_reserva(reserva, motivo):
        """
        Notifica al usuario que su reserva fue rechazada - VERSI√ìN CORREGIDA
        """
        try:
            mensaje = f"‚ùå Tu reserva para {reserva.espacio.nombre} el {reserva.fecha_reserva.strftime('%d/%m/%Y')} ha sido RECHAZADA.\n\nMotivo: {motivo}"
            
            notificacion = NotificacionService.crear_notificacion_reserva(
                reserva=reserva,
                tipo='reserva_rechazada',
                titulo='‚ùå Reserva Rechazada',
                mensaje=mensaje
            )
            
            if notificacion:
                print(f"‚úÖ Notificaci√≥n de rechazo enviada para reserva {reserva.id}")
            else:
                print(f"‚ùå Fall√≥ notificaci√≥n de rechazo para reserva {reserva.id}")
                
            return notificacion
        except Exception as e:
            print(f"‚ùå Error en notificar_rechazo_reserva: {e}")
            return None
    
    # Los dem√°s m√©todos permanecen igual...
    @staticmethod
    def notificar_cancelacion_reserva(reserva, motivo=None):
        """Notifica al usuario que su reserva fue cancelada"""
        try:
            mensaje = f"üìù Tu reserva para {reserva.espacio.nombre} el {reserva.fecha_reserva.strftime('%d/%m/%Y')} ha sido CANCELADA."
            if motivo:
                mensaje += f"\n\nMotivo: {motivo}"
            
            return NotificacionService.crear_notificacion_reserva(
                reserva=reserva,
                tipo='reserva_cancelada',
                titulo='üìù Reserva Cancelada',
                mensaje=mensaje
            )
        except Exception as e:
            print(f"‚ùå Error en notificar_cancelacion_reserva: {e}")
            return None

    @staticmethod
    def obtener_notificaciones_usuario(usuario, no_leidas=False, limite=10):
        """Obtiene las notificaciones de un usuario"""
        try:
            notificaciones = Notificacion.objects.filter(destinatario=usuario)
            
            if no_leidas:
                notificaciones = notificaciones.filter(leida=False)
            
            return notificaciones.select_related('reserva', 'reserva__espacio').order_by('-fecha_creacion')[:limite]
        except Exception as e:
            print(f"‚ùå Error en obtener_notificaciones_usuario: {e}")
            return []
    
    @staticmethod
    def marcar_como_leida(notificacion_id):
        """
        Marca una notificaci√≥n espec√≠fica como le√≠da
        """
        try:
            notificacion = Notificacion.objects.get(id=notificacion_id)
            notificacion.marcar_como_leida()
            return True
        except Notificacion.DoesNotExist:
            return False
    
    @staticmethod
    def marcar_todas_como_leidas(usuario):
        """
        Marca todas las notificaciones de un usuario como le√≠das
        """
        notificaciones = Notificacion.objects.filter(
            destinatario=usuario, 
            leida=False
        )
        
        count = notificaciones.count()
        notificaciones.update(leida=True, fecha_lectura=timezone.now())
        
        print(f"üì≠ Marcadas {count} notificaciones como le√≠das para {usuario.username}")
        return count
    
    @staticmethod
    def contar_notificaciones_no_leidas(usuario):
        """
        Cuenta las notificaciones no le√≠das de un usuario
        """
        return Notificacion.objects.filter(
            destinatario=usuario,
            leida=False
        ).count()
============================================================


===== urls.py =====
from django.urls import path, include
from rest_framework.routers import DefaultRouter
from . import views

router = DefaultRouter()
router.register(r'users', views.UserViewSet)
router.register(r'perfiles', views.PerfilUsuarioViewSet)
router.register(r'espacios', views.EspacioViewSet)
router.register(r'reservas', views.ReservaViewSet)
router.register(r'notificaciones', views.NotificacionViewSet)
router.register(r'historial', views.HistorialAprobacionViewSet)
router.register(r'equipamientos', views.EquipamientoViewSet)
router.register(r'areas', views.AreaViewSet)


urlpatterns = [
    # P√°ginas principales - ESTAS DEBEN IR PRIMERO
    path('', views.login_view, name='login'),
    path('login/', views.login_view, name='login'),
    path('dashboard/', views.dashboard_view, name='dashboard'),
    path('logout/', views.logout_view, name='logout'),
    path('api/', include(router.urls)),
    
    # API endpoints
    path('api/reservas/', views.get_user_reservas, name='get_reservas'),
    path('api/espacios/', views.get_espacios_disponibles, name='get_espacios'),
    path('api/notificaciones/', views.get_notificaciones_usuario, name='get_notificaciones'),
    path('api/incidencias/reportar/', views.reportar_incidencia, name='reportar_incidencia'),
    path('api/dashboard/stats/', views.get_dashboard_stats, name='dashboard_stats'),
    path('api/registro/', views.registro_usuario, name='registro_usuario'),
    path('api/reservas/<int:reserva_id>/cancelar/', views.cancelar_reserva_api, name='cancelar_reserva_api'),
    path('api/crear-reserva/', views.crear_reserva_api, name='crear_reserva_api'),
    
    # API de notificaciones
    path('api/notificaciones/', views.get_notificaciones_usuario, name='get_notificaciones'),
    path('api/notificaciones/contar/', views.contar_notificaciones_no_leidas, name='contar_notificaciones'),
    path('api/notificaciones/marcar-todas-leidas/', views.marcar_todas_leidas, name='marcar_todas_leidas'),
    path('api/notificaciones/<int:notificacion_id>/marcar-leida/', views.marcar_notificacion_leida, name='marcar_notificacion_leida'),
    path('api/reservas/<int:reserva_id>/aprobar/', views.aprobar_reserva_api, name='aprobar_reserva_api'),
    path('api/reservas/<int:reserva_id>/rechazar/', views.rechazar_reserva_api, name='rechazar_reserva_api'),
    # Vistas de p√°ginas HTML
    path('espacios/', views.espacios_view, name='espacios'),
    path('reservas/', views.reservas_view, name='reservas'),
    path('notificaciones/', views.notificaciones_view, name='notificaciones'),
    path('calendario/', views.calendario_view, name='calendario'),
    path('crear-reserva/', views.crear_reserva_view, name='crear_reserva'),
    path('reserva-exitosa/', views.reserva_exitosa, name='reserva_exitosa'),
    path('detalle-reserva/', views.detalle_reserva_view, name='detalle_reserva'),
    path('cancelar-reserva/', views.cancelar_reserva_view, name='cancelar_reserva'),
    
    # Vistas de administraci√≥n
    path('admin-dashboard/', views.admin_dashboard_view, name='admin_dashboard'),
    path('solicitudes-pendientes/', views.solicitudes_pendientes_view, name='solicitudes_pendientes'),
    path('gestion-espacios/', views.gestion_espacios_view, name='gestion_espacios'),
    path('gestion-usuarios/', views.gestion_usuarios_view, name='gestion_usuarios'),
    path('reportes/', views.reportes_view, name='reportes'),
    path('revisar-solicitud/', views.revisar_solicitud_view, name='revisar_solicitud'),
    path('force-logout/', views.force_logout, name='force_logout'),
]
============================================================


===== utils.py =====
from django.db.models import Q
from django.utils import timezone
from .models import Reserva, Mantenimiento, HorariosDisponibilidad
from datetime import datetime, time, date

def validar_disponibilidad_espacio(espacio_id, fecha, hora_inicio, hora_fin, reserva_excluida_id=None):
    """
    Valida que no existan reservas solapadas para el mismo espacio
    
    Args:
        espacio_id: ID del espacio a validar
        fecha: fecha de la reserva
        hora_inicio: hora de inicio
        hora_fin: hora de fin
        reserva_excluida_id: ID de reserva a excluir (para ediciones)
    
    Returns:
        tuple: (disponible, mensaje_error)
    """
    try:
        # Convertir a objetos time si son strings
        if isinstance(hora_inicio, str):
            hora_inicio = datetime.strptime(hora_inicio, '%H:%M:%S').time()
        if isinstance(hora_fin, str):
            hora_fin = datetime.strptime(hora_fin, '%H:%M:%S').time()
        
        # Validar que la hora de fin sea despu√©s de la hora de inicio
        if hora_inicio >= hora_fin:
            return False, "La hora de fin debe ser posterior a la hora de inicio"
        
        # Validar reservas existentes
        reservas_query = Reserva.objects.filter(
            espacio_id=espacio_id,
            fecha_reserva=fecha,
            estado__in=['Aprobada', 'Pendiente']  # Solo considerar reservas activas
        )
        
        # Excluir la reserva actual si se est√° editando
        if reserva_excluida_id:
            reservas_query = reservas_query.exclude(id=reserva_excluida_id)
        
        # Buscar solapamientos
        reservas_solapadas = reservas_query.exclude(
            Q(hora_fin__lte=hora_inicio) | Q(hora_inicio__gte=hora_fin)
        )
        
        if reservas_solapadas.exists():
            return False, "El espacio no est√° disponible en el horario seleccionado"
        
        # Validar mantenimiento programado
        mantenimiento_activo = Mantenimiento.objects.filter(
            id_espacio_id=espacio_id,
            fecha_inicio__lte=fecha,
            fecha_fin__gte=fecha,
            estado__in=['Programado', 'En Proceso']
        ).exists()
        
        if mantenimiento_activo:
            return False, "El espacio est√° en mantenimiento en la fecha seleccionada"
        
        # Validar horarios de disponibilidad del espacio
        dia_semana = fecha.strftime('%A')
        dias_semana_es = {
            'Monday': 'Lunes',
            'Tuesday': 'Martes',
            'Wednesday': 'Mi√©rcoles',
            'Thursday': 'Jueves',
            'Friday': 'Viernes',
            'Saturday': 'S√°bado',
            'Sunday': 'Domingo'
        }
        
        dia_semana_es = dias_semana_es.get(dia_semana, dia_semana)
        
        horario_disponibilidad = HorariosDisponibilidad.objects.filter(
            id_espacio_id=espacio_id,
            dia_semana=dia_semana_es,
            fecha_inicio_vigencia__lte=fecha
        ).order_by('-fecha_inicio_vigencia').first()
        
        if horario_disponibilidad:
            if hora_inicio < horario_disponibilidad.hora_apertura or hora_fin > horario_disponibilidad.hora_cierre:
                return False, f"El espacio solo est√° disponible de {horario_disponibilidad.hora_apertura} a {horario_disponibilidad.hora_cierre}"
        
        return True, "El espacio est√° disponible"
        
    except Exception as e:
        return False, f"Error al validar disponibilidad: {str(e)}"

def calcular_duracion(hora_inicio, hora_fin):
    """
    Calcular la duraci√≥n en formato legible
    """
    try:
        if isinstance(hora_inicio, str):
            hora_inicio = datetime.strptime(hora_inicio, '%H:%M:%S').time()
        if isinstance(hora_fin, str):
            hora_fin = datetime.strptime(hora_fin, '%H:%M:%S').time()
        
        diferencia = datetime.combine(date.today(), hora_fin) - datetime.combine(date.today(), hora_inicio)
        horas = diferencia.seconds // 3600
        minutos = (diferencia.seconds % 3600) // 60
        
        if horas > 0:
            return f"{horas} hora{'s' if horas > 1 else ''} {minutos} minuto{'s' if minutos > 1 else ''}"
        else:
            return f"{minutos} minutos"
    except Exception as e:
        return "Duraci√≥n no disponible"

def obtener_estadisticas_uso_espacio(espacio_id, mes=None, a√±o=None):
    """
    Obtiene estad√≠sticas de uso de un espacio
    """
    if not mes:
        mes = timezone.now().month
    if not a√±o:
        a√±o = timezone.now().year
    
    reservas_mes = Reserva.objects.filter(
        espacio_id=espacio_id,
        fecha_reserva__month=mes,
        fecha_reserva__year=a√±o,
        estado='Aprobada'
    )
    
    return {
        'total_reservas': reservas_mes.count(),
        'dias_ocupados': reservas_mes.dates('fecha_reserva', 'day').count(),
        'horas_totales': sum(
            (reserva.hora_fin.hour - reserva.hora_inicio.hour) + 
            (reserva.hora_fin.minute - reserva.hora_inicio.minute) / 60 
            for reserva in reservas_mes
        )
    }
============================================================


===== views.py =====
# reservas/views.py
from rest_framework import viewsets, permissions
from django.contrib.auth.models import User
from .models import Espacio, Reserva, PerfilUsuario, Equipamiento, Area, Notificacion, HistorialAprobacion
from .serializers import (
    UserSerializer, PerfilUsuarioSerializer, EquipamientoSerializer, 
    AreaSerializer, EspacioSerializer, ReservaSerializer, 
    NotificacionSerializer, HistorialAprobacionSerializer
)
from django.shortcuts import render, redirect
from django.contrib.auth import authenticate, login, logout
from django.contrib.auth.decorators import login_required
from django.http import JsonResponse
from django.views.decorators.http import require_http_methods
from django.views.decorators.csrf import csrf_exempt
from django.utils import timezone
import json
from .models import PerfilUsuario, Reserva, Espacio, Notificacion, Incidencia, Area
from django.contrib.auth.models import User
from django.db import IntegrityError
from django.db.models import Q # Importa Q para b√∫squedas complejas
import traceback # Para imprimir errores detallados
from .services import NotificacionService
from datetime import datetime, date, time

# --- Vista de Login Modificada ---
@csrf_exempt
def login_view(request):
    if request.method == 'GET':
        # Si ya est√° logueado, redirigir al dashboard
        if request.user.is_authenticated:
            return redirect('dashboard')
        return render(request, 'reservas/login.html')

    if request.method == 'POST':
        try:
            data = json.loads(request.body)
            email = data.get('email', '').strip()
            password = data.get('password')
            user_type = data.get('user_type', 'usuario')

            print(f"üîê Intento de login: {email} - Tipo: {user_type}")

            if not email or not password:
                return JsonResponse({
                    'success': False,
                    'message': 'Correo electr√≥nico y contrase√±a son requeridos.'
                }, status=400)

            # Autenticaci√≥n simple
            user = authenticate(request, username=email, password=password)
            print(f"üîç Resultado autenticaci√≥n: {user}")

            if user is not None:
                if user.is_active:
                    try:
                        perfil = PerfilUsuario.objects.get(user=user)
                        print(f"üë§ Perfil encontrado: {perfil.rol}")
                        
                        # Verificar rol para login de administrador
                        is_admin_login = user_type == 'administrador'
                        is_admin_role = perfil.rol in ['Admin', 'Aprobador']
                        
                        print(f"üîë Login admin: {is_admin_login}, Rol admin: {is_admin_role}")

                        if is_admin_login and not is_admin_role:
                            return JsonResponse({
                                'success': False,
                                'message': f'No tienes permisos de administrador. Tu rol es: {perfil.rol}'
                            }, status=403)

                        # Login exitoso
                        login(request, user)
                        perfil.ultimo_acceso = timezone.now()
                        perfil.save()

                        print(f"‚úÖ Login exitoso - Redirigiendo a dashboard")

                        return JsonResponse({
                            'success': True,
                            'message': 'Login exitoso',
                            'redirect_url': '/dashboard/'
                        })

                    except PerfilUsuario.DoesNotExist:
                        print(f"‚ùå No tiene perfil: {email}")
                        return JsonResponse({
                            'success': False,
                            'message': 'Error: Perfil de usuario no configurado.'
                        }, status=500)
                else:
                    return JsonResponse({
                        'success': False,
                        'message': 'Cuenta desactivada.'
                    }, status=403)
            else:
                print(f"‚ùå Credenciales incorrectas para: {email}")
                return JsonResponse({
                    'success': False, 
                    'message': 'Credenciales incorrectas'
                }, status=401)

        except json.JSONDecodeError:
            return JsonResponse({
                'success': False, 
                'message': 'Error en los datos enviados'
            }, status=400)
        except Exception as e:
            print(f"üí• Error en login: {str(e)}")
            return JsonResponse({
                'success': False, 
                'message': 'Error interno del servidor'
            }, status=500)

    return JsonResponse({
        'success': False, 
        'message': 'M√©todo no permitido'
    }, status=405)
# --- Funci√≥n de Registro Autom√°tico Modificada ---
def registrar_usuario_automatico(email, password, rol='Usuario'):
    """Registra un usuario autom√°ticamente si no existe (insensible a may√∫sculas/min√∫sculas)."""
    try:
        username_base = email.split('@')[0]
        first_name = username_base.capitalize()

        if User.objects.filter(Q(email__iexact=email) | Q(username__iexact=email)).exists():
            print(f"‚ö†Ô∏è Intento de registro autom√°tico para usuario existente: {email}")
            return None

        user = User.objects.create_user(
            username=email,
            email=email,
            password=password,
            first_name=first_name,
            last_name='Usuario'
        )
        print(f"‚úÖ Usuario base creado: {email}")

        area_default, _ = Area.objects.get_or_create(
            nombre_area="General",
            defaults={'descripcion': '√Årea general por defecto'}
        )

        PerfilUsuario.objects.create(
            user=user,
            rol=rol,
            area=area_default,
            departamento='Indefinido',
            estado='activo'
        )
        print(f"‚úÖ PerfilUsuario creado para: {email}")
        return user

    except IntegrityError as e:
         print(f"‚ùå Error de integridad al registrar usuario {email}: {e}")
         return None
    except Exception as e:
        print(f"‚ùå Error inesperado registrando usuario {email}: {e}")
        traceback.print_exc()
        return None

# --- Vista del Dashboard Modificada ---
@login_required
def dashboard_view(request):
    try:
        perfil = PerfilUsuario.objects.get(user=request.user)
        print(f"üéØ Usuario {request.user.username} accediendo a dashboard. Rol: {perfil.rol}")
        
        # Obtener datos REALES de la base de datos
        reservas_usuario = Reserva.objects.filter(solicitante=request.user)
        reservas_activas = reservas_usuario.filter(
            estado='Aprobada', 
            fecha_reserva__gte=timezone.now().date()
        ).count()
        reservas_pendientes = reservas_usuario.filter(estado='Pendiente').count()
        
        # Obtener las 5 reservas m√°s recientes
        reservas_recientes = reservas_usuario.select_related('espacio').order_by('-fecha_solicitud')[:5]
        
        print(f"üìä Estad√≠sticas - Activas: {reservas_activas}, Pendientes: {reservas_pendientes}, Total: {reservas_usuario.count()}")
        
        context = {
            'user': request.user,
            'perfil': perfil,
            'reservas_activas': reservas_activas,
            'reservas_pendientes': reservas_pendientes,
            'total_reservas': reservas_usuario.count(),
            'reservas_recientes': reservas_recientes,
        }
        
        # Redirigir seg√∫n el rol
        if perfil.rol in ['Admin', 'Aprobador']:
            print("‚û°Ô∏è Redirigiendo a dashboard admin")
            return render(request, 'reservas/dashboard_admin.html', context)
        else:
            print("‚û°Ô∏è Redirigiendo a dashboard usuario")
            return render(request, 'reservas/dashboard_usuario.html', context)
            
    except PerfilUsuario.DoesNotExist:
        print(f"‚ùå Usuario {request.user.username} no tiene perfil")
        logout(request)
        return redirect('login')
    except Exception as e:
        print(f"üí• Error en dashboard: {str(e)}")
        import traceback
        traceback.print_exc()
        logout(request)
        return redirect('login')

@login_required
def reservas_view(request):
    """Vista del historial de reservas con datos REALES"""
    try:
        # Obtener reservas REALES del usuario
        reservas = Reserva.objects.filter(solicitante=request.user).order_by('-fecha_solicitud')
        
        context = {
            'user': request.user,
            'reservas': reservas,
            'reservas_count': reservas.count()
        }
        return render(request, 'reservas/reservas.html', context)
        
    except Exception as e:
        print(f"Error en reservas_view: {e}")
        return render(request, 'reservas/reservas.html', {'reservas': [], 'reservas_count': 0})

@login_required
def calendario_view(request):
    """Vista del calendario con eventos REALES"""
    try:
        # Obtener reservas REALES para el calendario
        reservas_calendario = Reserva.objects.filter(
            solicitante=request.user,
            fecha_reserva__month=timezone.now().month
        ).select_related('espacio')
        
        eventos_calendario = []
        for reserva in reservas_calendario:
            eventos_calendario.append({
                'title': reserva.espacio.nombre,
                'start': f"{reserva.fecha_reserva}T{reserva.hora_inicio}",
                'end': f"{reserva.fecha_reserva}T{reserva.hora_fin}",
                'color': '#10b981' if reserva.estado == 'Aprobada' else '#f59e0b',
                'estado': reserva.estado
            })
        
        context = {
            'user': request.user,
            'eventos': eventos_calendario
        }
        return render(request, 'reservas/calendario.html', context)
        
    except Exception as e:
        print(f"Error en calendario_view: {e}")
        return render(request, 'reservas/calendario.html', {'eventos': []})

# --- Vistas de API ---
@login_required
def get_user_reservas(request):
    try:
        reservas = Reserva.objects.filter(solicitante=request.user).order_by('-fecha_solicitud')
        data = []
        for reserva in reservas:
            data.append({
                'id': reserva.id,
                'espacio': reserva.espacio.nombre,
                'fecha': reserva.fecha_reserva.strftime('%d/%m/%Y'),
                'hora_inicio': reserva.hora_inicio.strftime('%H:%M'),
                'hora_fin': reserva.hora_fin.strftime('%H:%M'),
                'estado': reserva.estado,
                'proposito': reserva.proposito,
                'num_asistentes': reserva.num_asistentes,
                'fecha_solicitud': reserva.fecha_solicitud.strftime('%d/%m/%Y %H:%M')
            })
        return JsonResponse({'success': True, 'reservas': data})
    except Exception as e:
        print(f"‚ùå Error en get_user_reservas: {e}")
        traceback.print_exc()
        return JsonResponse({'success': False, 'error': str(e)})

@login_required
def get_espacios_disponibles(request):
    try:
        espacios = Espacio.objects.filter(estado='Disponible')
        data = []
        for espacio in espacios:
            data.append({
                'id': espacio.id,
                'nombre': espacio.nombre,
                'tipo': espacio.tipo,
                'edificio': espacio.edificio,
                'piso': espacio.piso,
                'capacidad': espacio.capacidad,
                'descripcion': espacio.descripcion,
                'estado': espacio.estado
            })
        return JsonResponse({'success': True, 'espacios': data})
    except Exception as e:
        print(f"‚ùå Error en get_espacios_disponibles: {e}")
        traceback.print_exc()
        return JsonResponse({'success': False, 'error': str(e)})

@login_required
def get_notificaciones(request):
    try:
        notificaciones = Notificacion.objects.filter(
            destinatario=request.user,
            leida=False
        ).order_by('-fecha_creacion')[:10]

        data = []
        for notif in notificaciones:
            data.append({
                'id': notif.id,
                'tipo': notif.tipo,
                'titulo': notif.titulo,
                'mensaje': notif.mensaje,
                'fecha': notif.fecha_creacion.strftime('%d/%m/%Y %H:%M'),
                'leida': notif.leida
            })
        return JsonResponse({'success': True, 'notificaciones': data})
    except Exception as e:
        print(f"‚ùå Error en get_notificaciones: {e}")
        traceback.print_exc()
        return JsonResponse({'success': False, 'error': str(e)})

@login_required
@csrf_exempt
def reportar_incidencia(request):
    if request.method == 'POST':
        try:
            data = json.loads(request.body)
            incidencia = Incidencia.objects.create(
                id_usuario=request.user,
                descripcion=data.get('descripcion'),
                prioridad=data.get('prioridad', 'Media'),
                id_espacio_id=data.get('id_espacio'),
                id_equipo_id=data.get('id_equipo')
            )
            return JsonResponse({'success': True, 'incidencia_id': incidencia.id})
        except Exception as e:
            print(f"‚ùå Error en reportar_incidencia: {e}")
            traceback.print_exc()
            return JsonResponse({'success': False, 'error': str(e)}, status=500)
    return JsonResponse({'success': False, 'error': 'M√©todo no permitido'}, status=405)
@csrf_exempt
def registro_usuario(request):
    """
    Vista para registrar nuevos usuarios desde el formulario de registro
    """
    if request.method == 'POST':
        try:
            data = json.loads(request.body)
            email = data.get('email', '').strip().lower()
            password = data.get('password')
            first_name = data.get('first_name', '').strip()
            last_name = data.get('last_name', '').strip()
            department = data.get('department', 'Indefinido')

            # Validaciones b√°sicas
            if not all([email, password, first_name, last_name]):
                return JsonResponse({
                    'success': False,
                    'message': 'Todos los campos son requeridos'
                }, status=400)

            if len(password) < 6:
                return JsonResponse({
                    'success': False,
                    'message': 'La contrase√±a debe tener al menos 6 caracteres'
                }, status=400)

            # Verificar si el usuario ya existe
            if User.objects.filter(Q(email__iexact=email) | Q(username__iexact=email)).exists():
                return JsonResponse({
                    'success': False,
                    'message': 'Ya existe un usuario con este correo electr√≥nico'
                }, status=400)

            # Crear el usuario
            user = User.objects.create_user(
                username=email,
                email=email,
                password=password,
                first_name=first_name,
                last_name=last_name
            )

            # Obtener o crear √°rea por defecto
            area, _ = Area.objects.get_or_create(
                nombre_area="General",
                defaults={'descripcion': '√Årea general por defecto'}
            )

            # Crear perfil de usuario
            PerfilUsuario.objects.create(
                user=user,
                rol='Usuario',  # Todos los registrados son usuarios normales
                area=area,
                departamento=department,
                estado='activo'
            )

            print(f"‚úÖ Nuevo usuario registrado: {email} - {first_name} {last_name}")

            return JsonResponse({
                'success': True,
                'message': 'Usuario registrado exitosamente. Ahora puedes iniciar sesi√≥n.'
            })

        except json.JSONDecodeError:
            return JsonResponse({
                'success': False,
                'message': 'Error en los datos enviados'
            }, status=400)
        except Exception as e:
            print(f"‚ùå Error en registro_usuario: {e}")
            return JsonResponse({
                'success': False,
                'message': 'Error interno del servidor al crear la cuenta'
            }, status=500)

    return JsonResponse({
        'success': False,
        'message': 'M√©todo no permitido'
    }, status=405)
@login_required
def get_dashboard_stats(request):
    try:
        perfil = PerfilUsuario.objects.get(user=request.user)
        stats = {}

        if perfil.rol == 'Usuario':
            stats['reservas_activas'] = Reserva.objects.filter(
                solicitante=request.user,
                estado='Aprobada',
                fecha_reserva__gte=timezone.now().date()
            ).count()
            stats['reservas_pendientes'] = Reserva.objects.filter(
                solicitante=request.user,
                estado='Pendiente'
            ).count()
            stats['total_reservas'] = Reserva.objects.filter(
                solicitante=request.user
            ).count()
        elif perfil.rol in ['Admin', 'Aprobador']:
            stats['reservas_pendientes_aprobacion'] = Reserva.objects.filter(
                estado='Pendiente'
            ).count()
            stats['total_espacios'] = Espacio.objects.count()
            stats['espacios_disponibles'] = Espacio.objects.filter(estado='Disponible').count()

        stats['notificaciones_sin_leer'] = Notificacion.objects.filter(
            destinatario=request.user,
            leida=False
        ).count()

        return JsonResponse({'success': True, 'stats': stats})

    except PerfilUsuario.DoesNotExist:
         print(f"‚ö†Ô∏è Error en get_dashboard_stats: Usuario {request.user.username} sin PerfilUsuario.")
         return JsonResponse({'success': False, 'error': 'Perfil no encontrado'}, status=404)
    except Exception as e:
        print(f"‚ùå Error en get_dashboard_stats: {e}")
        traceback.print_exc()
        return JsonResponse({'success': False, 'error': str(e)}, status=500)

# --- Vista de Logout ---
def logout_view(request):
    logout(request)
    return redirect('login')

# --- VISTAS PARA SERVIR TEMPLATES HTML ---
@login_required
def reservas_view(request):
    """Vista del historial de reservas con datos REALES"""
    try:
        # Obtener reservas REALES del usuario
        reservas = Reserva.objects.filter(solicitante=request.user).order_by('-fecha_solicitud')
        
        context = {
            'user': request.user,
            'reservas': reservas,
            'reservas_count': reservas.count()
        }
        return render(request, 'reservas/reservas.html', context)
        
    except Exception as e:
        print(f"Error en reservas_view: {e}")
        return render(request, 'reservas/reservas.html', {'reservas': [], 'reservas_count': 0})
    
@login_required
def notificaciones_view(request):
    return render(request, 'reservas/notificaciones.html')

@login_required
def calendario_view(request):
    """Vista del calendario con eventos REALES"""
    try:
        # Obtener reservas REALES para el calendario
        reservas_calendario = Reserva.objects.filter(
            solicitante=request.user
        ).select_related('espacio')
        
        eventos_calendario = []
        for reserva in reservas_calendario:
            eventos_calendario.append({
                'id': reserva.id,
                'title': f"{reserva.espacio.nombre} - {reserva.proposito}",
                'start': f"{reserva.fecha_reserva}T{reserva.hora_inicio}",
                'end': f"{reserva.fecha_reserva}T{reserva.hora_fin}",
                'color': '#10b981' if reserva.estado == 'Aprobada' else 
                        '#f59e0b' if reserva.estado == 'Pendiente' else 
                        '#ef4444',
                'estado': reserva.estado,
                'espacio': reserva.espacio.nombre,
                'espacio_id': reserva.espacio.id,
                'extendedProps': {
                    'estado': reserva.estado,
                    'espacio_id': reserva.espacio.id,
                    'espacio_nombre': reserva.espacio.nombre,
                    'proposito': reserva.proposito
                }
            })
        
        # Obtener espacios para el filtro
        espacios = Espacio.objects.filter(estado='Disponible')
        
        # Convertir a JSON para el template
        eventos_json = json.dumps(eventos_calendario, default=str)
        
        context = {
            'user': request.user,
            'eventos': eventos_json,
            'espacios': espacios,
            'reservas': reservas_calendario,
            'current_month': timezone.now().strftime('%Y-%m')
        }
        return render(request, 'reservas/calendario.html', context)
        
    except Exception as e:
        print(f"Error en calendario_view: {e}")
        import traceback
        traceback.print_exc()
        return render(request, 'reservas/calendario.html', {
            'eventos': '[]', 
            'espacios': [],
            'reservas': [],
            'current_month': timezone.now().strftime('%Y-%m')
        })

@login_required
def crear_reserva_view(request):
    return render(request, 'reservas/crear_reserva.html')

@login_required
def reserva_exitosa_view(request):
    return render(request, 'reservas/reserva_exitosa.html')

@login_required
def detalle_reserva_view(request):
    """Vista de detalle de reserva con datos REALES de la BD"""
    reserva_id = request.GET.get('id')
    
    try:
        # Obtener la reserva espec√≠fica del usuario
        reserva = Reserva.objects.select_related('espacio', 'solicitante').get(
            id=reserva_id, 
            solicitante=request.user
        )
        
        # Formatear datos para el template
        context = {
            'user': request.user,
            'reserva': reserva,
            'reserva_data': {
                'id': reserva.id,
                'estado': reserva.estado.lower(),
                'espacio': {
                    'id': reserva.espacio.id,
                    'nombre': reserva.espacio.nombre,
                    'ubicacion': f"{reserva.espacio.edificio or 'Edificio Principal'}, Piso {reserva.espacio.piso or 'N/A'}",
                    'capacidad': f"{reserva.espacio.capacidad} personas",
                    'equipamiento': ', '.join([eq.nombre_equipo for eq in reserva.espacio.equipamientos.all()]) or "Equipamiento b√°sico",
                    'descripcion': reserva.espacio.descripcion or "Espacio disponible para reuniones y eventos."
                },
                'fecha': reserva.fecha_reserva.strftime('%A, %d de %B %Y'),
                'horario': f"{reserva.hora_inicio.strftime('%H:%M')} - {reserva.hora_fin.strftime('%H:%M')}",
                'duracion': calcular_duracion(reserva.hora_inicio, reserva.hora_fin),
                'proposito': reserva.proposito,
                'asistentes': f"{reserva.num_asistentes} personas",
                'usuario': {
                    'nombre': f"{reserva.solicitante.first_name} {reserva.solicitante.last_name}",
                    'email': reserva.solicitante.email,
                    'telefono': 'N/A'  # Podr√≠as agregar este campo al modelo de usuario
                },
                'fechaSolicitud': reserva.fecha_solicitud.strftime('%d de %B, %H:%M'),
                'comentariosAdmin': reserva.comentario_admin or "Sin comentarios adicionales."
            }
        }
        return render(request, 'reservas/detalle_reserva.html', context)
        
    except Reserva.DoesNotExist:
        messages.error(request, 'Reserva no encontrada.')
        return redirect('reservas')
    except Exception as e:
        print(f"Error en detalle_reserva_view: {e}")
        messages.error(request, 'Error al cargar los detalles de la reserva.')
        return redirect('reservas')

def calcular_duracion(hora_inicio, hora_fin):
    """Calcular la duraci√≥n en formato legible"""
    if isinstance(hora_inicio, str):
        hora_inicio = datetime.strptime(hora_inicio, '%H:%M:%S').time()
    if isinstance(hora_fin, str):
        hora_fin = datetime.strptime(hora_fin, '%H:%M:%S').time()
    
    diferencia = datetime.combine(date.today(), hora_fin) - datetime.combine(date.today(), hora_inicio)
    horas = diferencia.seconds // 3600
    minutos = (diferencia.seconds % 3600) // 60
    
    if horas > 0:
        return f"{horas} hora{'s' if horas > 1 else ''} {minutos} minuto{'s' if minutos > 1 else ''}"
    else:
        return f"{minutos} minutos"

@login_required
def cancelar_reserva_view(request):
    # Considera pasar un ID aqu√≠
    return render(request, 'reservas/cancelar_reserva.html')

# --- Vistas de Administraci√≥n ---
# A√±ade @login_required y verificaci√≥n de rol/permisos aqu√≠

@login_required
def admin_dashboard_view(request):
    try:
        perfil = PerfilUsuario.objects.get(user=request.user)
        if perfil.rol not in ['Admin', 'Aprobador']:
            return redirect('dashboard') # O p√°gina de error
    except PerfilUsuario.DoesNotExist:
        return redirect('login')
    return render(request, 'reservas/dashboard_admin.html')

@login_required
def solicitudes_pendientes_view(request):
    # A√±adir verificaci√≥n de rol
    return render(request, 'reservas/solicitudes_pendientes.html')

@login_required
def gestion_espacios_view(request):
    # A√±adir verificaci√≥n de rol
    return render(request, 'reservas/gestion_espacios.html')

@login_required
def gestion_usuarios_view(request):
    # A√±adir verificaci√≥n de rol
    return render(request, 'reservas/gestion_usuarios.html')

@login_required
def reportes_view(request):
    # A√±adir verificaci√≥n de rol
    return render(request, 'reservas/reportes.html')

@login_required
def revisar_solicitud_view(request):
    # Considera pasar un ID aqu√≠
    # A√±adir verificaci√≥n de rol
    return render(request, 'reservas/revisar_solicitud.html')

@login_required
@csrf_exempt
def cancelar_reserva_api(request, reserva_id):
    if request.method == 'POST':
        try:
            reserva = Reserva.objects.get(id=reserva_id, solicitante=request.user)
            
            if reserva.estado in ['Pendiente', 'Aprobada']:
                reserva.estado = 'Cancelada'
                reserva.save()
                
                # Crear notificaci√≥n
                Notificacion.objects.create(
                    destinatario=request.user,
                    tipo='reserva',
                    titulo='Reserva Cancelada',
                    mensaje=f'Tu reserva para {reserva.espacio.nombre} ha sido cancelada.',
                    leida=False
                )
                
                return JsonResponse({'success': True, 'message': 'Reserva cancelada exitosamente'})
            else:
                return JsonResponse({'success': False, 'error': 'No se puede cancelar esta reserva'})
                
        except Reserva.DoesNotExist:
            return JsonResponse({'success': False, 'error': 'Reserva no encontrada'})
        except Exception as e:
            return JsonResponse({'success': False, 'error': str(e)})
    
    return JsonResponse({'success': False, 'error': 'M√©todo no permitido'})

# reservas/views.py - AGREGAR ESTA VISTA

@login_required
@csrf_exempt
def crear_reserva_api(request):
    """API para crear reservas REALES en la base de datos - VERSI√ìN MEJORADA"""
    if request.method == 'POST':
        try:
            print("üîç Lleg√≥ la solicitud POST a crear_reserva_api")
            data = json.loads(request.body)
            print(f"üìù Datos recibidos para crear reserva: {data}")
            
            # Validar datos requeridos
            required_fields = ['espacio_id', 'fecha_reserva', 'hora_inicio', 'hora_fin', 'proposito', 'num_asistentes']
            for field in required_fields:
                if not data.get(field):
                    return JsonResponse({
                        'success': False, 
                        'message': f'El campo {field} es requerido'
                    }, status=400)

            # Verificar que el espacio existe
            try:
                espacio = Espacio.objects.get(id=data['espacio_id'])
                print(f"üè¢ Espacio encontrado: {espacio.nombre}")
            except Espacio.DoesNotExist:
                print(f"‚ùå Espacio no encontrado: ID {data['espacio_id']}")
                return JsonResponse({
                    'success': False,
                    'message': 'El espacio seleccionado no existe'
                }, status=400)

            # Crear la reserva REAL
            reserva = Reserva.objects.create(
                espacio=espacio,
                solicitante=request.user,
                fecha_reserva=data['fecha_reserva'],
                hora_inicio=data['hora_inicio'],
                hora_fin=data['hora_fin'],
                proposito=data['proposito'],
                num_asistentes=data['num_asistentes'],
                estado='Pendiente'
            )
            
            print(f"‚úÖ Reserva REAL creada: ID {reserva.id} para {request.user.username}")
            print(f"üìÖ Detalles: {reserva.espacio.nombre} - {reserva.fecha_reserva} - {reserva.hora_inicio} a {reserva.hora_fin}")
            
            # NOTIFICAR AL USUARIO - VERSI√ìN MEJORADA
            try:
                notificacion = NotificacionService.notificar_creacion_reserva(reserva)
                if notificacion:
                    print(f"üìß Notificaci√≥n de creaci√≥n enviada exitosamente: {notificacion.id}")
                else:
                    print("‚ö†Ô∏è No se pudo crear la notificaci√≥n de creaci√≥n")
            except Exception as notif_error:
                print(f"‚ö†Ô∏è Error en notificaci√≥n: {notif_error}")
                # No fallar la reserva por error en notificaci√≥n
            
            return JsonResponse({
                'success': True,
                'message': 'Reserva creada exitosamente',
                'reserva_id': reserva.id,
                'notificacion_creada': notificacion is not None,
                'redirect_url': f'/reserva-exitosa/?reserva_id={reserva.id}'
            })

        except json.JSONDecodeError as e:
            print(f"‚ùå Error JSON: {e}")
            return JsonResponse({
                'success': False,
                'message': 'Error en los datos enviados'
            }, status=400)
        except Exception as e:
            print(f"‚ùå Error creando reserva: {e}")
            import traceback
            traceback.print_exc()
            return JsonResponse({
                'success': False,
                'message': f'Error interno del servidor: {str(e)}'
            }, status=500)

    return JsonResponse({
        'success': False,
        'message': 'M√©todo no permitido'
    }, status=405)
    
    # --- VISTAS PARA SERVIR TEMPLATES HTML ---
@login_required
def espacios_view(request):
    """Vista para mostrar los espacios disponibles"""
    try:
        espacios = Espacio.objects.filter(estado='Disponible').prefetch_related('equipamientos')
        print(f"üè¢ Espacios encontrados: {espacios.count()}")
        
        context = {
            'user': request.user,
            'espacios': espacios
        }
        return render(request, 'reservas/espacios.html', context)
    except Exception as e:
        print(f"‚ùå Error en espacios_view: {e}")
        return render(request, 'reservas/espacios.html', {'espacios': []})

@login_required
def notificaciones_view(request):
    """Vista para mostrar notificaciones"""
    try:
        notificaciones = Notificacion.objects.filter(
            destinatario=request.user
        ).order_by('-fecha_creacion')[:10]
        
        context = {
            'user': request.user,
            'notificaciones': notificaciones
        }
        return render(request, 'reservas/notificaciones.html', context)
    except Exception as e:
        print(f"Error en notificaciones_view: {e}")
        return render(request, 'reservas/notificaciones.html', {'notificaciones': []})

@login_required
def crear_reserva_view(request):
    """Vista para crear nueva reserva"""
    try:
        espacios = Espacio.objects.filter(estado='Disponible')
        context = {
            'user': request.user,
            'espacios': espacios
        }
        return render(request, 'reservas/crear_reserva.html', context)
    except Exception as e:
        print(f"Error en crear_reserva_view: {e}")
        return render(request, 'reservas/crear_reserva.html', {'espacios': []})

@login_required
def reserva_exitosa(request):
    """Vista de confirmaci√≥n de reserva exitosa con datos REALES"""
    reserva_id = request.GET.get('reserva_id')
    print(f"üîç ID de reserva recibido: {reserva_id}")
    
    try:
        if reserva_id:
            # Obtener la reserva espec√≠fica
            reserva = Reserva.objects.select_related('espacio').get(id=reserva_id, solicitante=request.user)
            print(f"‚úÖ Reserva encontrada: {reserva.id} - {reserva.espacio.nombre}")
        else:
            # Obtener la √∫ltima reserva del usuario
            reserva = Reserva.objects.select_related('espacio').filter(
                solicitante=request.user
            ).order_by('-fecha_solicitud').first()
            print(f"üìã √öltima reserva encontrada: {reserva.id if reserva else 'None'}")
        
        context = {
            'user': request.user,
            'reserva': reserva
        }
        # CAMBIA ESTA L√çNEA - usa gui√≥n bajo en lugar de gui√≥n medio
        return render(request, 'reservas/reserva_exitosa.html', context)
        
    except Reserva.DoesNotExist:
        print(f"‚ùå Reserva no encontrada: ID {reserva_id}")
        # Si no hay reserva, mostrar p√°gina gen√©rica
        context = {
            'user': request.user,
            'reserva': None
        }
        return render(request, 'reservas/reserva_exitosa.html', context)
    except Exception as e:
        print(f"üí• Error en reserva_exitosa: {e}")
        import traceback
        traceback.print_exc()
        context = {
            'user': request.user,
            'reserva': None
        }
        return render(request, 'reservas/reserva_exitosa.html', context)

@login_required
def reserva_exitosa_view(request):
    """Vista de confirmaci√≥n de reserva exitosa con datos REALES"""
    reserva_id = request.GET.get('reserva_id')
    print(f"üîç ID de reserva recibido: {reserva_id}")
    
    try:
        if reserva_id:
            # Obtener la reserva espec√≠fica
            reserva = Reserva.objects.select_related('espacio').get(id=reserva_id, solicitante=request.user)
            print(f"‚úÖ Reserva encontrada: {reserva.id} - {reserva.espacio.nombre}")
        else:
            # Obtener la √∫ltima reserva del usuario
            reserva = Reserva.objects.select_related('espacio').filter(
                solicitante=request.user
            ).order_by('-fecha_solicitud').first()
            print(f"üìã √öltima reserva encontrada: {reserva.id if reserva else 'None'}")
        
        context = {
            'user': request.user,
            'reserva': reserva
        }
        return render(request, 'reservas/reserva_exitosa.html', context)
        
    except Reserva.DoesNotExist:
        print(f"‚ùå Reserva no encontrada: ID {reserva_id}")
        # Si no hay reserva, mostrar p√°gina gen√©rica
        context = {
            'user': request.user,
            'reserva': None
        }
        return render(request, 'reservas/reserva_exitosa.html', context)
    except Exception as e:
        print(f"üí• Error en reserva_exitosa_view: {e}")
        import traceback
        traceback.print_exc()
        context = {
            'user': request.user,
            'reserva': None
        }
        return render(request, 'reservas/reserva_exitosa.html', context)

@login_required
def reserva_exitosa_view(request):
    """Vista de confirmaci√≥n de reserva exitosa"""
    return render(request, 'reservas/reserva_exitosa.html')

@login_required
def detalle_reserva_view(request):
    """Vista de detalle de reserva"""
    reserva_id = request.GET.get('id')
    try:
        reserva = Reserva.objects.get(id=reserva_id, solicitante=request.user)
        context = {
            'user': request.user,
            'reserva': reserva
        }
        return render(request, 'reservas/detalle_reserva.html', context)
    except Reserva.DoesNotExist:
        return redirect('reservas')
    except Exception as e:
        print(f"Error en detalle_reserva_view: {e}")
        return redirect('reservas')

@login_required
@csrf_exempt
def cancelar_reserva_api(request, reserva_id):
    if request.method == 'POST':
        try:
            reserva = Reserva.objects.get(id=reserva_id, solicitante=request.user)
            
            if reserva.estado in ['Pendiente', 'Aprobada']:
                estado_anterior = reserva.estado
                reserva.estado = 'Cancelada'
                reserva.save()
                
                # NOTIFICAR AL USUARIO - NUEVO C√ìDIGO
                NotificacionService.notificar_cancelacion_reserva(
                    reserva, 
                    motivo="Cancelada por el usuario"
                )
                
                return JsonResponse({'success': True, 'message': 'Reserva cancelada exitosamente'})
            else:
                return JsonResponse({'success': False, 'error': 'No se puede cancelar esta reserva'})
                
        except Reserva.DoesNotExist:
            return JsonResponse({'success': False, 'error': 'Reserva no encontrada'})
        except Exception as e:
            return JsonResponse({'success': False, 'error': str(e)})
        
@login_required
@csrf_exempt
def aprobar_reserva_api(request, reserva_id):
    """API para que administradores aprueben reservas - VERSI√ìN CORREGIDA"""
    if request.method == 'POST':
        try:
            # Verificar que el usuario es administrador
            perfil = PerfilUsuario.objects.get(user=request.user)
            if perfil.rol not in ['Admin', 'Aprobador']:
                return JsonResponse({
                    'success': False, 
                    'error': 'No tienes permisos para aprobar reservas'
                }, status=403)
            
            # Obtener datos del cuerpo de la solicitud
            data = json.loads(request.body) if request.body else {}
            comentario_admin = data.get('comentario', '')
            
            reserva = Reserva.objects.get(id=reserva_id)
            estado_anterior = reserva.estado
            reserva.estado = 'Aprobada'
            reserva.id_aprobador = request.user
            reserva.comentario_admin = comentario_admin
            reserva.save()
            
            print(f"‚úÖ Reserva {reserva_id} aprobada por {request.user.username}")
            
            # NOTIFICAR AL USUARIO - VERSI√ìN CORREGIDA
            notificacion = NotificacionService.notificar_aprobacion_reserva(
                reserva, 
                comentario_admin
            )
            
            if notificacion:
                print(f"üìß Notificaci√≥n de aprobaci√≥n creada: {notificacion.id}")
            else:
                print("‚ö†Ô∏è No se pudo crear la notificaci√≥n de aprobaci√≥n")
            
            # Crear historial
            HistorialAprobacion.objects.create(
                reserva=reserva,
                usuario_admin=request.user,
                tipo_accion='Aprobada',
                motivo=comentario_admin
            )
            
            return JsonResponse({
                'success': True, 
                'message': 'Reserva aprobada exitosamente',
                'notificacion_creada': notificacion is not None
            })
            
        except Reserva.DoesNotExist:
            return JsonResponse({'success': False, 'error': 'Reserva no encontrada'})
        except Exception as e:
            print(f"‚ùå Error en aprobar_reserva_api: {e}")
            return JsonResponse({'success': False, 'error': str(e)})

@login_required
@csrf_exempt
def rechazar_reserva_api(request, reserva_id):
    """API para que administradores rechacen reservas - VERSI√ìN CORREGIDA"""
    if request.method == 'POST':
        try:
            # Verificar que el usuario es administrador
            perfil = PerfilUsuario.objects.get(user=request.user)
            if perfil.rol not in ['Admin', 'Aprobador']:
                return JsonResponse({
                    'success': False, 
                    'error': 'No tienes permisos para rechazar reservas'
                }, status=403)
            
            # Obtener datos del cuerpo de la solicitud
            data = json.loads(request.body) if request.body else {}
            motivo = data.get('motivo', 'Sin motivo especificado')
            
            reserva = Reserva.objects.get(id=reserva_id)
            estado_anterior = reserva.estado
            reserva.estado = 'Rechazada'
            reserva.id_aprobador = request.user
            reserva.comentario_admin = motivo
            reserva.save()
            
            print(f"‚ùå Reserva {reserva_id} rechazada por {request.user.username}")
            
            # NOTIFICAR AL USUARIO - VERSI√ìN CORREGIDA
            notificacion = NotificacionService.notificar_rechazo_reserva(
                reserva, 
                motivo
            )
            
            if notificacion:
                print(f"üìß Notificaci√≥n de rechazo creada: {notificacion.id}")
            else:
                print("‚ö†Ô∏è No se pudo crear la notificaci√≥n de rechazo")
            
            # Crear historial
            HistorialAprobacion.objects.create(
                reserva=reserva,
                usuario_admin=request.user,
                tipo_accion='Rechazada',
                motivo=motivo
            )
            
            return JsonResponse({
                'success': True, 
                'message': 'Reserva rechazada exitosamente',
                'notificacion_creada': notificacion is not None
            })
            
        except Reserva.DoesNotExist:
            return JsonResponse({'success': False, 'error': 'Reserva no encontrada'})
        except Exception as e:
            print(f"‚ùå Error en rechazar_reserva_api: {e}")
            return JsonResponse({'success': False, 'error': str(e)})
        
# --- Vistas de Administraci√≥n ---
@login_required
def admin_dashboard_view(request):
    """Dashboard para administradores"""
    try:
        perfil = PerfilUsuario.objects.get(user=request.user)
        if perfil.rol not in ['Admin', 'Aprobador']:
            return redirect('dashboard')
        
        # Estad√≠sticas para admin
        total_reservas = Reserva.objects.count()
        reservas_pendientes = Reserva.objects.filter(estado='Pendiente').count()
        total_espacios = Espacio.objects.count()
        usuarios_activos = User.objects.filter(is_active=True).count()
        
        context = {
            'user': request.user,
            'perfil': perfil,
            'total_reservas': total_reservas,
            'reservas_pendientes': reservas_pendientes,
            'total_espacios': total_espacios,
            'usuarios_activos': usuarios_activos
        }
        return render(request, 'reservas/dashboard_admin.html', context)
    except PerfilUsuario.DoesNotExist:
        return redirect('login')

@login_required
def solicitudes_pendientes_view(request):
    """Vista de solicitudes pendientes para administradores"""
    try:
        perfil = PerfilUsuario.objects.get(user=request.user)
        if perfil.rol not in ['Admin', 'Aprobador']:
            return redirect('dashboard')
        
        solicitudes = Reserva.objects.filter(estado='Pendiente').select_related('solicitante', 'espacio')
        
        context = {
            'user': request.user,
            'solicitudes': solicitudes
        }
        return render(request, 'reservas/solicitudes_pendientes.html', context)
    except PerfilUsuario.DoesNotExist:
        return redirect('login')

@login_required
def gestion_espacios_view(request):
    """Vista de gesti√≥n de espacios para administradores"""
    try:
        perfil = PerfilUsuario.objects.get(user=request.user)
        if perfil.rol not in ['Admin', 'Aprobador']:
            return redirect('dashboard')
        
        espacios = Espacio.objects.all()
        
        context = {
            'user': request.user,
            'espacios': espacios
        }
        return render(request, 'reservas/gestion_espacios.html', context)
    except PerfilUsuario.DoesNotExist:
        return redirect('login')

@login_required
def gestion_usuarios_view(request):
    """Vista de gesti√≥n de usuarios para administradores"""
    try:
        perfil = PerfilUsuario.objects.get(user=request.user)
        if perfil.rol not in ['Admin', 'Aprobador']:
            return redirect('dashboard')
        
        usuarios = User.objects.filter(is_active=True).prefetch_related('perfilusuario')
        
        context = {
            'user': request.user,
            'usuarios': usuarios
        }
        return render(request, 'reservas/gestion_usuarios.html', context)
    except PerfilUsuario.DoesNotExist:
        return redirect('login')

@login_required
def reportes_view(request):
    """Vista de reportes para administradores"""
    try:
        perfil = PerfilUsuario.objects.get(user=request.user)
        if perfil.rol not in ['Admin', 'Aprobador']:
            return redirect('dashboard')
        
        context = {
            'user': request.user
        }
        return render(request, 'reservas/reportes.html', context)
    except PerfilUsuario.DoesNotExist:
        return redirect('login')

@login_required
def revisar_solicitud_view(request):
    """Vista para revisar una solicitud espec√≠fica"""
    try:
        perfil = PerfilUsuario.objects.get(user=request.user)
        if perfil.rol not in ['Admin', 'Aprobador']:
            return redirect('dashboard')
        
        solicitud_id = request.GET.get('id')
        if solicitud_id:
            solicitud = Reserva.objects.get(id=solicitud_id)
            context = {
                'user': request.user,
                'solicitud': solicitud
            }
            return render(request, 'reservas/revisar_solicitud.html', context)
        else:
            return redirect('solicitudes_pendientes')
    except Reserva.DoesNotExist:
        return redirect('solicitudes_pendientes')
    except PerfilUsuario.DoesNotExist:
        return redirect('login')
def force_logout(request):
    from django.contrib.auth import logout
    logout(request)
    return redirect('login')

# Agregar estas vistas al final del views.py existente

@login_required
@require_http_methods(["GET"])
def get_notificaciones_usuario(request):
    """
    API para obtener las notificaciones del usuario - VERSI√ìN MEJORADA
    """
    try:
        # Obtener par√°metros de la solicitud
        no_leidas = request.GET.get('no_leidas', 'false').lower() == 'true'
        limite = int(request.GET.get('limite', 20))
        
        # Obtener notificaciones usando el servicio
        notificaciones = NotificacionService.obtener_notificaciones_usuario(
            usuario=request.user,
            no_leidas=no_leidas,
            limite=limite
        )
        
        # Formatear respuesta con m√°s informaci√≥n
        data = []
        for notif in notificaciones:
            notif_data = {
                'id': notif.id,
                'tipo': notif.tipo,
                'titulo': notif.titulo,
                'mensaje': notif.mensaje,
                'leida': notif.leida,
                'fecha_creacion': notif.fecha_creacion.strftime('%d/%m/%Y %H:%M'),
                'fecha_creacion_formateada': notif.get_fecha_creacion_formateada(),
            }
            
            # Incluir informaci√≥n de la reserva si existe
            if notif.reserva:
                notif_data.update({
                    'reserva_id': notif.reserva.id,
                    'espacio_nombre': notif.reserva.espacio.nombre,
                    'fecha_reserva': notif.reserva.fecha_reserva.strftime('%d/%m/%Y') if notif.reserva.fecha_reserva else None,
                    'estado_reserva': notif.reserva.estado
                })
            
            data.append(notif_data)
        
        # Contar notificaciones no le√≠das
        total_no_leidas = NotificacionService.contar_notificaciones_no_leidas(request.user)
        
        return JsonResponse({
            'success': True,
            'notificaciones': data,
            'total_no_leidas': total_no_leidas,
            'total': len(data)
        })
        
    except Exception as e:
        print(f"‚ùå Error en get_notificaciones_usuario: {e}")
        return JsonResponse({
            'success': False,
            'error': 'Error al obtener notificaciones',
            'notificaciones': [],
            'total_no_leidas': 0,
            'total': 0
        })

@login_required
@csrf_exempt
@require_http_methods(["POST"])
def marcar_notificacion_leida(request, notificacion_id):
    """
    API para marcar una notificaci√≥n como le√≠da
    """
    try:
        # Verificar que la notificaci√≥n pertenece al usuario
        notificacion = Notificacion.objects.get(
            id=notificacion_id,
            destinatario=request.user
        )
        
        # Marcar como le√≠da usando el servicio
        NotificacionService.marcar_como_leida(notificacion_id)
        
        return JsonResponse({
            'success': True,
            'message': 'Notificaci√≥n marcada como le√≠da'
        })
        
    except Notificacion.DoesNotExist:
        return JsonResponse({
            'success': False,
            'error': 'Notificaci√≥n no encontrada'
        }, status=404)
    except Exception as e:
        print(f"‚ùå Error en marcar_notificacion_leida: {e}")
        return JsonResponse({
            'success': False,
            'error': 'Error al marcar notificaci√≥n como le√≠da'
        }, status=500)

@login_required
@csrf_exempt
@require_http_methods(["POST"])
def marcar_todas_leidas(request):
    """
    API para marcar todas las notificaciones como le√≠das
    """
    try:
        count = NotificacionService.marcar_todas_como_leidas(request.user)
        
        return JsonResponse({
            'success': True,
            'message': f'{count} notificaciones marcadas como le√≠das',
            'count': count
        })
        
    except Exception as e:
        print(f"‚ùå Error en marcar_todas_leidas: {e}")
        return JsonResponse({
            'success': False,
            'error': 'Error al marcar notificaciones como le√≠das'
        }, status=500)

@login_required
@require_http_methods(["GET"])
def contar_notificaciones_no_leidas(request):
    """
    API para contar notificaciones no le√≠das
    """
    try:
        count = NotificacionService.contar_notificaciones_no_leidas(request.user)
        
        return JsonResponse({
            'success': True,
            'count': count
        })
        
    except Exception as e:
        print(f"‚ùå Error en contar_notificaciones_no_leidas: {e}")
        return JsonResponse({
            'success': False,
            'error': 'Error al contar notificaciones'
        }, status=500)

# ViewSets para tu API
class UserViewSet(viewsets.ModelViewSet):
    queryset = User.objects.all()
    serializer_class = UserSerializer
    permission_classes = [permissions.IsAuthenticated]

class PerfilUsuarioViewSet(viewsets.ModelViewSet):
    queryset = PerfilUsuario.objects.all()
    serializer_class = PerfilUsuarioSerializer
    permission_classes = [permissions.IsAuthenticated]

class EspacioViewSet(viewsets.ModelViewSet):
    queryset = Espacio.objects.all()
    serializer_class = EspacioSerializer
    permission_classes = [permissions.IsAuthenticated]

class ReservaViewSet(viewsets.ModelViewSet):
    queryset = Reserva.objects.all()
    serializer_class = ReservaSerializer
    permission_classes = [permissions.IsAuthenticated]

    def get_queryset(self):
        # Filtrar reservas por usuario (solo sus propias reservas)
        user = self.request.user
        if user.is_authenticated:
            return Reserva.objects.filter(solicitante=user)
        return Reserva.objects.none()

class NotificacionViewSet(viewsets.ModelViewSet):
    queryset = Notificacion.objects.all()
    serializer_class = NotificacionSerializer
    permission_classes = [permissions.IsAuthenticated]

    def get_queryset(self):
        # Filtrar notificaciones por usuario
        user = self.request.user
        if user.is_authenticated:
            return Notificacion.objects.filter(destinatario=user)
        return Notificacion.objects.none()

class HistorialAprobacionViewSet(viewsets.ModelViewSet):
    queryset = HistorialAprobacion.objects.all()
    serializer_class = HistorialAprobacionSerializer
    permission_classes = [permissions.IsAuthenticated]

class EquipamientoViewSet(viewsets.ModelViewSet):
    queryset = Equipamiento.objects.all()
    serializer_class = EquipamientoSerializer
    permission_classes = [permissions.IsAuthenticated]

class AreaViewSet(viewsets.ModelViewSet):
    queryset = Area.objects.all()
    serializer_class = AreaSerializer
    permission_classes = [permissions.IsAuthenticated]
============================================================


===== __init__.py =====

============================================================


################################################################################
üìÅ Carpeta: C:\Users\kevin\OneDrive\Liceo\Escritorio\Info\4_semestre\proyecto_integrado\Backend\Inacap_reserva\reservas\templates\reservas
################################################################################


===== calendario.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario - Sistema de Reservas</title>
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css' rel='stylesheet' />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f9fafb;
            color: #111827;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0 24px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: #2563eb;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav-menu {
            display: flex;
            gap: 32px;
        }

        .nav-item {
            color: #6b7280;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-item:hover, .nav-item.active {
            background: #2563eb;
            color: white;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            padding: 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Breadcrumb */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 24px;
            font-size: 14px;
            color: #6b7280;
        }

        .breadcrumb a {
            color: #2563eb;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #9ca3af;
        }

        /* Page Header */
        .page-header {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 16px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: #111827;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .new-reservation-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .new-reservation-btn:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        /* Filters */
        .filters-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .filter-label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .filter-select, .filter-input {
            padding: 10px 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            transition: border-color 0.3s ease;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: #2563eb;
        }

        .view-toggles {
            display: flex;
            background: #f3f4f6;
            border-radius: 8px;
            padding: 4px;
        }

        .view-toggle {
            padding: 8px 16px;
            border: none;
            background: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .view-toggle.active {
            background: white;
            color: #2563eb;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* Calendar Section */
        .calendar-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        #calendar {
            background: white;
            border-radius: 8px;
            padding: 20px;
            height: 600px;
        }

        .fc {
            height: 100%;
        }

        .fc-header-toolbar {
            margin-bottom: 1em;
        }

        .fc-toolbar-title {
            font-size: 1.5em;
            font-weight: 600;
        }

        .fc-event {
            cursor: pointer;
            border: none;
            font-size: 0.85em;
            font-weight: 500;
        }

        .fc-day-today {
            background-color: #eff6ff !important;
        }

        /* Legend */
        .calendar-legend {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 20px;
            padding: 16px;
            background: #f9fafb;
            border-radius: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .legend-color.available {
            background: white;
            border: 2px solid #e5e7eb;
        }

        .legend-color.occupied {
            background: #fee2e2;
            border: 2px solid #dc2626;
        }

        .legend-color.partial {
            background: #fef3c7;
            border: 2px solid #f59e0b;
        }

        .legend-color.today {
            background: white;
            border: 2px solid #2563eb;
        }

        /* Sidebar */
        .content-with-sidebar {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 24px;
        }

        .sidebar {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }

        .sidebar-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #111827;
        }

        .selected-date {
            background: #f3f4f6;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            text-align: center;
        }

        .selected-date-text {
            font-size: 18px;
            font-weight: 600;
            color: #2563eb;
        }

        .reservation-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .reservation-item {
            padding: 12px;
            background: #f9fafb;
            border-radius: 8px;
            border-left: 4px solid;
        }

        .reservation-item.approved {
            border-left-color: #10b981;
        }

        .reservation-item.pending {
            border-left-color: #f59e0b;
        }

        .reservation-time {
            font-size: 12px;
            font-weight: 600;
            color: #6b7280;
        }

        .reservation-space {
            font-size: 14px;
            font-weight: 500;
            color: #111827;
            margin-top: 2px;
        }

        /* Keyboard Help */
        .keyboard-help {
            margin-top: 20px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 8px;
            font-size: 12px;
            border: 1px solid #e2e8f0;
        }

        .keyboard-help-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .keyboard-shortcuts {
            color: #6b7280;
            line-height: 1.4;
        }

        .keyboard-tip {
            margin-top: 8px;
            color: #9ca3af;
            font-size: 11px;
            font-style: italic;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .content-with-sidebar {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: -1;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 16px;
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }

            .calendar-legend {
                flex-wrap: wrap;
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo-section">
            <div class="logo">SR</div>
            <div style="font-weight: 600; color: #111827;">Sistema de Reservas</div>
        </div>
        
        <nav class="nav-menu">
            <a href="{% url 'dashboard' %}" class="nav-item">Dashboard</a>
            <a href="{% url 'crear_reserva' %}" class="nav-item">Reservar</a>
            <a href="{% url 'reservas' %}" class="nav-item">Historial</a>
            <a href="{% url 'calendario' %}" class="nav-item active">Calendario</a>
            <a href="{% url 'espacios' %}" class="nav-item">Espacios</a>
            <a href="{% url 'notificaciones' %}" class="nav-item">Notificaciones</a>
        </nav>
        
        <div class="user-menu">
            <div class="user-avatar">
                {% if user.first_name and user.last_name %}
                    {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
                {% else %}
                    {{ user.username|first|upper }}
                {% endif %}
            </div>
            <span>
                {% if user.first_name %}
                    {{ user.first_name }} {{ user.last_name }}
                {% else %}
                    {{ user.username }}
                {% endif %}
            </span>
            <a href="{% url 'logout' %}" style="margin-left: 10px; color: #666; text-decoration: none;">üö™</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
            <a href="{% url 'dashboard' %}">Dashboard</a>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span>Calendario</span>
        </nav>

        <!-- Page Header -->
        <div class="page-header">
            <div class="header-content">
                <h1 class="page-title">Calendario de Disponibilidad</h1>
                <div class="header-actions">
                    <a href="{% url 'crear_reserva' %}" class="new-reservation-btn">
                        <span>‚ûï</span>
                        Nueva Reserva
                    </a>
                </div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters-section">
            <div class="filters-grid">
                <div class="filter-group">
                    <label class="filter-label">üè¢ Seleccionar Espacio</label>
                    <select class="filter-select" id="spaceFilter">
                        <option value="">Todos los espacios</option>
                        {% for espacio in espacios %}
                            <option value="{{ espacio.id }}">{{ espacio.nombre }}</option>
                        {% empty %}
                            <option value="">No hay espacios disponibles</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">üìÖ Mes/A√±o</label>
                    <input type="month" class="filter-input" id="monthFilter" value="{{ current_month }}">
                </div>

                <div class="filter-group">
                    <label class="filter-label">Vista</label>
                    <div class="view-toggles">
                        <button class="view-toggle active" data-view="dayGridMonth">Mes</button>
                        <button class="view-toggle" data-view="timeGridWeek">Semana</button>
                        <button class="view-toggle" data-view="timeGridDay">D√≠a</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content with Sidebar -->
        <div class="content-with-sidebar">
            <!-- Calendar Section -->
            <div class="calendar-section">
                <div id="calendar"></div>

                <!-- Legend -->
                <div class="calendar-legend">
                    <div class="legend-item">
                        <div class="legend-color available"></div>
                        <span>Disponible</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color partial"></div>
                        <span>Parcialmente ocupado</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color occupied"></div>
                        <span>Ocupado</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color today"></div>
                        <span>D√≠a actual</span>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <h3 class="sidebar-title">D√≠a Seleccionado</h3>
                <div class="selected-date">
                    <div class="selected-date-text" id="selectedDate">Hoy</div>
                </div>

                <h4 class="sidebar-title">Reservas del D√≠a</h4>
                <div class="reservation-list" id="dayReservations">
                    <div class="empty-state">
                        <p>Selecciona un d√≠a para ver las reservas</p>
                    </div>
                </div>

                <!-- Keyboard Help Section -->
                <div class="keyboard-help">
                    <div class="keyboard-help-title">
                        <span>‚å®Ô∏è</span>
                        Atajos de Teclado
                    </div>
                    <div class="keyboard-shortcuts">
                        Presiona letras para navegar: 
                        <strong>E</strong>=Ene, <strong>F</strong>=Feb, <strong>M</strong>=Mar, 
                        <strong>A</strong>=Abr, <strong>Y</strong>=May, <strong>J</strong>=Jun, 
                        <strong>U</strong>=Jul, <strong>G</strong>=Ago, <strong>S</strong>=Sep, 
                        <strong>O</strong>=Oct, <strong>N</strong>=Nov, <strong>D</strong>=Dic
                    </div>
                    <div class="keyboard-tip">
                        Presiona F1 para ayuda completa
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/locales/es.global.min.js"></script>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        
        // Obtener eventos desde el contexto de Django
        var eventos = {{ eventos|safe }};
        console.log('Eventos cargados:', eventos);
        
        // Configurar calendario
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'es',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            buttonText: {
                today: 'Hoy',
                month: 'Mes',
                week: 'Semana',
                day: 'D√≠a'
            },
            events: eventos,
            eventClick: function(info) {
                alert('Reserva: ' + info.event.title + '\nEstado: ' + info.event.extendedProps.estado);
            },
            dateClick: function(info) {
                updateSelectedDate(info.dateStr);
                updateDayReservations(info.dateStr);
            },
            eventDisplay: 'block',
            eventColor: '#3788d8',
            eventTextColor: '#ffffff'
        });
        
        calendar.render();
        
        // === ATAJOS DE TECLADO PARA MESES ===
        document.addEventListener('keydown', function(e) {
            // Solo activar si no hay campos de texto enfocados
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.isContentEditable) {
                return;
            }
            
            const key = e.key.toLowerCase();
            const currentDate = calendar.getDate();
            const currentYear = currentDate.getFullYear();
            
            let targetMonth;
            
            // Mapeo de teclas a meses
            switch(key) {
                case 'e': targetMonth = 0; break;  // Enero
                case 'f': targetMonth = 1; break;  // Febrero
                case 'm': targetMonth = 2; break;  // Marzo
                case 'a': targetMonth = 3; break;  // Abril
                case 'y': targetMonth = 4; break;  // Mayo (Y por "May")
                case 'j': targetMonth = 5; break;  // Junio
                case 'u': targetMonth = 6; break;  // Julio
                case 'g': targetMonth = 7; break;  // Agosto
                case 's': targetMonth = 8; break;  // Septiembre
                case 'o': targetMonth = 9; break;  // Octubre
                case 'n': targetMonth = 10; break; // Noviembre
                case 'd': targetMonth = 11; break; // Diciembre
                default: return; // Si no es una tecla de mes, salir
            }
            
            // Prevenir el comportamiento por defecto
            e.preventDefault();
            
            // Navegar al mes correspondiente
            const targetDate = new Date(currentYear, targetMonth, 1);
            calendar.gotoDate(targetDate);
            
            // Mostrar notificaci√≥n temporal
            showMonthNotification(targetMonth);
        });
        
        // Funci√≥n para mostrar notificaci√≥n del mes
        function showMonthNotification(monthIndex) {
            const monthNames = [
                'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
                'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'
            ];
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                font-weight: 600;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: fadeInOut 2s ease-in-out;
            `;
            
            notification.textContent = `Navegando a ${monthNames[monthIndex]}`;
            document.body.appendChild(notification);
            
            // Remover despu√©s de 2 segundos
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 2000);
        }
        
        // Agregar estilos CSS para la animaci√≥n
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInOut {
                0% { opacity: 0; transform: translateY(-20px); }
                20% { opacity: 1; transform: translateY(0); }
                80% { opacity: 1; transform: translateY(0); }
                100% { opacity: 0; transform: translateY(-20px); }
            }
        `;
        document.head.appendChild(style);

        // === AYUDA DE TECLADO (F1) ===
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F1') {
                e.preventDefault();
                showKeyboardHelp();
            }
        });

        function showKeyboardHelp() {
            const helpModal = document.createElement('div');
            helpModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
            `;

            const helpContent = document.createElement('div');
            helpContent.style.cssText = `
                background: white;
                padding: 30px;
                border-radius: 12px;
                max-width: 500px;
                max-height: 80vh;
                overflow-y: auto;
            `;

            helpContent.innerHTML = `
                <h2 style="margin-bottom: 20px; color: #111827;">‚å®Ô∏è Atajos de Teclado del Calendario</h2>
                <div style="display: grid; gap: 12px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between;">
                        <span><strong>E</strong> - Enero</span>
                        <span><strong>J</strong> - Junio</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span><strong>F</strong> - Febrero</span>
                        <span><strong>U</strong> - Julio</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span><strong>M</strong> - Marzo</span>
                        <span><strong>G</strong> - Agosto</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span><strong>A</strong> - Abril</span>
                        <span><strong>S</strong> - Septiembre</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span><strong>Y</strong> - Mayo</span>
                        <span><strong>O</strong> - Octubre</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span><strong>N</strong> - Noviembre</span>
                        <span><strong>D</strong> - Diciembre</span>
                    </div>
                </div>
                <div style="padding: 15px; background: #f8fafc; border-radius: 8px; border-left: 4px solid #2563eb;">
                    <strong>üí° Consejo:</strong> Presiona cualquier letra arriba mencionada para navegar instant√°neamente al mes correspondiente.
                </div>
                <button onclick="this.parentElement.parentElement.remove()" 
                        style="margin-top: 20px; padding: 10px 20px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer; width: 100%;">
                    Cerrar Ayuda
                </button>
            `;

            helpModal.appendChild(helpContent);
            document.body.appendChild(helpModal);

            // Cerrar al hacer clic fuera
            helpModal.addEventListener('click', function(e) {
                if (e.target === helpModal) {
                    helpModal.remove();
                }
            });
        }

        // === FUNCIONES EXISTENTES ===
        // Actualizar fecha seleccionada
        function updateSelectedDate(dateStr) {
            const date = new Date(dateStr);
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const formattedDate = date.toLocaleDateString('es-ES', options);
            document.getElementById('selectedDate').textContent = formattedDate;
        }
        
        // Actualizar reservas del d√≠a
        function updateDayReservations(dateStr) {
            const dayReservationsEl = document.getElementById('dayReservations');
            const events = calendar.getEvents();
            const dayEvents = events.filter(event => {
                const eventDate = event.start.toISOString().split('T')[0];
                return eventDate === dateStr;
            });
            
            if (dayEvents.length === 0) {
                dayReservationsEl.innerHTML = '<div class="empty-state"><p>No hay reservas para este d√≠a</p></div>';
            } else {
                let html = '';
                dayEvents.forEach(event => {
                    const startTime = event.start.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                    const endTime = event.end.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                    const status = event.extendedProps.estado || 'Pendiente';
                    const statusClass = status.toLowerCase();
                    
                    html += `
                        <div class="reservation-item ${statusClass}">
                            <div class="reservation-time">${startTime} - ${endTime}</div>
                            <div class="reservation-space">${event.title}</div>
                            <div class="reservation-status">${status}</div>
                        </div>
                    `;
                });
                dayReservationsEl.innerHTML = html;
            }
        }
        
        // Botones de vista
        const viewToggles = document.querySelectorAll('.view-toggle');
        viewToggles.forEach(toggle => {
            toggle.addEventListener('click', function() {
                const view = this.dataset.view;
                
                // Actualizar botones activos
                viewToggles.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Cambiar vista del calendario
                calendar.changeView(view);
            });
        });
        
        // Filtro de espacio
        const spaceFilter = document.getElementById('spaceFilter');
        spaceFilter.addEventListener('change', function() {
            const selectedSpace = this.value;
            console.log('üîÑ Filtro cambiado. Espacio seleccionado:', selectedSpace);
            
            // Obtener todos los eventos
            const allEvents = {{ eventos|safe }};
            console.log('üìä Total de eventos:', allEvents.length);
            
            if (!selectedSpace) {
                // Mostrar todos los eventos
                console.log('‚úÖ Mostrando todos los eventos');
                calendar.removeAllEvents();
                calendar.addEventSource(allEvents);
            } else {
                // Filtrar eventos por espacio
                const filteredEvents = allEvents.filter(event => {
                    const espacioId = event.extendedProps?.espacio_id;
                    console.log(`üîç Comparando: ${espacioId} == ${selectedSpace} (${espacioId == selectedSpace})`);
                    return espacioId == selectedSpace;
                });
                
                console.log('üéØ Eventos filtrados encontrados:', filteredEvents.length);
                console.log('üìã Eventos filtrados:', filteredEvents);
                
                // Limpiar y agregar eventos filtrados
                calendar.removeAllEvents();
                if (filteredEvents.length > 0) {
                    calendar.addEventSource(filteredEvents);
                } else {
                    console.log('‚ÑπÔ∏è No hay eventos para este espacio');
                }
            }
            
            // Forzar rerender del calendario
            calendar.render();
        });
        
        // Filtro de mes
        const monthFilter = document.getElementById('monthFilter');
        monthFilter.addEventListener('change', function() {
            const selectedDate = new Date(this.value + '-01');
            calendar.gotoDate(selectedDate);
        });
        
        // Sincronizar el filtro de mes con la vista actual del calendario
        calendar.on('datesSet', function(info) {
            const currentDate = info.view.currentStart;
            const year = currentDate.getFullYear();
            const month = String(currentDate.getMonth() + 1).padStart(2, '0');
            const monthYear = `${year}-${month}`;
            
            console.log('üîÑ Calendario cambi√≥ a:', monthYear);
            
            // Actualizar el valor del filtro de mes
            monthFilter.value = monthYear;
        });
            
        // Inicializar con la fecha de hoy
        updateSelectedDate(new Date().toISOString().split('T')[0]);
        updateDayReservations(new Date().toISOString().split('T')[0]);
    });
    </script>
</body>
</html>
============================================================


===== cancelar_reserva.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cancelar Reserva</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: rgba(0, 0, 0, 0.5);
            color: #111827;
            line-height: 1.6;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Modal */
        .modal {
            background: white;
            border-radius: 16px;
            width: 100%;
            max-width: 500px;
            margin: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .modal-header {
            padding: 24px 24px 0 24px;
            text-align: center;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
        }
        
        .modal-subtitle {
            color: #6B7280;
            font-size: 14px;
        }
        
        .modal-body {
            padding: 24px;
        }
        
        /* Reservation Summary */
        .reservation-summary {
            background: #F3F4F6;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }
        
        .summary-title {
            font-weight: 600;
            margin-bottom: 16px;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .summary-label {
            color: #6B7280;
            font-weight: 500;
        }
        
        .summary-value {
            color: #111827;
            font-weight: 600;
        }
        
        /* Warning */
        .warning {
            background: #FEF3C7;
            border: 1px solid #F59E0B;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .warning-icon {
            color: #F59E0B;
            font-size: 20px;
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .warning-content {
            flex: 1;
        }
        
        .warning-title {
            font-weight: 600;
            color: #92400E;
            margin-bottom: 4px;
        }
        
        .warning-text {
            color: #78350F;
            font-size: 14px;
            line-height: 1.5;
        }
        
        /* Form */
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }
        
        .required {
            color: #DC2626;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            transition: all 0.2s;
            resize: vertical;
            min-height: 100px;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #2563EB;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .form-help {
            font-size: 12px;
            color: #6B7280;
            margin-top: 4px;
        }
        
        /* Buttons */
        .modal-footer {
            padding: 0 24px 24px 24px;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }
        
        .btn {
            padding: 12px 24px;
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-size: 14px;
            font-family: inherit;
        }
        
        .btn-secondary {
            background: white;
            color: #6B7280;
            border-color: #E5E7EB;
        }
        
        .btn-secondary:hover {
            background: #F9FAFB;
            border-color: #D1D5DB;
        }
        
        .btn-danger {
            background: #DC2626;
            color: white;
        }
        
        .btn-danger:hover {
            background: #B91C1C;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* Success State */
        .success-modal {
            text-align: center;
            padding: 40px 24px;
        }
        
        .success-icon {
            font-size: 64px;
            margin-bottom: 16px;
            display: block;
        }
        
        .success-title {
            font-size: 24px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 12px;
        }
        
        .success-message {
            color: #6B7280;
            margin-bottom: 16px;
            line-height: 1.6;
        }
        
        .success-details {
            background: #F0FDF4;
            border: 1px solid #BBF7D0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
            text-align: left;
        }
        
        .success-details h4 {
            color: #15803D;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .success-details p {
            color: #166534;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Modal de Cancelaci√≥n -->
    <div class="modal" id="cancelModal">
        <div class="modal-header">
            <h2 class="modal-title">‚ùå Cancelar Reserva</h2>
            <p class="modal-subtitle">Esta acci√≥n no se puede deshacer</p>
        </div>
        
        <div class="modal-body">
            <!-- Resumen de la Reserva -->
            <div class="reservation-summary">
                <div class="summary-title">
                    üìã Informaci√≥n de la Reserva
                </div>
                
                <div class="summary-item">
                    <span class="summary-label">Espacio:</span>
                    <span class="summary-value">Sala de Conferencias A1</span>
                </div>
                
                <div class="summary-item">
                    <span class="summary-label">Fecha:</span>
                    <span class="summary-value">Viernes, 15 de Marzo 2025</span>
                </div>
                
                <div class="summary-item">
                    <span class="summary-label">Hora:</span>
                    <span class="summary-value">09:00 - 11:30</span>
                </div>
                
                <div class="summary-item">
                    <span class="summary-label">Duraci√≥n:</span>
                    <span class="summary-value">2 horas 30 minutos</span>
                </div>
            </div>
            
            <!-- Advertencia -->
            <div class="warning">
                <div class="warning-icon">‚ö†Ô∏è</div>
                <div class="warning-content">
                    <div class="warning-title">Pol√≠tica de Cancelaci√≥n</div>
                    <div class="warning-text">
                        ‚Ä¢ Las cancelaciones deben realizarse con al menos 24 horas de anticipaci√≥n<br>
                        ‚Ä¢ Esta acci√≥n no se puede deshacer<br>
                        ‚Ä¢ Se enviar√° una notificaci√≥n autom√°tica a todos los participantes
                    </div>
                </div>
            </div>
            
            <!-- Formulario -->
            <div class="form-group">
                <label for="cancelReason" class="form-label">
                    Motivo de cancelaci√≥n <span class="required">*</span>
                </label>
                <textarea 
                    id="cancelReason" 
                    class="form-control" 
                    placeholder="Por favor, proporciona el motivo de la cancelaci√≥n..."
                    required
                ></textarea>
                <div class="form-help">
                    Este motivo ser√° incluido en la notificaci√≥n enviada a los participantes
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="closeModal()">
                ‚Ü©Ô∏è No, mantener reserva
            </button>
            <button type="button" class="btn btn-danger" onclick="confirmCancel()" disabled id="confirmBtn">
                ‚ùå S√≠, cancelar reserva
            </button>
        </div>
    </div>
    
    <!-- Modal de Confirmaci√≥n de √âxito -->
    <div class="modal hidden" id="successModal">
        <div class="success-modal">
            <span class="success-icon">‚úÖ</span>
            <h2 class="success-title">Reserva Cancelada Exitosamente</h2>
            <p class="success-message">
                Tu reserva ha sido cancelada y se han enviado las notificaciones correspondientes.
            </p>
            
            <div class="success-details">
                <h4>üìß Informaci√≥n sobre Pol√≠ticas</h4>
                <p>
                    Como la cancelaci√≥n se realiz√≥ con m√°s de 24 horas de anticipaci√≥n, 
                    no se aplicar√°n penalizaciones. Los participantes han sido notificados 
                    autom√°ticamente sobre la cancelaci√≥n.
                </p>
            </div>
            
            <button type="button" class="btn btn-secondary" onclick="goToHistory()">
                üìã Volver al historial
            </button>
        </div>
    </div>

    <script>
        // Habilitar bot√≥n de confirmaci√≥n cuando se escriba el motivo
        document.getElementById('cancelReason').addEventListener('input', function() {
            const confirmBtn = document.getElementById('confirmBtn');
            const hasText = this.value.trim().length > 10;
            confirmBtn.disabled = !hasText;
            
            if (hasText) {
                confirmBtn.style.opacity = '1';
            } else {
                confirmBtn.style.opacity = '0.5';
            }
        });
        
        function closeModal() {
            // En una aplicaci√≥n real, esto cerrar√≠a el modal
            alert('Modal cerrado - La reserva se mantiene activa');
        }
        
        function confirmCancel() {
            const reason = document.getElementById('cancelReason').value.trim();
            
            if (reason.length < 10) {
                alert('Por favor, proporciona un motivo m√°s detallado (m√≠nimo 10 caracteres)');
                return;
            }
            
            // Simular proceso de cancelaci√≥n
            document.getElementById('confirmBtn').innerHTML = '‚è≥ Cancelando...';
            document.getElementById('confirmBtn').disabled = true;
            
            setTimeout(() => {
                // Ocultar modal de cancelaci√≥n y mostrar confirmaci√≥n
                document.getElementById('cancelModal').classList.add('hidden');
                document.getElementById('successModal').classList.remove('hidden');
            }, 1500);
        }
        
        function goToHistory() {
            // En una aplicaci√≥n real, esto navegar√≠a al historial
            alert('Navegando al historial de reservas...');
        }
        
        // Cerrar modal con Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>
============================================================


===== crear_reserva.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva Reserva - Sistema de Reservas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f9fafb;
            color: #111827;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0 24px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: #2563eb;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 24px;
        }

        /* Breadcrumb */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 24px;
            font-size: 14px;
            color: #6b7280;
        }

        .breadcrumb a {
            color: #2563eb;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* Step Wizard */
        .step-wizard {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .wizard-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .wizard-title {
            font-size: 28px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
        }

        .wizard-subtitle {
            color: #6b7280;
            font-size: 16px;
        }

        .steps-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 32px;
            margin: 32px 0;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .step.active .step-number {
            background: #2563eb;
            color: white;
        }

        .step.completed .step-number {
            background: #10b981;
            color: white;
        }

        .step.pending .step-number {
            background: #e5e7eb;
            color: #6b7280;
        }

        .step-label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .step.active .step-label {
            color: #2563eb;
        }

        .step-connector {
            width: 40px;
            height: 2px;
            background: #e5e7eb;
        }

        .step-connector.completed {
            background: #10b981;
        }

        /* Form Container */
        .form-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .form-step {
            padding: 32px;
            display: none;
        }

        .form-step.active {
            display: block;
        }

        .step-title {
            font-size: 24px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 24px;
        }

        /* Step 1 - Space Selection */
        .filters-section {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .filter-label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .filter-select, .filter-input {
            padding: 10px 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            transition: border-color 0.3s ease;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: #2563eb;
        }

        .spaces-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .space-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            background: white;
        }

        .space-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .space-card.selected {
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .space-image {
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            position: relative;
        }

        .space-status {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .space-status.available {
            background: rgba(16, 185, 129, 0.9);
            color: white;
        }

        .space-status.occupied {
            background: rgba(220, 38, 38, 0.9);
            color: white;
        }

        .space-content {
            padding: 16px;
        }

        .space-name {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 8px;
        }

        .space-details {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 12px;
            font-size: 14px;
            color: #6b7280;
        }

        .space-detail {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .space-equipment {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .equipment-tag {
            background: #f3f4f6;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            color: #6b7280;
        }

        .space-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .action-btn {
            flex: 1;
            padding: 10px 16px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
            color: #374151;
        }

        .action-btn:hover {
            border-color: #2563eb;
            color: #2563eb;
        }

        .action-btn.primary {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .action-btn.primary:hover {
            background: #1d4ed8;
        }

        /* Step 2 - Date and Time */
        .datetime-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .form-input {
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .availability-check {
            background: #f3f4f6;
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
        }

        .availability-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .availability-status.available {
            color: #10b981;
        }

        .availability-status.unavailable {
            color: #dc2626;
        }

        .recurring-options {
            margin-top: 20px;
            padding: 16px;
            background: #f9fafb;
            border-radius: 8px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        /* Step 3 - Details */
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .special-equipment {
            margin-top: 16px;
            display: none;
        }

        .special-equipment.visible {
            display: block;
        }

        /* Step 4 - Confirmation */
        .reservation-summary {
            background: #f9fafb;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .summary-title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 16px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .summary-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
        }

        .summary-label {
            font-size: 12px;
            color: #6b7280;
            text-transform: uppercase;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .summary-value {
            font-size: 16px;
            color: #111827;
            font-weight: 500;
        }

        .terms-section {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
        }

        .terms-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 12px;
        }

        .terms-text {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.5;
        }

        /* Form Navigation */
        .form-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 32px;
            background: #f9fafb;
            border-top: 1px solid #e5e7eb;
        }

        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .nav-btn.secondary {
            background: #6b7280;
            color: white;
        }

        .nav-btn.secondary:hover {
            background: #4b5563;
        }

        .nav-btn.primary {
            background: #2563eb;
            color: white;
        }

        .nav-btn.primary:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .nav-btn.success {
            background: #10b981;
            color: white;
        }

        .nav-btn.success:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        .nav-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }

        /* Error Message */
        .error-message {
            background: #fee2e2;
            color: #dc2626;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                padding: 16px;
            }

            .steps-indicator {
                gap: 16px;
            }

            .step-label {
                display: none;
            }

            .step-connector {
                width: 20px;
            }

            .datetime-grid {
                grid-template-columns: 1fr;
            }

            .spaces-grid {
                grid-template-columns: 1fr;
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo-section">
            <div class="logo">SR</div>
        </div>
        
        <div class="user-menu">
            <div class="user-avatar">
                {% if user.first_name and user.last_name %}
                    {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
                {% else %}
                    {{ user.username|first|upper }}
                {% endif %}
            </div>
            <span>
                {% if user.first_name %}
                    {{ user.first_name }}
                {% else %}
                    {{ user.username }}
                {% endif %}
            </span>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
            <a href="{% url 'dashboard' %}">Dashboard</a>
            <span>‚Ä∫</span>
            <a href="{% url 'crear_reserva' %}">Reservar</a>
            <span>‚Ä∫</span>
            <span>Nueva Reserva</span>
        </nav>

        <!-- Step Wizard -->
        <div class="step-wizard">
            <div class="wizard-header">
                <h1 class="wizard-title">Nueva Reserva</h1>
                <p class="wizard-subtitle">Completa los siguientes pasos para solicitar tu reserva</p>
            </div>

            <div class="steps-indicator">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Espacio</div>
                </div>
                <div class="step-connector"></div>
                <div class="step pending" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Fecha/Hora</div>
                </div>
                <div class="step-connector"></div>
                <div class="step pending" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Detalles</div>
                </div>
                <div class="step-connector"></div>
                <div class="step pending" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">Confirmar</div>
                </div>
            </div>
        </div>

        <!-- Error Message -->
        <div class="error-message" id="errorMessage"></div>

        <!-- Form Container -->
        <div class="form-container">
            <!-- Step 1: Space Selection -->
            <div class="form-step active" data-step="1">
                <h2 class="step-title">Selecciona un Espacio</h2>

                <!-- Filters -->
                <div class="filters-section">
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label class="filter-label">üë• Capacidad</label>
                            <select class="filter-select" id="capacityFilter">
                                <option value="">Cualquier capacidad</option>
                                <option value="1-10">1-10 personas</option>
                                <option value="11-25">11-25 personas</option>
                                <option value="26-50">26-50 personas</option>
                                <option value="50+">M√°s de 50</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label class="filter-label">üè¢ Edificio</label>
                            <select class="filter-select" id="buildingFilter">
                                <option value="">Todos los edificios</option>
                                <option value="a">Edificio A</option>
                                <option value="b">Edificio B</option>
                                <option value="c">Edificio C</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label class="filter-label">üîß Equipamiento</label>
                            <select class="filter-select" id="equipmentFilter">
                                <option value="">Sin filtro</option>
                                <option value="projector">Proyector</option>
                                <option value="wifi">WiFi</option>
                                <option value="ac">Aire Acondicionado</option>
                                <option value="whiteboard">Pizarra</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Spaces Grid -->
                <div class="spaces-grid" id="spacesGrid">
                    {% for espacio in espacios %}
                    <div class="space-card" data-space-id="{{ espacio.id }}">
                        <div class="space-image">
                            {% if espacio.tipo == 'Sala de Reuniones' %}
                                üèõÔ∏è
                            {% elif espacio.tipo == 'Auditorio' %}
                                üé≠
                            {% elif espacio.tipo == 'Laboratorio' %}
                                üî¨
                            {% elif espacio.tipo == 'Oficina' %}
                                üíº
                            {% elif espacio.tipo == 'Aula' %}
                                üè´
                            {% else %}
                                üè¢
                            {% endif %}
                            <div class="space-status available">Disponible</div>
                        </div>
                        <div class="space-content">
                            <h3 class="space-name">{{ espacio.nombre }}</h3>
                            <div class="space-location">
                                <span>üìç</span>
                                <span>
                                    {% if espacio.edificio and espacio.piso %}
                                        {{ espacio.edificio }}, Piso {{ espacio.piso }}
                                    {% elif espacio.edificio %}
                                        {{ espacio.edificio }}
                                    {% else %}
                                        Ubicaci√≥n no especificada
                                    {% endif %}
                                </span>
                            </div>
                            
                            <div class="space-details">
                                <div class="space-detail">
                                    <span>üë•</span>
                                    <span>{{ espacio.capacidad }} personas</span>
                                </div>
                                <div class="space-detail">
                                    <span>üìê</span>
                                    <span>{{ espacio.tipo }}</span>
                                </div>
                            </div>

                            {% if espacio.descripcion %}
                            <p style="color: #6b7280; font-size: 14px; margin-bottom: 12px; line-height: 1.4;">
                                {{ espacio.descripcion }}
                            </p>
                            {% endif %}

                            <div class="space-equipment">
                                {% for equipamiento in espacio.equipamientos.all %}
                                <span class="equipment-tag">{{ equipamiento.nombre_equipo }}</span>
                                {% empty %}
                                <span class="equipment-tag">Equipamiento b√°sico</span>
                                {% endfor %}
                            </div>

                            <div class="space-actions">
                                <button class="action-btn primary" onclick="selectSpace(this, {{ espacio.id }}, '{{ espacio.nombre }}')">
                                    Seleccionar
                                </button>
                                <button class="action-btn" onclick="verDetallesEspacio({{ espacio.id }})">
                                    Ver Detalles
                                </button>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="empty-state">
                        <div class="empty-state-icon">üè¢</div>
                        <h2 class="empty-state-title">No hay espacios disponibles</h2>
                        <p class="empty-state-text">
                            Actualmente no hay espacios disponibles para reservar.
                        </p>
                        <a href="{% url 'dashboard' %}" class="action-btn primary">
                            Volver al Dashboard
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Step 2: Date and Time -->
            <div class="form-step" data-step="2">
                <h2 class="step-title">Selecciona Fecha y Hora</h2>

                <div class="datetime-grid">
                    <div class="form-group">
                        <label class="form-label">üìÖ Fecha de la Reserva</label>
                        <input type="date" class="form-input" id="reservationDate" min="{{ today }}">
                    </div>

                    <div class="form-group">
                        <label class="form-label">‚è∞ Hora de Inicio</label>
                        <select class="form-input" id="startTime">
                            <option value="">Selecciona hora</option>
                            <option value="08:00">08:00</option>
                            <option value="08:30">08:30</option>
                            <option value="09:00">09:00</option>
                            <option value="09:30">09:30</option>
                            <option value="10:00">10:00</option>
                            <option value="10:30">10:30</option>
                            <option value="11:00">11:00</option>
                            <option value="11:30">11:30</option>
                            <option value="12:00">12:00</option>
                            <option value="12:30">12:30</option>
                            <option value="13:00">13:00</option>
                            <option value="13:30">13:30</option>
                            <option value="14:00">14:00</option>
                            <option value="14:30">14:30</option>
                            <option value="15:00">15:00</option>
                            <option value="15:30">15:30</option>
                            <option value="16:00">16:00</option>
                            <option value="16:30">16:30</option>
                            <option value="17:00">17:00</option>
                            <option value="17:30">17:30</option>
                            <option value="18:00">18:00</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">‚è∞ Hora de Fin</label>
                        <select class="form-input" id="endTime">
                            <option value="">Selecciona hora</option>
                            <option value="09:00">09:00</option>
                            <option value="09:30">09:30</option>
                            <option value="10:00">10:00</option>
                            <option value="10:30">10:30</option>
                            <option value="11:00">11:00</option>
                            <option value="11:30">11:30</option>
                            <option value="12:00">12:00</option>
                            <option value="12:30">12:30</option>
                            <option value="13:00">13:00</option>
                            <option value="13:30">13:30</option>
                            <option value="14:00">14:00</option>
                            <option value="14:30">14:30</option>
                            <option value="15:00">15:00</option>
                            <option value="15:30">15:30</option>
                            <option value="16:00">16:00</option>
                            <option value="16:30">16:30</option>
                            <option value="17:00">17:00</option>
                            <option value="17:30">17:30</option>
                            <option value="18:00">18:00</option>
                            <option value="18:30">18:30</option>
                            <option value="19:00">19:00</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">‚è±Ô∏è Duraci√≥n</label>
                        <input type="text" class="form-input" id="duration" readonly placeholder="Selecciona horas para calcular">
                    </div>
                </div>

                <div class="availability-check">
                    <div class="availability-status available">
                        ‚úÖ Horario disponible para el espacio seleccionado
                    </div>
                </div>

                <div class="recurring-options">
                    <div class="checkbox-group">
                        <input type="checkbox" id="recurring">
                        <label for="recurring">üîÑ Reserva recurrente</label>
                    </div>
                    <div id="recurringDetails" style="display: none;">
                        <div class="form-group" style="margin-top: 12px;">
                            <label class="form-label">Repetir cada:</label>
                            <select class="form-input">
                                <option value="weekly">Semanal</option>
                                <option value="biweekly">Cada 2 semanas</option>
                                <option value="monthly">Mensual</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Details -->
            <div class="form-step" data-step="3">
                <h2 class="step-title">Detalles de la Reserva</h2>

                <div class="form-group">
                    <label class="form-label">üìù Prop√≥sito de la Reserva *</label>
                    <textarea class="form-input form-textarea" id="purpose" placeholder="Describe brevemente el prop√≥sito de tu reserva..." required></textarea>
                </div>

                <div class="datetime-grid">
                    <div class="form-group">
                        <label class="form-label">üë• N√∫mero de Asistentes *</label>
                        <input type="number" class="form-input" id="attendees" placeholder="0" min="1" max="200" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">üìû Contacto Responsable</label>
                        <input type="tel" class="form-input" id="contact" placeholder="+56 9 1234 5678">
                    </div>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="specialEquipment">
                    <label for="specialEquipment">üîß Requiere equipos especiales</label>
                </div>

                <div class="special-equipment" id="specialEquipmentDetails">
                    <div class="form-group">
                        <label class="form-label">Detalles del equipamiento especial</label>
                        <textarea class="form-input" placeholder="Especifica qu√© equipos adicionales necesitas..."></textarea>
                    </div>
                </div>
            </div>

            <!-- Step 4: Confirmation -->
            <div class="form-step" data-step="4">
                <h2 class="step-title">Confirmar Reserva</h2>

                <div class="reservation-summary">
                    <h3 class="summary-title">Resumen de la Reserva</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <div class="summary-label">Espacio</div>
                            <div class="summary-value" id="summarySpace">-</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Fecha</div>
                            <div class="summary-value" id="summaryDate">-</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Horario</div>
                            <div class="summary-value" id="summaryTime">-</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Duraci√≥n</div>
                            <div class="summary-value" id="summaryDuration">-</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Asistentes</div>
                            <div class="summary-value" id="summaryAttendees">-</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Prop√≥sito</div>
                            <div class="summary-value" id="summaryPurpose">-</div>
                        </div>
                    </div>
                </div>

                <div class="terms-section">
                    <h4 class="terms-title">üìã T√©rminos y Condiciones</h4>
                    <div class="terms-text">
                        <p>Al enviar esta solicitud de reserva, acepto los siguientes t√©rminos:</p>
                        <ul style="margin: 12px 0 12px 20px; line-height: 1.6;">
                            <li>La reserva est√° sujeta a aprobaci√≥n por parte del administrador</li>
                            <li>Debo llegar puntualmente y utilizar el espacio responsablemente</li>
                            <li>Cualquier da√±o ser√° responsabilidad del solicitante</li>
                            <li>Las cancelaciones deben realizarse con al menos 24 horas de anticipaci√≥n</li>
                            <li>El uso del espacio debe cumplir con las pol√≠ticas institucionales</li>
                        </ul>
                    </div>
                    
                    <div class="checkbox-group" style="margin-top: 16px;">
                        <input type="checkbox" id="acceptTerms" required>
                        <label for="acceptTerms">‚úÖ Acepto los t√©rminos y condiciones *</label>
                    </div>
                </div>
            </div>

            <!-- Form Navigation -->
            <div class="form-navigation">
                <button type="button" class="nav-btn secondary" id="prevBtn" style="visibility: hidden;">‚¨ÖÔ∏è Anterior</button>
                <button type="button" class="nav-btn primary" id="nextBtn">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>
    </main>

<script>
    // Form wizard functionality
    let currentStep = 1;
    let selectedSpace = {
        id: null,
        name: null
    };
    let formData = {};

    const steps = document.querySelectorAll('.step');
    const formSteps = document.querySelectorAll('.form-step');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const errorMessage = document.getElementById('errorMessage');

    // Space selection - FUNCI√ìN CORREGIDA
    function selectSpace(button, spaceId, spaceName) {
        // Remover selecci√≥n anterior
        document.querySelectorAll('.space-card').forEach(card => {
            card.classList.remove('selected');
        });
        
        // Agregar selecci√≥n actual
        const spaceCard = button.closest('.space-card');
        spaceCard.classList.add('selected');
        
        // Guardar datos del espacio seleccionado
        selectedSpace.id = spaceId;
        selectedSpace.name = spaceName;
        
        console.log('Espacio seleccionado:', selectedSpace);
        
        // Ocultar mensaje de error si existe
        hideError();
    }

    function verDetallesEspacio(espacioId) {
        alert(`Mostrando detalles del espacio ID: ${espacioId}`);
    }

    // Date and time handling
    const startTimeSelect = document.getElementById('startTime');
    const endTimeSelect = document.getElementById('endTime');
    const durationInput = document.getElementById('duration');

    function calculateDuration() {
        const startTime = startTimeSelect.value;
        const endTime = endTimeSelect.value;

        if (startTime && endTime) {
            const start = new Date(`2024-01-01T${startTime}`);
            const end = new Date(`2024-01-01T${endTime}`);
            const diff = (end - start) / (1000 * 60); // minutes

            if (diff > 0) {
                const hours = Math.floor(diff / 60);
                const minutes = diff % 60;
                durationInput.value = `${hours}h ${minutes > 0 ? minutes + 'm' : ''}`;
            } else {
                durationInput.value = 'Horario inv√°lido';
            }
        }
    }

    startTimeSelect.addEventListener('change', calculateDuration);
    endTimeSelect.addEventListener('change', calculateDuration);

    // Recurring checkbox
    const recurringCheckbox = document.getElementById('recurring');
    const recurringDetails = document.getElementById('recurringDetails');

    recurringCheckbox.addEventListener('change', function() {
        recurringDetails.style.display = this.checked ? 'block' : 'none';
    });

    // Special equipment checkbox
    const specialEquipmentCheckbox = document.getElementById('specialEquipment');
    const specialEquipmentDetails = document.getElementById('specialEquipmentDetails');

    specialEquipmentCheckbox.addEventListener('change', function() {
        specialEquipmentDetails.classList.toggle('visible', this.checked);
    });

    // Navigation functions
    function showStep(step) {
        // Hide all steps
        steps.forEach((s, index) => {
            s.classList.remove('active', 'completed');
            if (index + 1 < step) {
                s.classList.add('completed');
            } else if (index + 1 === step) {
                s.classList.add('active');
            } else {
                s.classList.add('pending');
            }
        });

        formSteps.forEach((s, index) => {
            s.classList.toggle('active', index + 1 === step);
        });

        // Update step connectors
        const connectors = document.querySelectorAll('.step-connector');
        connectors.forEach((connector, index) => {
            connector.classList.toggle('completed', index + 1 < step);
        });

        // Update navigation buttons
        prevBtn.style.visibility = step === 1 ? 'hidden' : 'visible';
        
        if (step === 4) {
            nextBtn.textContent = '‚úÖ Enviar Solicitud';
            nextBtn.classList.remove('primary');
            nextBtn.classList.add('success');
            updateSummary();
        } else {
            nextBtn.textContent = 'Siguiente ‚û°Ô∏è';
            nextBtn.classList.remove('success');
            nextBtn.classList.add('primary');
        }
    }

    // FUNCI√ìN DE VALIDACI√ìN MEJORADA
    function validateStep(step) {
        hideError();
        
        switch(step) {
            case 1:
                if (!selectedSpace.id) {
                    showError('Por favor, selecciona un espacio disponible.');
                    return false;
                }
                return true;
                
            case 2:
                const date = document.getElementById('reservationDate').value;
                const startTime = document.getElementById('startTime').value;
                const endTime = document.getElementById('endTime').value;
                
                if (!date) {
                    showError('Por favor, selecciona una fecha para la reserva.');
                    return false;
                }
                if (!startTime) {
                    showError('Por favor, selecciona una hora de inicio.');
                    return false;
                }
                if (!endTime) {
                    showError('Por favor, selecciona una hora de fin.');
                    return false;
                }
                
                // Validar que la hora de fin sea despu√©s de la hora de inicio
                if (startTime >= endTime) {
                    showError('La hora de fin debe ser posterior a la hora de inicio.');
                    return false;
                }
                return true;
                
            case 3:
                const purpose = document.getElementById('purpose').value.trim();
                const attendees = document.getElementById('attendees').value;
                
                if (!purpose) {
                    showError('Por favor, describe el prop√≥sito de la reserva.');
                    return false;
                }
                if (purpose.length < 10) {
                    showError('El prop√≥sito debe tener al menos 10 caracteres.');
                    return false;
                }
                if (!attendees || parseInt(attendees) < 1) {
                    showError('Por favor, ingresa un n√∫mero v√°lido de asistentes.');
                    return false;
                }
                return true;
                
            case 4:
                if (!document.getElementById('acceptTerms').checked) {
                    showError('Debes aceptar los t√©rminos y condiciones para continuar.');
                    return false;
                }
                return true;
                
            default:
                return true;
        }
    }

    function showError(message) {
        errorMessage.textContent = message;
        errorMessage.style.display = 'block';
    }

    function hideError() {
        errorMessage.style.display = 'none';
    }

    function updateSummary() {
        if (currentStep === 4) {
            document.getElementById('summarySpace').textContent = selectedSpace.name || '-';
            document.getElementById('summaryDate').textContent = document.getElementById('reservationDate').value || '-';
            document.getElementById('summaryTime').textContent = 
                `${document.getElementById('startTime').value} - ${document.getElementById('endTime').value}`;
            document.getElementById('summaryDuration').textContent = document.getElementById('duration').value || '-';
            document.getElementById('summaryAttendees').textContent = document.getElementById('attendees').value || '-';
            document.getElementById('summaryPurpose').textContent = document.getElementById('purpose').value || '-';
        }
    }

    // FUNCI√ìN PARA OBTENER TOKEN CSRF
    function getCSRFToken() {
        const name = 'csrftoken';
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    // FUNCI√ìN PRINCIPAL PARA CREAR RESERVA - CORREGIDA
    // FUNCI√ìN PRINCIPAL PARA CREAR RESERVA - CORREGIDA
// FUNCI√ìN PRINCIPAL PARA CREAR RESERVA - CORREGIDA
// FUNCI√ìN PRINCIPAL PARA CREAR RESERVA - CORREGIDA
async function crearReservaReal() {
    // Validar t√©rminos
    if (!document.getElementById('acceptTerms').checked) {
        showError('Por favor, acepta los t√©rminos y condiciones para continuar.');
        return false;
    }

    // Validar que hay un espacio seleccionado
    if (!selectedSpace.id) {
        showError('Por favor, selecciona un espacio.');
        return false;
    }

    // Recopilar datos del formulario
    const reservaData = {
        espacio_id: selectedSpace.id,
        fecha_reserva: document.getElementById('reservationDate').value,
        hora_inicio: document.getElementById('startTime').value,
        hora_fin: document.getElementById('endTime').value,
        proposito: document.getElementById('purpose').value,
        num_asistentes: parseInt(document.getElementById('attendees').value)
    };

    console.log('Datos a enviar:', reservaData);

    // Validar datos requeridos
    if (!reservaData.fecha_reserva || !reservaData.hora_inicio || !reservaData.hora_fin) {
        showError('Por favor, completa la fecha y hora de la reserva.');
        return false;
    }

    if (!reservaData.proposito || reservaData.proposito.length < 10) {
        showError('Por favor, proporciona un prop√≥sito m√°s detallado (m√≠nimo 10 caracteres).');
        return false;
    }

    // Mostrar loading
    const nextBtn = document.getElementById('nextBtn');
    nextBtn.innerHTML = '‚è≥ Creando reserva...';
    nextBtn.disabled = true;

    try {
        console.log('üì§ Enviando datos al servidor...');
        
        const response = await fetch('/api/crear-reserva/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCSRFToken()
            },
            body: JSON.stringify(reservaData)
        });

        const data = await response.json();
        console.log('üì• Respuesta recibida:', data);

        if (data.success) {
            // Redirigir a la p√°gina de √©xito con el ID de la reserva
            window.location.href = data.redirect_url || `/reserva-exitosa/?reserva_id=${data.reserva_id}`;
        } else {
            console.log('‚ùå Error en la respuesta:', data.message);
            showError('Error al crear la reserva: ' + data.message);
            nextBtn.innerHTML = '‚úÖ Enviar Solicitud';
            nextBtn.disabled = false;
        }

    } catch (error) {
        console.error('‚ùå Error de conexi√≥n:', error);
        showError('Error de conexi√≥n. Intenta nuevamente.');
        nextBtn.innerHTML = '‚úÖ Enviar Solicitud';
        nextBtn.disabled = false;
    }
}

    // Event listeners
    nextBtn.addEventListener('click', function() {
        if (currentStep === 4) {
            // Llamar a la funci√≥n para crear reserva REAL
            crearReservaReal();
        } else {
            if (validateStep(currentStep)) {
                currentStep++;
                showStep(currentStep);
            }
        }
    });

    prevBtn.addEventListener('click', function() {
        if (currentStep > 1) {
            currentStep--;
            showStep(currentStep);
        }
    });

    // Initialize
    showStep(1);

    // Filters functionality
    const capacityFilter = document.getElementById('capacityFilter');
    const buildingFilter = document.getElementById('buildingFilter');
    const equipmentFilter = document.getElementById('equipmentFilter');

    function applyFilters() {
        const capacity = capacityFilter.value;
        const building = buildingFilter.value;
        const equipment = equipmentFilter.value;

        // Esta funci√≥n puede implementarse para filtrar espacios
        console.log('Aplicando filtros:', { capacity, building, equipment });
    }

    capacityFilter.addEventListener('change', applyFilters);
    buildingFilter.addEventListener('change', applyFilters);
    equipmentFilter.addEventListener('change', applyFilters);

    // Set minimum date to today
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('reservationDate').min = today;
</script>
</body>
</html>
============================================================


===== dashboard.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - INACAP</title>
</head>
<body>
    <h1>Bienvenido al Dashboard</h1>
    <p>Login exitoso! Esta es la p√°gina principal.</p>
    <a href="/logout/">Cerrar Sesi√≥n</a>
    
    <script>
        // Mostrar informaci√≥n del usuario
        const userData = sessionStorage.getItem('currentUser');
        if (userData) {
            const user = JSON.parse(userData);
            document.querySelector('h1').textContent = `Bienvenido ${user.nombre_completo}`;
            document.querySelector('p').innerHTML += `<br>Rol: ${user.rol}`;
        }
    </script>
</body>
</html>
============================================================


===== dashboard_admin.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Administrador</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #F9FAFB;
            color: #111827;
            line-height: 1.6;
        }
        
        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid #E5E7EB;
            padding: 16px 24px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 20px;
            font-weight: 700;
            color: #111827;
        }
        
        .nav-menu {
            display: flex;
            gap: 32px;
        }
        
        .nav-item {
            color: #6B7280;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        .nav-item:hover, .nav-item.active {
            color: #2563EB;
            background: #EFF6FF;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .notification-badge {
            position: relative;
            background: #F3F4F6;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .notification-badge:hover {
            background: #E5E7EB;
        }
        
        .badge-count {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #DC2626;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 600;
        }
        
        .admin-avatar {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        .admin-avatar:hover {
            background: #F3F4F6;
        }
        
        .avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
        }
        
        .page-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #111827;
        }
        
        .page-subtitle {
            color: #6B7280;
            margin-bottom: 32px;
        }
        
        /* Metrics Cards */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .metric-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .metric-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .metric-icon.pending { background: #FEF3C7; color: #F59E0B; }
        .metric-icon.success { background: #D1FAE5; color: #10B981; }
        .metric-icon.info { background: #DBEAFE; color: #2563EB; }
        .metric-icon.purple { background: #EDE9FE; color: #7C3AED; }
        
        .metric-value {
            font-size: 36px;
            font-weight: 700;
            color: #111827;
            line-height: 1;
        }
        
        .metric-label {
            color: #6B7280;
            font-size: 14px;
            font-weight: 500;
        }
        
        .metric-change {
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
            margin-top: 8px;
        }
        
        .metric-change.positive { color: #10B981; }
        .metric-change.negative { color: #DC2626; }
        
        /* Charts Section */
        .charts-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .chart-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid #E5E7EB;
        }
        
        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
        }
        
        .chart-period {
            color: #6B7280;
            font-size: 14px;
        }
        
        .chart-placeholder {
            height: 300px;
            background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2563EB;
            font-size: 48px;
        }
        
        /* Activity Section */
        .activity-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }
        
        .activity-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .activity-header {
            padding: 20px;
            border-bottom: 1px solid #E5E7EB;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .activity-title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
        }
        
        .view-all {
            color: #2563EB;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }
        
        .activity-content {
            padding: 20px;
        }
        
        /* Alerts */
        .alert-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            background: #FEF3C7;
            border-left: 4px solid #F59E0B;
            border-radius: 0 8px 8px 0;
            margin-bottom: 12px;
        }
        
        .alert-icon {
            color: #F59E0B;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .alert-content h4 {
            font-size: 14px;
            font-weight: 600;
            color: #92400E;
            margin-bottom: 4px;
        }
        
        .alert-content p {
            font-size: 13px;
            color: #78350F;
        }
        
        /* Quick Actions */
        .quick-action {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 8px;
            text-decoration: none;
            color: #374151;
            transition: all 0.2s;
            margin-bottom: 8px;
        }
        
        .quick-action:hover {
            background: #F3F4F6;
            color: #2563EB;
        }
        
        .action-icon {
            width: 32px;
            height: 32px;
            background: #EFF6FF;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2563EB;
        }
        
        .action-text {
            font-weight: 500;
        }
        
        /* Recent Activity */
        .activity-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #F3F4F6;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-avatar {
            width: 32px;
            height: 32px;
            background: #E5E7EB;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        .activity-details {
            flex: 1;
        }
        
        .activity-description {
            font-size: 14px;
            color: #374151;
            margin-bottom: 2px;
        }
        
        .activity-time {
            font-size: 12px;
            color: #9CA3AF;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                üè¢ Panel Administrativo
            </div>
            
            <nav class="nav-menu">
                <a href="#" class="nav-item active">Dashboard</a>
                <a href="#" class="nav-item">Solicitudes</a>
                <a href="#" class="nav-item">Espacios</a>
                <a href="#" class="nav-item">Usuarios</a>
                <a href="#" class="nav-item">Reportes</a>
            </nav>
            
            <div class="header-right">
                <div class="notification-badge">
                    üîî
                    <span class="badge-count">5</span>
                </div>
                
                <div class="admin-avatar">
                    <div class="avatar">
                        {% if user.first_name and user.last_name %}
                            {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
                        {% else %}
                            {{ user.username|first|upper }}
                        {% endif %}
                    </div>
                    <span>
                        {% if user.first_name %}
                            {{ user.first_name }}
                        {% else %}
                            {{ user.username }}
                        {% endif %}
                    </span>
                    <a href="{% url 'logout' %}" style="margin-left: 10px; color: #666; text-decoration: none;">üö™</a>
                </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-title">üìä Dashboard Administrativo</div>
        <div class="page-subtitle">
            Bienvenido, 
            {% if user.first_name %}
                {{ user.first_name }} {{ user.last_name }}
            {% else %}
                {{ user.username }}
            {% endif %}
            - Vista general del sistema de reservas
        </div>

        <!-- Metrics Cards -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-header">
                    <div>
                        <div class="metric-value">8</div>
                        <div class="metric-label">Solicitudes Pendientes</div>
                        <div class="metric-change positive">
                            ‚¨ÜÔ∏è +2 desde ayer
                        </div>
                    </div>
                    <div class="metric-icon pending">‚è∞</div>
                </div>
            </div>
            
            <div class="metric-card">
                <div class="metric-header">
                    <div>
                        <div class="metric-value">15</div>
                        <div class="metric-label">Reservas Hoy</div>
                        <div class="metric-change positive">
                            ‚¨ÜÔ∏è +3 desde ayer
                        </div>
                    </div>
                    <div class="metric-icon success">üìÖ</div>
                </div>
            </div>
            
            <div class="metric-card">
                <div class="metric-header">
                    <div>
                        <div class="metric-value">78%</div>
                        <div class="metric-label">Ocupaci√≥n Promedio</div>
                        <div class="metric-change positive">
                            ‚¨ÜÔ∏è +5% esta semana
                        </div>
                    </div>
                    <div class="metric-icon info">üìä</div>
                </div>
            </div>
            
            <div class="metric-card">
                <div class="metric-header">
                    <div>
                        <div class="metric-value">342</div>
                        <div class="metric-label">Usuarios Activos</div>
                        <div class="metric-change positive">
                            ‚¨ÜÔ∏è +12 este mes
                        </div>
                    </div>
                    <div class="metric-icon purple">üë•</div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-grid">
            <div class="chart-card">
                <div class="chart-header">
                    <div class="chart-title">üìä Ocupaci√≥n por Espacio</div>
                    <div class="chart-period">√öltimos 7 d√≠as</div>
                </div>
                <div class="chart-placeholder">üìä</div>
            </div>
            
            <div class="chart-card">
                <div class="chart-header">
                    <div class="chart-title">üîÑ Estados de Solicitudes</div>
                    <div class="chart-period">Este mes</div>
                </div>
                <div class="chart-placeholder" style="height: 200px;">ü•ß</div>
                <div style="margin-top: 16px; font-size: 14px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #10B981;">‚úÖ Aprobadas: 156</span>
                        <span>68%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #F59E0B;">‚è∞ Pendientes: 45</span>
                        <span>20%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #DC2626;">‚ùå Rechazadas: 28</span>
                        <span>12%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Section -->
        <div class="activity-section">
            <!-- Alerts -->
            <div class="activity-card">
                <div class="activity-header">
                    <div class="activity-title">üö® Alertas y Notificaciones</div>
                    <a href="#" class="view-all">Ver todas</a>
                </div>
                <div class="activity-content">
                    <div class="alert-item">
                        <div class="alert-icon">‚ö†Ô∏è</div>
                        <div class="alert-content">
                            <h4>Conflicto de Reserva</h4>
                            <p>Sala A1 tiene reservas superpuestas el 20/03</p>
                        </div>
                    </div>
                    
                    <div class="alert-item">
                        <div class="alert-icon">üîß</div>
                        <div class="alert-content">
                            <h4>Equipo Fuera de Servicio</h4>
                            <p>Proyector en Sala B2 requiere mantenimiento</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4 style="margin-bottom: 12px; color: #374151;">‚ö° Acciones R√°pidas</h4>
                        
                        <a href="#" class="quick-action">
                            <div class="action-icon">üìã</div>
                            <div class="action-text">Revisar solicitudes pendientes</div>
                        </a>
                        
                        <a href="#" class="quick-action">
                            <div class="action-icon">üìù</div>
                            <div class="action-text">Registrar incidencia</div>
                        </a>
                        
                        <a href="#" class="quick-action">
                            <div class="action-icon">üìä</div>
                            <div class="action-text">Generar reporte</div>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="activity-card">
                <div class="activity-header">
                    <div class="activity-title">‚è±Ô∏è Actividad Reciente</div>
                    <a href="#" class="view-all">Ver completa</a>
                </div>
                <div class="activity-content">
                    <div class="activity-item">
                        <div class="activity-avatar">AM</div>
                        <div class="activity-details">
                            <div class="activity-description">Aprob√≥ solicitud de Sala A1</div>
                            <div class="activity-time">Hace 15 minutos</div>
                        </div>
                    </div>
                    
                    <div class="activity-item">
                        <div class="activity-avatar">JM</div>
                        <div class="activity-details">
                            <div class="activity-description">Rechaz√≥ solicitud de Sala B3</div>
                            <div class="activity-time">Hace 32 minutos</div>
                        </div>
                    </div>
                    
                    <div class="activity-item">
                        <div class="activity-avatar">SY</div>
                        <div class="activity-details">
                            <div class="activity-description">Cre√≥ nuevo espacio: Sala C4</div>
                            <div class="activity-time">Hace 1 hora</div>
                        </div>
                    </div>
                    
                    <div class="activity-item">
                        <div class="activity-avatar">AG</div>
                        <div class="activity-details">
                            <div class="activity-description">Cancel√≥ reserva en Auditorio</div>
                            <div class="activity-time">Hace 2 horas</div>
                        </div>
                    </div>
                    
                    <div class="activity-item">
                        <div class="activity-avatar">RM</div>
                        <div class="activity-details">
                            <div class="activity-description">Actualiz√≥ equipamiento Sala A2</div>
                            <div class="activity-time">Hace 3 horas</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>
</html>
============================================================


===== dashboard_usuario.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Sistema de Reservas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f9fafb;
            color: #111827;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0 24px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: #2563eb;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav-menu {
            display: flex;
            gap: 32px;
        }

        .nav-item {
            color: #6b7280;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-item:hover, .nav-item.active {
            background: #2563eb;
            color: white;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            padding: 24px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: #6b7280;
            font-size: 16px;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border-left: 4px solid;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-card.green {
            border-left-color: #10b981;
        }

        .stat-card.blue {
            border-left-color: #3b82f6;
        }

        .stat-card.orange {
            border-left-color: #f59e0b;
        }

        .stat-card.purple {
            border-left-color: #8b5cf6;
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .stat-title {
            color: #6b7280;
            font-size: 14px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .stat-card.green .stat-icon {
            background: #d1fae5;
            color: #10b981;
        }

        .stat-card.blue .stat-icon {
            background: #dbeafe;
            color: #3b82f6;
        }

        .stat-card.orange .stat-icon {
            background: #fef3c7;
            color: #f59e0b;
        }

        .stat-card.purple .stat-icon {
            background: #ede9fe;
            color: #8b5cf6;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
            line-height: 1;
        }

        .stat-change {
            font-size: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stat-change.positive {
            color: #10b981;
        }

        .stat-change.negative {
            color: #ef4444;
        }

        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
        }

        .main-section, .sidebar-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
        }

        .view-all-btn {
            color: #2563eb;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .view-all-btn:hover {
            text-decoration: underline;
        }

        /* Reservations Table */
        .reservations-table {
            width: 100%;
            border-collapse: collapse;
        }

        .reservations-table th,
        .reservations-table td {
            text-align: left;
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .reservations-table th {
            font-weight: 600;
            color: #6b7280;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .reservations-table td {
            color: #111827;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-badge.approved {
            background: #d1fae5;
            color: #065f46;
        }

        .status-badge.pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-badge.rejected {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .action-btn {
            width: 100%;
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .action-btn.primary {
            background: #10b981;
            color: white;
        }

        .action-btn.primary:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        .action-btn.secondary {
            background: #2563eb;
            color: white;
        }

        .action-btn.secondary:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        /* Recent Activity */
        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            background: #f3f4f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-size: 14px;
            color: #374151;
            margin-bottom: 4px;
            line-height: 1.4;
        }

        .activity-time {
            font-size: 12px;
            color: #9ca3af;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #6b7280;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .empty-state-text {
            font-size: 14px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 0 16px;
            }

            .nav-menu {
                display: none;
            }

            .main-content {
                padding: 16px;
            }

            .content-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }

            .quick-actions {
                flex-direction: row;
            }

            .action-btn {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo-section">
            <div class="logo">SR</div>
            <div style="font-weight: 600; color: #111827;">Sistema de Reservas</div>
        </div>
        
        <nav class="nav-menu">
            <a href="{% url 'dashboard' %}" class="nav-item active">Dashboard</a>
            <a href="{% url 'crear_reserva' %}" class="nav-item">Reservar</a>
            <a href="{% url 'reservas' %}" class="nav-item">Historial</a>
            <a href="{% url 'calendario' %}" class="nav-item">Calendario</a>
            <a href="{% url 'espacios' %}" class="nav-item">Espacios</a>
            <a href="{% url 'notificaciones' %}" class="nav-item">Notificaciones</a>
        </nav>
        
        <div class="user-menu">
            <div class="user-avatar">
                {% if user.first_name and user.last_name %}
                    {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
                {% else %}
                    {{ user.username|first|upper }}
                {% endif %}
            </div>
            <span>
                {% if user.first_name %}
                    {{ user.first_name }} {{ user.last_name }}
                {% else %}
                    {{ user.username }}
                {% endif %}
            </span>
            <a href="{% url 'logout' %}" style="margin-left: 10px; color: #666; text-decoration: none;">üö™</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">Dashboard</h1>
            <p class="page-subtitle">
                Bienvenido de vuelta, 
                {% if user.first_name %}
                    {{ user.first_name }}
                {% else %}
                    {{ user.username }}
                {% endif %}. 
                Aqu√≠ tienes un resumen de tus reservas.
            </p>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card green">
                <div class="stat-header">
                    <div class="stat-title">Reservas Activas</div>
                    <div class="stat-icon">üìÖ</div>
                </div>
                <div class="stat-value">{{ reservas_activas }}</div>
                <div class="stat-change positive">‚úÖ Activas este mes</div>
            </div>

            <div class="stat-card orange">
                <div class="stat-header">
                    <div class="stat-title">Reservas Pendientes</div>
                    <div class="stat-icon">‚è∞</div>
                </div>
                <div class="stat-value">{{ reservas_pendientes }}</div>
                <div class="stat-change positive">üîÑ En espera de aprobaci√≥n</div>
            </div>

            <div class="stat-card blue">
                <div class="stat-header">
                    <div class="stat-title">Reservas Totales</div>
                    <div class="stat-icon">üìä</div>
                </div>
                <div class="stat-value">{{ total_reservas }}</div>
                <div class="stat-change positive">üìà Historial completo</div>
            </div>

            <div class="stat-card purple">
                <div class="stat-header">
                    <div class="stat-title">Espacios Favoritos</div>
                    <div class="stat-icon">‚ù§Ô∏è</div>
                </div>
                <div class="stat-value">3</div>
                <div class="stat-change positive">‚≠ê M√°s utilizados</div>
            </div>
        </div>

        <!-- Content Grid -->
        <div class="content-grid">
            <!-- Main Section - Pr√≥ximas Reservas -->
            <div class="main-section">
                <div class="section-header">
                    <h2 class="section-title">Pr√≥ximas Reservas</h2>
                    <a href="{% url 'reservas' %}" class="view-all-btn">Ver todas</a>
                </div>
                
                {% if reservas_recientes %}
                <table class="reservations-table">
                    <thead>
                        <tr>
                            <th>Espacio</th>
                            <th>Fecha</th>
                            <th>Hora</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for reserva in reservas_recientes %}
                        <tr>
                            <td>{{ reserva.espacio.nombre }}</td>
                            <td>{{ reserva.fecha_reserva|date:"d M Y" }}</td>
                            <td>{{ reserva.hora_inicio|time:"H:i" }} - {{ reserva.hora_fin|time:"H:i" }}</td>
                            <td>
                                <span class="status-badge {{ reserva.estado|lower }}">
                                    {{ reserva.estado }}
                                </span>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <div class="empty-state">
                    <div class="empty-state-icon">üìã</div>
                    <h3 class="empty-state-title">No hay reservas recientes</h3>
                    <p class="empty-state-text">Crea tu primera reserva para comenzar</p>
                    <a href="{% url 'crear_reserva' %}" class="action-btn primary" style="margin-top: 16px;">
                        Crear Reserva
                    </a>
                </div>
                {% endif %}
            </div>

            <!-- Sidebar -->
            <div class="sidebar-section">
                <!-- Quick Actions -->
                <div class="section-header">
                    <h2 class="section-title">Acciones R√°pidas</h2>
                </div>
                <div class="quick-actions">
                    <a href="{% url 'crear_reserva' %}" class="action-btn primary">
                        <span>‚ûï</span>
                        Nueva Reserva
                    </a>
                    <a href="{% url 'calendario' %}" class="action-btn secondary">
                        <span>üìÖ</span>
                        Ver Calendario
                    </a>
                </div>

                <!-- Recent Activity -->
                <div style="margin-top: 24px;">
                    <div class="section-header">
                        <h2 class="section-title">Actividad Reciente</h2>
                    </div>
                    <div class="activity-list">
                        {% if reservas_recientes %}
                            {% for reserva in reservas_recientes|slice:":3" %}
                            <div class="activity-item">
                                <div class="activity-icon">
                                    {% if reserva.estado == 'Aprobada' %}
                                        ‚úÖ
                                    {% elif reserva.estado == 'Pendiente' %}
                                        ‚è∞
                                    {% else %}
                                        üìã
                                    {% endif %}
                                </div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        Reserva {{ reserva.estado|lower }} para {{ reserva.espacio.nombre }}
                                    </div>
                                    <div class="activity-time">
                                        {{ reserva.fecha_solicitud|timesince }} ago
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <div class="activity-item">
                                <div class="activity-icon">üëã</div>
                                <div class="activity-content">
                                    <div class="activity-text">
                                        Bienvenido al sistema de reservas
                                    </div>
                                    <div class="activity-time">
                                        Comienza creando tu primera reserva
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Simple animations
        document.addEventListener('DOMContentLoaded', function() {
            // Add hover effects to stat cards
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
        });
    </script>
</body>
</html>
============================================================


===== detalle_reserva.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle de Reserva - Sistema de Reservas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #F9FAFB;
            color: #111827;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        .header {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .status-badge {
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-approved { background: #D1FAE5; color: #065F46; }
        .status-pending { background: #FEF3C7; color: #92400E; }
        .status-rejected { background: #FEE2E2; color: #991B1B; }
        .status-cancelled { background: #F3F4F6; color: #6B7280; }
        
        .reservation-id {
            font-size: 18px;
            font-weight: 600;
            color: #374151;
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .btn-danger { background: #DC2626; color: white; }
        .btn-primary { background: #2563EB; color: white; }
        .btn-secondary { background: #6B7280; color: white; }
        .btn-success { background: #10B981; color: white; }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .card h3 {
            font-size: 18px;
            margin-bottom: 20px;
            color: #111827;
            border-bottom: 2px solid #E5E7EB;
            padding-bottom: 8px;
        }
        
        .space-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
        }
        
        .space-info h4 {
            font-size: 20px;
            margin-bottom: 8px;
            color: #111827;
        }
        
        .space-description {
            color: #6B7280;
            margin-bottom: 16px;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px 0;
        }
        
        .info-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            color: #6B7280;
        }
        
        .info-label {
            font-weight: 600;
            color: #374151;
            min-width: 120px;
        }
        
        .info-value {
            color: #6B7280;
        }
        
        /* Timeline */
        .timeline-card {
            grid-column: 1 / -1;
        }
        
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #E5E7EB;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 24px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -35px;
            top: 6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: white;
            border: 3px solid #2563EB;
        }
        
        .timeline-item.completed::before {
            background: #10B981;
            border-color: #10B981;
        }
        
        .timeline-content {
            background: #F9FAFB;
            padding: 16px;
            border-radius: 8px;
            border-left: 4px solid #2563EB;
        }
        
        .timeline-content.completed {
            border-left-color: #10B981;
        }
        
        .timeline-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .timeline-date {
            color: #6B7280;
            font-size: 14px;
        }
        
        /* Observaciones */
        .observations {
            background: #FEF9E7;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #F59E0B;
            margin-top: 16px;
        }
        
        .observations h4 {
            color: #92400E;
            margin-bottom: 8px;
        }
        
        .observations p {
            color: #78350F;
        }
        
        .notes-section {
            margin-top: 16px;
        }
        
        .notes-section textarea {
            width: 100%;
            min-height: 80px;
            padding: 12px;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }
        
        .save-notes {
            margin-top: 8px;
        }
        
        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }

        /* Modal de confirmaci√≥n */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            display: none;
        }

        .alert-success {
            background: #D1FAE5;
            color: #065F46;
            border: 1px solid #A7F3D0;
        }

        .alert-error {
            background: #FEE2E2;
            color: #991B1B;
            border: 1px solid #FECACA;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Alertas -->
        <div class="alert alert-success" id="successAlert"></div>
        <div class="alert alert-error" id="errorAlert"></div>

        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <div class="status-badge" id="statusBadge">CARGANDO...</div>
                <div class="reservation-id">ID: <span id="reservationId">RES-{{ reserva.id }}</span></div>
            </div>
            <div class="action-buttons">
                <button class="btn btn-danger" onclick="cancelarReserva()" id="cancelBtn">‚ùå Cancelar Reserva</button>
                <button class="btn btn-success" onclick="duplicarReserva()" id="duplicateBtn">üìã Duplicar</button>
                <button class="btn btn-secondary" onclick="imprimirReserva()" id="printBtn">üñ®Ô∏è Imprimir</button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Informaci√≥n del Espacio -->
            <div class="card">
                <h3>üìç Informaci√≥n del Espacio</h3>
                <div class="space-image">
                    {% if reserva.espacio.tipo == 'Sala de Reuniones' %}
                        üèõÔ∏è
                    {% elif reserva.espacio.tipo == 'Auditorio' %}
                        üé≠
                    {% elif reserva.espacio.tipo == 'Laboratorio' %}
                        üî¨
                    {% elif reserva.espacio.tipo == 'Oficina' %}
                        üíº
                    {% elif reserva.espacio.tipo == 'Aula' %}
                        üè´
                    {% else %}
                        üè¢
                    {% endif %}
                </div>
                <div class="space-info">
                    <h4 id="spaceName">{{ reserva.espacio.nombre }}</h4>
                    <p class="space-description" id="spaceDescription">
                        {{ reserva.espacio.descripcion|default:"Espacio disponible para reuniones y eventos." }}
                    </p>
                    
                    <div class="info-item">
                        <div class="info-icon">üìç</div>
                        <div class="info-label">Ubicaci√≥n:</div>
                        <div class="info-value" id="spaceLocation">
                            {% if reserva.espacio.edificio and reserva.espacio.piso %}
                                {{ reserva.espacio.edificio }}, Piso {{ reserva.espacio.piso }}
                            {% elif reserva.espacio.edificio %}
                                {{ reserva.espacio.edificio }}
                            {% else %}
                                Edificio Principal
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">üë•</div>
                        <div class="info-label">Capacidad:</div>
                        <div class="info-value" id="spaceCapacity">{{ reserva.espacio.capacidad }} personas</div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">‚öôÔ∏è</div>
                        <div class="info-label">Equipamiento:</div>
                        <div class="info-value" id="spaceEquipment">
                            {% if reserva.espacio.equipamientos.all %}
                                {% for equipamiento in reserva.espacio.equipamientos.all %}
                                    {{ equipamiento.nombre_equipo }}{% if not forloop.last %}, {% endif %}
                                {% endfor %}
                            {% else %}
                                Equipamiento b√°sico
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Informaci√≥n Temporal y Detalles -->
            <div class="card">
                <h3>‚è∞ Detalles de la Reserva</h3>
                
                <div style="margin-bottom: 24px;">
                    <h4 style="color: #374151; margin-bottom: 12px;">Informaci√≥n Temporal</h4>
                    <div class="info-item">
                        <div class="info-icon">üìÖ</div>
                        <div class="info-label">Fecha:</div>
                        <div class="info-value" id="reservationDate">
                            {{ reserva.fecha_reserva|date:"l, d F Y" }}
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">üïê</div>
                        <div class="info-label">Hora:</div>
                        <div class="info-value" id="reservationTime">
                            {{ reserva.hora_inicio|time:"H:i" }} - {{ reserva.hora_fin|time:"H:i" }}
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">‚è±Ô∏è</div>
                        <div class="info-label">Duraci√≥n:</div>
                        <div class="info-value" id="reservationDuration">
                            {{ reserva_data.duracion }}
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 style="color: #374151; margin-bottom: 12px;">Detalles Adicionales</h4>
                    <div class="info-item">
                        <div class="info-icon">üéØ</div>
                        <div class="info-label">Prop√≥sito:</div>
                        <div class="info-value" id="reservationPurpose">{{ reserva.proposito }}</div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">üë•</div>
                        <div class="info-label">Asistentes:</div>
                        <div class="info-value" id="reservationAttendees">{{ reserva.num_asistentes }} personas</div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">üë§</div>
                        <div class="info-label">Solicitante:</div>
                        <div class="info-value" id="reservationUser">
                            {{ user.get_full_name|default:user.username }}<br>
                            <small style="color: #9CA3AF;">{{ user.email }}<br>Usuario registrado</small>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">üìù</div>
                        <div class="info-label">Fecha solicitud:</div>
                        <div class="info-value" id="requestDate">
                            {{ reserva.fecha_solicitud|date:"d F, H:i" }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timeline de Estados -->
        <div class="card timeline-card">
            <h3>üìä Timeline de Estados</h3>
            <div class="timeline">
                <div class="timeline-item completed">
                    <div class="timeline-content completed">
                        <div class="timeline-title">‚úÖ Solicitud Enviada</div>
                        <div class="timeline-date">{{ reserva.fecha_solicitud|date:"d F, H:i" }}</div>
                    </div>
                </div>
                
                {% if reserva.estado != 'Pendiente' %}
                <div class="timeline-item completed">
                    <div class="timeline-content completed">
                        <div class="timeline-title">
                            {% if reserva.estado == 'Aprobada' %}
                                ‚úÖ Aprobada
                            {% elif reserva.estado == 'Rechazada' %}
                                ‚ùå Rechazada
                            {% elif reserva.estado == 'Cancelada' %}
                                üö´ Cancelada
                            {% endif %}
                        </div>
                        <div class="timeline-date">
                            {% if reserva.id_aprobador %}
                                Por: {{ reserva.id_aprobador.get_full_name|default:reserva.id_aprobador.username }}
                            {% else %}
                                Procesada por el sistema
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
            
            <!-- Observaciones -->
            {% if reserva.comentario_admin %}
            <div class="observations">
                <h4>üí¨ Comentarios del Administrador</h4>
                <p id="adminComments">{{ reserva.comentario_admin }}</p>
            </div>
            {% endif %}
            
            <div class="notes-section">
                <h4 style="margin-bottom: 8px;">üìù Notas del Usuario</h4>
                <textarea placeholder="Agregar notas personales sobre esta reserva..." id="userNotes"></textarea>
                <div class="save-notes">
                    <button class="btn btn-primary btn-small" onclick="guardarNotas()">üíæ Guardar Notas</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmaci√≥n -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content">
            <h3 id="modalTitle">Confirmar Acci√≥n</h3>
            <p id="modalMessage">¬øEst√°s seguro de que deseas realizar esta acci√≥n?</p>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="cerrarModal()">Cancelar</button>
                <button class="btn btn-primary" id="confirmActionBtn">Confirmar</button>
            </div>
        </div>
    </div>

    <script>
        // Datos de la reserva desde Django
        const reservaData = {
            id: {{ reserva.id }},
            estado: "{{ reserva.estado|lower }}",
            espacio: {
                id: {{ reserva.espacio.id }},
                nombre: "{{ reserva.espacio.nombre }}",
                tipo: "{{ reserva.espacio.tipo }}"
            }
        };

        // Inicializar la p√°gina con los datos
        document.addEventListener('DOMContentLoaded', function() {
            actualizarEstadoBotones();
            cargarNotasGuardadas();
        });

        function actualizarEstadoBotones() {
            const cancelBtn = document.getElementById('cancelBtn');
            const duplicateBtn = document.getElementById('duplicateBtn');
            const statusBadge = document.getElementById('statusBadge');

            // Actualizar badge de estado
            statusBadge.className = 'status-badge ';
            switch(reservaData.estado) {
                case 'aprobada':
                    statusBadge.classList.add('status-approved');
                    statusBadge.textContent = 'APROBADA';
                    break;
                case 'pendiente':
                    statusBadge.classList.add('status-pending');
                    statusBadge.textContent = 'PENDIENTE';
                    break;
                case 'rechazada':
                    statusBadge.classList.add('status-rejected');
                    statusBadge.textContent = 'RECHAZADA';
                    cancelBtn.disabled = true;
                    cancelBtn.textContent = '‚ùå Reserva Rechazada';
                    break;
                case 'cancelada':
                    statusBadge.classList.add('status-cancelled');
                    statusBadge.textContent = 'CANCELADA';
                    cancelBtn.disabled = true;
                    cancelBtn.textContent = '‚ùå Reserva Cancelada';
                    duplicateBtn.disabled = true;
                    break;
            }

            // Deshabilitar cancelaci√≥n si no est√° pendiente o aprobada
            if (reservaData.estado !== 'pendiente' && reservaData.estado !== 'aprobada') {
                cancelBtn.disabled = true;
            }
        }

        // Funci√≥n para obtener el token CSRF
        function getCSRFToken() {
            const name = 'csrftoken';
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        // Funci√≥n para mostrar alertas
        function mostrarAlerta(mensaje, tipo = 'success') {
            const alert = document.getElementById(tipo === 'success' ? 'successAlert' : 'errorAlert');
            alert.textContent = mensaje;
            alert.style.display = 'block';
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000);
        }

        // Funci√≥n para mostrar modal de confirmaci√≥n
        function mostrarModal(titulo, mensaje, callback) {
            document.getElementById('modalTitle').textContent = titulo;
            document.getElementById('modalMessage').textContent = mensaje;
            
            const confirmBtn = document.getElementById('confirmActionBtn');
            confirmBtn.onclick = callback;
            
            document.getElementById('confirmationModal').style.display = 'flex';
        }

        function cerrarModal() {
            document.getElementById('confirmationModal').style.display = 'none';
        }

        // Funci√≥n para cancelar reserva
        function cancelarReserva() {
            if (reservaData.estado === 'cancelada') {
                mostrarAlerta('Esta reserva ya est√° cancelada.', 'error');
                return;
            }

            if (reservaData.estado === 'rechazada') {
                mostrarAlerta('No se puede cancelar una reserva rechazada.', 'error');
                return;
            }

            mostrarModal(
                'Cancelar Reserva',
                '¬øEst√°s seguro de que deseas cancelar esta reserva? Esta acci√≥n no se puede deshacer.',
                function() {
                    realizarCancelacion();
                }
            );
        }

        async function realizarCancelacion() {
            try {
                // Mostrar loading
                document.body.classList.add('loading');
                const cancelBtn = document.getElementById('cancelBtn');
                const originalText = cancelBtn.innerHTML;
                cancelBtn.innerHTML = '‚è≥ Cancelando...';
                cancelBtn.disabled = true;

                // Llamar a la API de cancelaci√≥n CORRECTA
                const response = await fetch(`/api/reservas/${reservaData.id}/cancelar/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCSRFToken()
                    }
                });

                const data = await response.json();

                if (data.success) {
                    // Actualizar estado local
                    reservaData.estado = 'cancelada';
                    actualizarEstadoBotones();
                    
                    mostrarAlerta('‚úÖ Reserva cancelada exitosamente');
                    cerrarModal();
                    
                    // Recargar la p√°gina despu√©s de 2 segundos para mostrar cambios
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000);
                } else {
                    throw new Error(data.error || 'Error al cancelar la reserva');
                }
            } catch (error) {
                console.error('Error:', error);
                mostrarAlerta('‚ùå Error al cancelar la reserva: ' + error.message, 'error');
                
                // Restaurar bot√≥n
                const cancelBtn = document.getElementById('cancelBtn');
                cancelBtn.innerHTML = originalText;
                cancelBtn.disabled = false;
            } finally {
                document.body.classList.remove('loading');
                cerrarModal();
            }
        }

        // Funci√≥n para duplicar reserva
        function duplicarReserva() {
            if (reservaData.estado === 'cancelada') {
                mostrarAlerta('No se puede duplicar una reserva cancelada.', 'error');
                return;
            }

            // Redirigir a la p√°gina de crear reserva con los datos prellenados
            const params = new URLSearchParams({
                espacio_id: reservaData.espacio.id,
                duplicar: reservaData.id
            });
            
            window.location.href = `/crear-reserva/?${params}`;
        }

        // Funci√≥n para imprimir reserva
        function imprimirReserva() {
            // Abrir ventana de impresi√≥n con los datos actuales
            const ventanaImpresion = window.open('', '_blank');
            const contenido = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Comprobante de Reserva - RES-${reservaData.id}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.4; }
                        .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 20px; }
                        .section { margin-bottom: 20px; }
                        .section h3 { color: #333; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
                        .info-item { display: flex; margin-bottom: 8px; }
                        .info-label { font-weight: bold; min-width: 150px; }
                        .status { padding: 5px 10px; border-radius: 10px; font-weight: bold; text-align: center; display: inline-block; }
                        .approved { background: #d1fae5; color: #065f46; }
                        .pending { background: #fef3c7; color: #92400e; }
                        .rejected { background: #fee2e2; color: #991b1b; }
                        .cancelled { background: #f3f4f6; color: #6b7280; }
                        @media print {
                            body { margin: 10px; }
                            .no-print { display: none; }
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Comprobante de Reserva</h1>
                        <p><strong>ID:</strong> RES-${reservaData.id}</p>
                        <div class="status ${reservaData.estado}">
                            ${reservaData.estado.toUpperCase()}
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Informaci√≥n del Espacio</h3>
                        <div class="info-item">
                            <span class="info-label">Espacio:</span>
                            <span>${document.getElementById('spaceName').textContent}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Ubicaci√≥n:</span>
                            <span>${document.getElementById('spaceLocation').textContent}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Capacidad:</span>
                            <span>${document.getElementById('spaceCapacity').textContent}</span>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Detalles de la Reserva</h3>
                        <div class="info-item">
                            <span class="info-label">Fecha:</span>
                            <span>${document.getElementById('reservationDate').textContent}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Horario:</span>
                            <span>${document.getElementById('reservationTime').textContent}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Duraci√≥n:</span>
                            <span>${document.getElementById('reservationDuration').textContent}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Asistentes:</span>
                            <span>${document.getElementById('reservationAttendees').textContent}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Prop√≥sito:</span>
                            <span>${document.getElementById('reservationPurpose').textContent}</span>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Informaci√≥n del Solicitante</h3>
                        <div class="info-item">
                            <span class="info-label">Nombre:</span>
                            <span>${document.getElementById('reservationUser').textContent.split('\\n')[0]}</span>
                        </div>
                    </div>
                    
                    <div class="section no-print">
                        <p><em>Documento generado el ${new Date().toLocaleDateString('es-CL')}</em></p>
                    </div>
                </body>
                </html>
            `;
            
            ventanaImpresion.document.write(contenido);
            ventanaImpresion.document.close();
            ventanaImpresion.focus();
            ventanaImpresion.print();
        }

        // Funci√≥n para guardar notas
        function guardarNotas() {
            const notas = document.getElementById('userNotes').value;
            // Guardar en localStorage
            localStorage.setItem(`notas_reserva_${reservaData.id}`, notas);
            mostrarAlerta('‚úÖ Notas guardadas correctamente');
        }

        // Cargar notas guardadas
        function cargarNotasGuardadas() {
            const notasGuardadas = localStorage.getItem(`notas_reserva_${reservaData.id}`);
            if (notasGuardadas) {
                document.getElementById('userNotes').value = notasGuardadas;
            }
        }

        // Cerrar modal al hacer clic fuera
        document.getElementById('confirmationModal').addEventListener('click', function(e) {
            if (e.target === this) {
                cerrarModal();
            }
        });

        // Cerrar modal con ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                cerrarModal();
            }
        });
    </script>
</body>
</html>
============================================================


===== espacios.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espacios Disponibles - Sistema de Reservas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f9fafb;
            color: #111827;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0 24px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: #2563eb;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav-menu {
            display: flex;
            gap: 32px;
        }

        .nav-item {
            color: #6b7280;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-item:hover, .nav-item.active {
            background: #2563eb;
            color: white;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            padding: 24px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: #6b7280;
            font-size: 16px;
        }

        /* Spaces Grid */
        .spaces-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 24px;
        }

        .space-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .space-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .space-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            position: relative;
        }

        .space-status {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .space-status.available {
            background: #10b981;
            color: white;
        }

        .space-status.maintenance {
            background: #f59e0b;
            color: white;
        }

        .space-status.unavailable {
            background: #ef4444;
            color: white;
        }

        .space-content {
            padding: 20px;
        }

        .space-name {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 8px;
        }

        .space-location {
            color: #6b7280;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .space-details {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .space-detail {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #6b7280;
            font-size: 14px;
        }

        .space-equipment {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .equipment-tag {
            background: #f3f4f6;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            color: #6b7280;
        }

        .space-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            flex: 1;
            padding: 10px 16px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
            color: #374151;
        }

        .action-btn:hover {
            border-color: #2563eb;
            color: #2563eb;
        }

        .action-btn.primary {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .action-btn.primary:hover {
            background: #1d4ed8;
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .action-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 8px;
        }

        .empty-state-text {
            color: #6b7280;
            margin-bottom: 24px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                padding: 16px;
            }

            .spaces-grid {
                grid-template-columns: 1fr;
            }

            .space-details {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .space-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo-section">
            <div class="logo">SR</div>
        </div>
        
        <nav class="nav-menu">
            <a href="{% url 'dashboard' %}" class="nav-item">Dashboard</a>
            <a href="{% url 'crear_reserva' %}" class="nav-item">Reservar</a>
            <a href="{% url 'reservas' %}" class="nav-item">Historial</a>
            <a href="{% url 'calendario' %}" class="nav-item">Calendario</a>
            <a href="{% url 'espacios' %}" class="nav-item active">Espacios</a>
            <a href="{% url 'notificaciones' %}" class="nav-item">Notificaciones</a>
        </nav>

        <div class="user-menu">
            <div class="user-avatar">
                {% if user.first_name and user.last_name %}
                    {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
                {% else %}
                    {{ user.username|first|upper }}
                {% endif %}
            </div>
            <span>
                {% if user.first_name %}
                    {{ user.first_name }}
                {% else %}
                    {{ user.username }}
                {% endif %}
            </span>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">üè¢ Espacios Disponibles</h1>
            <p class="page-subtitle">Explora y conoce todos los espacios disponibles para reservar</p>
        </div>

        <!-- Spaces Grid -->
        <div class="spaces-grid">
            {% for espacio in espacios %}
            <div class="space-card">
                <div class="space-image">
                    {% if espacio.tipo == 'Sala de Reuniones' %}
                        üèõÔ∏è
                    {% elif espacio.tipo == 'Auditorio' %}
                        üé≠
                    {% elif espacio.tipo == 'Laboratorio' %}
                        üî¨
                    {% elif espacio.tipo == 'Oficina' %}
                        üíº
                    {% elif espacio.tipo == 'Aula' %}
                        üè´
                    {% else %}
                        üè¢
                    {% endif %}
                    <div class="space-status available">Disponible</div>
                </div>
                <div class="space-content">
                    <h3 class="space-name">{{ espacio.nombre }}</h3>
                    <div class="space-location">
                        <span>üìç</span>
                        <span>
                            {% if espacio.edificio and espacio.piso %}
                                {{ espacio.edificio }}, Piso {{ espacio.piso }}
                            {% elif espacio.edificio %}
                                {{ espacio.edificio }}
                            {% else %}
                                Ubicaci√≥n no especificada
                            {% endif %}
                        </span>
                    </div>
                    
                    <div class="space-details">
                        <div class="space-detail">
                            <span>üë•</span>
                            <span>{{ espacio.capacidad }} personas</span>
                        </div>
                        <div class="space-detail">
                            <span>üìê</span>
                            <span>{{ espacio.tipo }}</span>
                        </div>
                    </div>

                    {% if espacio.descripcion %}
                    <p style="color: #6b7280; font-size: 14px; margin-bottom: 12px; line-height: 1.4;">
                        {{ espacio.descripcion }}
                    </p>
                    {% endif %}

                    <div class="space-equipment">
                        {% for equipamiento in espacio.equipamientos.all %}
                        <span class="equipment-tag">{{ equipamiento.nombre_equipo }}</span>
                        {% empty %}
                        <span class="equipment-tag">Equipamiento b√°sico</span>
                        {% endfor %}
                    </div>

                    <div class="space-actions">
                        <a href="{% url 'crear_reserva' %}?espacio_id={{ espacio.id }}" class="action-btn primary">
                            Reservar
                        </a>
                        <button class="action-btn" onclick="verDetallesEspacio({{ espacio.id }})">
                            Ver Detalles
                        </button>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="empty-state">
                <div class="empty-state-icon">üè¢</div>
                <h2 class="empty-state-title">No hay espacios disponibles</h2>
                <p class="empty-state-text">
                    Actualmente no hay espacios disponibles para reservar.
                </p>
                <a href="{% url 'dashboard' %}" class="action-btn primary">
                    Volver al Dashboard
                </a>
            </div>
            {% endfor %}
        </div>
    </main>

    <script>
        function verDetallesEspacio(espacioId) {
            alert(`Mostrando detalles del espacio ID: ${espacioId}`);
            // En una implementaci√≥n real, esto abrir√≠a un modal o redirigir√≠a a una p√°gina de detalles
        }

        // Agregar funcionalidad de b√∫squeda si es necesario
        document.addEventListener('DOMContentLoaded', function() {
            console.log('P√°gina de espacios cargada correctamente');
        });
    </script>
</body>
</html>
============================================================


===== gestion_espacios.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Espacios</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #F9FAFB;
            color: #111827;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
        }
        
        /* Header */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }
        
        .page-title-section h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #111827;
        }
        
        .page-subtitle {
            color: #6B7280;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .btn-primary { background: #2563EB; color: white; }
        .btn-success { background: #10B981; color: white; }
        .btn-secondary { background: #6B7280; color: white; }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        /* View Toggle */
        .view-controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .view-toggle {
            display: flex;
            background: #F3F4F6;
            border-radius: 8px;
            padding: 4px;
        }
        
        .view-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .view-btn.active {
            background: white;
            color: #2563EB;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .filters {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        
        .filter-select {
            padding: 8px 12px;
            border: 1px solid #D1D5DB;
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }
        
        /* Grid View */
        .spaces-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 24px;
        }
        
        .space-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: all 0.2s;
        }
        
        .space-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .space-image {
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            position: relative;
        }
        
        .space-status {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-available { background: #D1FAE5; color: #065F46; }
        .status-maintenance { background: #FEF3C7; color: #92400E; }
        .status-unavailable { background: #FEE2E2; color: #991B1B; }
        
        .space-content {
            padding: 20px;
        }
        
        .space-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }
        
        .space-name {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 4px;
        }
        
        .space-location {
            font-size: 14px;
            color: #6B7280;
        }
        
        .space-menu {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #6B7280;
            padding: 4px;
        }
        
        .space-info {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            color: #6B7280;
        }
        
        .equipment-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 16px;
        }
        
        .equipment-tag {
            background: #F3F4F6;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            color: #6B7280;
        }
        
        .occupancy-bar {
            margin-bottom: 16px;
        }
        
        .occupancy-label {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #6B7280;
            margin-bottom: 4px;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #E5E7EB;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #10B981;
            transition: width 0.3s ease;
        }
        
        .space-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }
        
        /* List View */
        .spaces-list {
            display: none;
        }
        
        .spaces-list.active {
            display: block;
        }
        
        .list-table {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th {
            background: #F9FAFB;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
            color: #6B7280;
            text-transform: uppercase;
            border-bottom: 1px solid #E5E7EB;
        }
        
        .table td {
            padding: 16px;
            border-bottom: 1px solid #F3F4F6;
            vertical-align: middle;
        }
        
        .table tbody tr:hover {
            background: #F9FAFB;
        }
        
        .space-cell {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .space-thumb {
            width: 60px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }
        
        .space-details h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .space-details p {
            font-size: 12px;
            color: #6B7280;
        }
        
        /* Side Panel */
        .side-panel {
            position: fixed;
            top: 0;
            right: -500px;
            width: 500px;
            height: 100vh;
            background: white;
            box-shadow: -4px 0 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }
        
        .side-panel.open {
            right: 0;
        }
        
        .panel-header {
            padding: 24px;
            border-bottom: 1px solid #E5E7EB;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .panel-title {
            font-size: 20px;
            font-weight: 700;
            color: #111827;
        }
        
        .panel-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #6B7280;
        }
        
        .panel-content {
            padding: 24px;
        }
        
        .image-gallery {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .gallery-image {
            aspect-ratio: 16/10;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        
        .gallery-image:first-child {
            grid-column: 1 / -1;
            font-size: 48px;
        }
        
        .detail-section {
            margin-bottom: 24px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #374151;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .detail-item {
            background: #F9FAFB;
            padding: 12px;
            border-radius: 8px;
        }
        
        .detail-label {
            font-size: 12px;
            color: #6B7280;
            margin-bottom: 4px;
        }
        
        .detail-value {
            font-weight: 600;
            color: #111827;
        }
        
        .equipment-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .equipment-item {
            background: #EFF6FF;
            color: #2563EB;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .mini-calendar {
            background: #F9FAFB;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="page-header">
            <div class="page-title-section">
                <h1>üè¢ Gesti√≥n de Espacios</h1>
                <p class="page-subtitle">Administra los espacios disponibles para reserva</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-success">‚ûï Nuevo Espacio</button>
            </div>
        </div>

        <!-- View Controls -->
        <div class="view-controls">
            <div class="view-toggle">
                <button class="view-btn active" onclick="switchView('grid')">üî≤ Grid</button>
                <button class="view-btn" onclick="switchView('list')">üìã Lista</button>
            </div>
            
            <div class="filters">
                <select class="filter-select">
                    <option>Todos los edificios</option>
                    <option>Edificio Principal</option>
                    <option>Edificio Norte</option>
                    <option>Edificio Sur</option>
                </select>
                
                <select class="filter-select">
                    <option>Todos los tipos</option>
                    <option>Sala de Conferencias</option>
                    <option>Auditorio</option>
                    <option>Sala de Juntas</option>
                    <option>Espacio Colaborativo</option>
                </select>
                
                <select class="filter-select">
                    <option>Cualquier capacidad</option>
                    <option>1-10 personas</option>
                    <option>11-25 personas</option>
                    <option>26-50 personas</option>
                    <option>50+ personas</option>
                </select>
                
                <select class="filter-select">
                    <option>Todos los estados</option>
                    <option>Disponible</option>
                    <option>Mantenimiento</option>
                    <option>Fuera de servicio</option>
                </select>
            </div>
        </div>

        <!-- Grid View -->
        <div class="spaces-grid" id="gridView">
            <div class="space-card">
                <div class="space-image">
                    üè¢
                    <div class="space-status status-available">Disponible</div>
                </div>
                <div class="space-content">
                    <div class="space-header">
                        <div>
                            <div class="space-name">Sala de Conferencias A1</div>
                            <div class="space-location">Edificio Principal, Piso 2</div>
                        </div>
                        <button class="space-menu" onclick="openSpacePanel('A1')">‚ãØ</button>
                    </div>
                    
                    <div class="space-info">
                        <div class="info-item">
                            <span>üë•</span>
                            <span>20 personas</span>
                        </div>
                        <div class="info-item">
                            <span>üìê</span>
                            <span>45 m¬≤</span>
                        </div>
                    </div>
                    
                    <div class="equipment-tags">
                        <span class="equipment-tag">üì∫ Proyector</span>
                        <span class="equipment-tag">üé§ Audio</span>
                        <span class="equipment-tag">üì∂ WiFi</span>
                        <span class="equipment-tag">‚ùÑÔ∏è AC</span>
                    </div>
                    
                    <div class="occupancy-bar">
                        <div class="occupancy-label">
                            <span>Ocupaci√≥n del d√≠a</span>
                            <span>75%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                    </div>
                    
                    <div class="space-actions">
                        <button class="btn btn-primary btn-small">‚úèÔ∏è Editar</button>
                        <button class="btn btn-secondary btn-small">üìä Ver Ocupaci√≥n</button>
                    </div>
                </div>
            </div>
            
            <div class="space-card">
                <div class="space-image">
                    üé≠
                    <div class="space-status status-available">Disponible</div>
                </div>
                <div class="space-content">
                    <div class="space-header">
                        <div>
                            <div class="space-name">Auditorio Principal</div>
                            <div class="space-location">Edificio Principal, Piso 1</div>
                        </div>
                        <button class="space-menu" onclick="openSpacePanel('Auditorio')">‚ãØ</button>
                    </div>
                    
                    <div class="space-info">
                        <div class="info-item">
                            <span>üë•</span>
                            <span>150 personas</span>
                        </div>
                        <div class="info-item">
                            <span>üìê</span>
                            <span>200 m¬≤</span>
                        </div>
                    </div>
                    
                    <div class="equipment-tags">
                        <span class="equipment-tag">üì∫ Proyector 4K</span>
                        <span class="equipment-tag">üé§ Sistema Audio</span>
                        <span class="equipment-tag">üé¨ Escenario</span>
                        <span class="equipment-tag">üí° Iluminaci√≥n</span>
                    </div>
                    
                    <div class="occupancy-bar">
                        <div class="occupancy-label">
                            <span>Ocupaci√≥n del d√≠a</span>
                            <span>45%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 45%"></div>
                        </div>
                    </div>
                    
                    <div class="space-actions">
                        <button class="btn btn-primary btn-small">‚úèÔ∏è Editar</button>
                        <button class="btn btn-secondary btn-small">üìä Ver Ocupaci√≥n</button>
                    </div>
                </div>
            </div>
            
            <div class="space-card">
                <div class="space-image">
                    üíº
                    <div class="space-status status-maintenance">Mantenimiento</div>
                </div>
                <div class="space-content">
                    <div class="space-header">
                        <div>
                            <div class="space-name">Sala de Juntas B2</div>
                            <div class="space-location">Edificio Norte, Piso 1</div>
                        </div>
                        <button class="space-menu" onclick="openSpacePanel('B2')">‚ãØ</button>
                    </div>
                    
                    <div class="space-info">
                        <div class="info-item">
                            <span>üë•</span>
                            <span>12 personas</span>
                        </div>
                        <div class="info-item">
                            <span>üìê</span>
                            <span>25 m¬≤</span>
                        </div>
                    </div>
                    
                    <div class="equipment-tags">
                        <span class="equipment-tag">üì∫ TV 55"</span>
                        <span class="equipment-tag">üì∂ WiFi</span>
                        <span class="equipment-tag">‚òï Coffee Station</span>
                    </div>
                    
                    <div class="occupancy-bar">
                        <div class="occupancy-label">
                            <span>Ocupaci√≥n del d√≠a</span>
                            <span>0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="space-actions">
                        <button class="btn btn-primary btn-small">‚úèÔ∏è Editar</button>
                        <button class="btn btn-secondary btn-small">üîß Programar Mantenimiento</button>
                    </div>
                </div>
            </div>
            
            <div class="space-card">
                <div class="space-image">
                    ü§ù
                    <div class="space-status status-available">Disponible</div>
                </div>
                <div class="space-content">
                    <div class="space-header">
                        <div>
                            <div class="space-name">Espacio Colaborativo C1</div>
                            <div class="space-location">Edificio Sur, Piso 3</div>
                        </div>
                        <button class="space-menu" onclick="openSpacePanel('C1')">‚ãØ</button>
                    </div>
                    
                    <div class="space-info">
                        <div class="info-item">
                            <span>üë•</span>
                            <span>8 personas</span>
                        </div>
                        <div class="info-item">
                            <span>üìê</span>
                            <span>30 m¬≤</span>
                        </div>
                    </div>
                    
                    <div class="equipment-tags">
                        <span class="equipment-tag">üìù Pizarra</span>
                        <span class="equipment-tag">üì∂ WiFi</span>
                        <span class="equipment-tag">ü™ë Mobiliario Flexible</span>
                    </div>
                    
                    <div class="occupancy-bar">
                        <div class="occupancy-label">
                            <span>Ocupaci√≥n del d√≠a</span>
                            <span>60%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 60%"></div>
                        </div>
                    </div>
                    
                    <div class="space-actions">
                        <button class="btn btn-primary btn-small">‚úèÔ∏è Editar</button>
                        <button class="btn btn-secondary btn-small">üìä Ver Ocupaci√≥n</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- List View -->
        <div class="spaces-list" id="listView">
            <div class="list-table">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Espacio</th>
                            <th>Ubicaci√≥n</th>
                            <th>Capacidad</th>
                            <th>Equipamiento</th>
                            <th>Estado</th>
                            <th>Ocupaci√≥n Mensual</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="space-cell">
                                    <div class="space-thumb">üè¢</div>
                                    <div class="space-details">
                                        <h4>Sala de Conferencias A1</h4>
                                        <p>45 m¬≤ ‚Ä¢ Tipo: Conferencias</p>
                                    </div>
                                </div>
                            </td>
                            <td>Edificio Principal, Piso 2</td>
                            <td>20 personas</td>
                            <td>Proyector, Audio, WiFi, AC</td>
                            <td><span class="space-status status-available">Disponible</span></td>
                            <td>
                                <div class="progress-bar" style="width: 100px;">
                                    <div class="progress-fill" style="width: 85%"></div>
                                </div>
                                <small style="color: #6B7280;">85%</small>
                            </td>
                            <td>
                                <div style="display: flex; gap: 4px;">
                                    <button class="btn btn-primary btn-small">‚úèÔ∏è</button>
                                    <button class="btn btn-secondary btn-small">üëÅÔ∏è</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="space-cell">
                                    <div class="space-thumb">üé≠</div>
                                    <div class="space-details">
                                        <h4>Auditorio Principal</h4>
                                        <p>200 m¬≤ ‚Ä¢ Tipo: Auditorio</p>
                                    </div>
                                </div>
                            </td>
                            <td>Edificio Principal, Piso 1</td>
                            <td>150 personas</td>
                            <td>Proyector 4K, Audio, Escenario</td>
                            <td><span class="space-status status-available">Disponible</span></td>
                            <td>
                                <div class="progress-bar" style="width: 100px;">
                                    <div class="progress-fill" style="width: 65%"></div>
                                </div>
                                <small style="color: #6B7280;">65%</small>
                            </td>
                            <td>
                                <div style="display: flex; gap: 4px;">
                                    <button class="btn btn-primary btn-small">‚úèÔ∏è</button>
                                    <button class="btn btn-secondary btn-small">üëÅÔ∏è</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="space-cell">
                                    <div class="space-thumb">üíº</div>
                                    <div class="space-details">
                                        <h4>Sala de Juntas B2</h4>
                                        <p>25 m¬≤ ‚Ä¢ Tipo: Juntas</p>
                                    </div>
                                </div>
                            </td>
                            <td>Edificio Norte, Piso 1</td>
                            <td>12 personas</td>
                            <td>TV 55", WiFi, Coffee Station</td>
                            <td><span class="space-status status-maintenance">Mantenimiento</span></td>
                            <td>
                                <div class="progress-bar" style="width: 100px;">
                                    <div class="progress-fill" style="width: 0%"></div>
                                </div>
                                <small style="color: #6B7280;">0%</small>
                            </td>
                            <td>
                                <div style="display: flex; gap: 4px;">
                                    <button class="btn btn-primary btn-small">‚úèÔ∏è</button>
                                    <button class="btn btn-secondary btn-small">üîß</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay" onclick="closeSpacePanel()"></div>

    <!-- Side Panel -->
    <div class="side-panel" id="spacePanel">
        <div class="panel-header">
            <h2 class="panel-title">üè¢ Detalles del Espacio</h2>
            <button class="panel-close" onclick="closeSpacePanel()">‚úñÔ∏è</button>
        </div>
        
        <div class="panel-content">
            <!-- Image Gallery -->
            <div class="image-gallery">
                <div class="gallery-image">üè¢</div>
                <div class="gallery-image">üì∏</div>
                <div class="gallery-image">üì∏</div>
            </div>
            
            <!-- Basic Information -->
            <div class="detail-section">
                <h3 class="section-title">üìã Informaci√≥n B√°sica</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Nombre</div>
                        <div class="detail-value">Sala de Conferencias A1</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Tipo</div>
                        <div class="detail-value">Sala de Conferencias</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Capacidad</div>
                        <div class="detail-value">20 personas</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">√Årea</div>
                        <div class="detail-value">45 m¬≤</div>
                    </div>
                </div>
                
                <div style="margin-bottom: 16px;">
                    <div class="detail-label">Descripci√≥n</div>
                    <p style="color: #6B7280; line-height: 1.5;">
                        Sala equipada con proyector 4K, sistema de audio profesional y capacidad para videoconferencias. Ideal para presentaciones ejecutivas y reuniones importantes.
                    </p>
                </div>
            </div>
            
            <!-- Equipment -->
            <div class="detail-section">
                <h3 class="section-title">‚öôÔ∏è Equipamiento</h3>
                <div class="equipment-list">
                    <div class="equipment-item">üì∫ Proyector 4K</div>
                    <div class="equipment-item">üé§ Sistema de Audio</div>
                    <div class="equipment-item">üì∂ WiFi de Alta Velocidad</div>
                    <div class="equipment-item">‚ùÑÔ∏è Aire Acondicionado</div>
                    <div class="equipment-item">üí° Iluminaci√≥n LED</div>
                    <div class="equipment-item">üìπ C√°mara para Videoconferencia</div>
                    <div class="equipment-item">üñ•Ô∏è Pantalla T√°ctil</div>
                    <div class="equipment-item">üîå Enchufes en Mesa</div>
                </div>
            </div>
            
            <!-- Schedule -->
            <div class="detail-section">
                <h3 class="section-title">üïê Horarios Disponibles</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Lunes a Viernes</div>
                        <div class="detail-value">07:00 - 22:00</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Fines de Semana</div>
                        <div class="detail-value">09:00 - 18:00</div>
                    </div>
                </div>
            </div>
            
            <!-- Occupancy Calendar -->
            <div class="detail-section">
                <h3 class="section-title">üìÖ Calendario de Ocupaci√≥n</h3>
                <div class="mini-calendar">
                    <div style="text-align: center; margin-bottom: 12px; font-weight: 600;">
                        Marzo 2025
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; text-align: center; font-size: 12px;">
                        <div style="font-weight: 600; color: #6B7280;">L</div>
                        <div style="font-weight: 600; color: #6B7280;">M</div>
                        <div style="font-weight: 600; color: #6B7280;">X</div>
                        <div style="font-weight: 600; color: #6B7280;">J</div>
                        <div style="font-weight: 600; color: #6B7280;">V</div>
                        <div style="font-weight: 600; color: #6B7280;">S</div>
                        <div style="font-weight: 600; color: #6B7280;">D</div>
                        <div></div><div></div><div></div><div></div><div></div>
                        <div style="padding: 4px; background: #D1FAE5; border-radius: 4px;">1</div>
                        <div style="padding: 4px;">2</div>
                        <div style="padding: 4px; background: #FEE2E2; border-radius: 4px;">3</div>
                        <div style="padding: 4px; background: #D1FAE5; border-radius: 4px;">4</div>
                        <div style="padding: 4px;">5</div>
                        <div style="padding: 4px; background: #FEF3C7; border-radius: 4px;">6</div>
                        <div style="padding: 4px;">7</div>
                        <div style="padding: 4px;">8</div>
                        <div style="padding: 4px;">9</div>
                        <div style="padding: 4px; background: #D1FAE5; border-radius: 4px;">10</div>
                        <div style="padding: 4px; background: #D1FAE5; border-radius: 4px;">11</div>
                        <div style="padding: 4px; background: #FEE2E2; border-radius: 4px;">12</div>
                        <div style="padding: 4px;">13</div>
                        <div style="padding: 4px;">14</div>
                        <div style="padding: 4px; background: #2563EB; color: white; border-radius: 4px;">15</div>
                    </div>
                    <div style="margin-top: 12px; font-size: 11px; color: #6B7280;">
                        <div>üü¢ Disponible ‚Ä¢ üü° Parcial ‚Ä¢ üî¥ Ocupado ‚Ä¢ üîµ Hoy</div>
                    </div>
                </div>
            </div>
            
            <!-- Maintenance History -->
            <div class="detail-section">
                <h3 class="section-title">üîß Historial de Mantenimiento</h3>
                <div style="space-y: 8px;">
                    <div style="padding: 12px; border: 1px solid #E5E7EB; border-radius: 8px; margin-bottom: 8px;">
                        <div style="font-weight: 600; font-size: 14px;">Mantenimiento Proyector</div>
                        <div style="font-size: 12px; color: #6B7280;">05 Mar 2025 - Limpieza y calibraci√≥n</div>
                    </div>
                    <div style="padding: 12px; border: 1px solid #E5E7EB; border-radius: 8px; margin-bottom: 8px;">
                        <div style="font-weight: 600; font-size: 14px;">Revisi√≥n Sistema Audio</div>
                        <div style="font-size: 12px; color: #6B7280;">28 Feb 2025 - Actualizaci√≥n de software</div>
                    </div>
                    <div style="padding: 12px; border: 1px solid #E5E7EB; border-radius: 8px;">
                        <div style="font-weight: 600; font-size: 14px;">Mantenimiento General</div>
                        <div style="font-size: 12px; color: #6B7280;">15 Feb 2025 - Limpieza profunda y revisi√≥n equipos</div>
                    </div>
                </div>
            </div>
            
            <!-- Actions -->
            <div style="margin-top: 32px; display: flex; flex-direction: column; gap: 12px;">
                <button class="btn btn-primary" style="width: 100%;">‚úèÔ∏è Editar Espacio</button>
                <button class="btn btn-secondary" style="width: 100%;">üìä Ver Reportes</button>
                <button class="btn btn-secondary" style="width: 100%;">üîß Programar Mantenimiento</button>
                <button class="btn btn-secondary" style="width: 100%;">üìÖ Ver Calendario Completo</button>
            </div>
        </div>
    </div>

    <script>
        function switchView(viewType) {
            const gridView = document.getElementById('gridView');
            const listView = document.getElementById('listView');
            const gridBtn = document.querySelector('.view-btn');
            const listBtn = document.querySelectorAll('.view-btn')[1];
            
            if (viewType === 'grid') {
                gridView.style.display = 'grid';
                listView.classList.remove('active');
                gridBtn.classList.add('active');
                listBtn.classList.remove('active');
            } else {
                gridView.style.display = 'none';
                listView.classList.add('active');
                gridBtn.classList.remove('active');
                listBtn.classList.add('active');
            }
        }
        
        function openSpacePanel(spaceName) {
            document.getElementById('overlay').classList.add('active');
            document.getElementById('spacePanel').classList.add('open');
            document.body.style.overflow = 'hidden';
        }
        
        function closeSpacePanel() {
            document.getElementById('overlay').classList.remove('active');
            document.getElementById('spacePanel').classList.remove('open');
            document.body.style.overflow = 'auto';
        }
        
        // Close panel with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeSpacePanel();
            }
        });
    </script>
</body>
</html>
============================================================


===== gestion_usuarios.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Usuarios</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #F9FAFB;
            color: #111827;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
        }
        
        /* Header */
        .page-header {
            margin-bottom: 32px;
        }
        
        .page-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #111827;
        }
        
        .page-subtitle {
            color: #6B7280;
            margin-bottom: 24px;
        }
        
        /* Toolbar */
        .toolbar {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 24px;
        }
        
        .toolbar-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .search-section {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .search-input {
            flex: 1;
            max-width: 400px;
            padding: 12px 16px;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #2563EB;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .btn-primary { background: #2563EB; color: white; }
        .btn-success { background: #10B981; color: white; }
        .btn-secondary { background: #6B7280; color: white; }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        /* Filters */
        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .filter-label {
            font-weight: 600;
            font-size: 12px;
            color: #374151;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .filter-select {
            padding: 8px 12px;
            border: 1px solid #D1D5DB;
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }
        
        /* Table */
        .table-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .table-header {
            padding: 20px;
            border-bottom: 1px solid #E5E7EB;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .table-title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
        }
        
        .table-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th {
            background: #F9FAFB;
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
            color: #6B7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid #E5E7EB;
        }
        
        .table td {
            padding: 16px;
            border-bottom: 1px solid #F3F4F6;
            vertical-align: middle;
        }
        
        .table tbody tr:hover {
            background: #F9FAFB;
        }
        
        /* User Cell */
        .user-cell {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }
        
        .user-info h4 {
            font-size: 14px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 2px;
        }
        
        .user-info p {
            font-size: 12px;
            color: #6B7280;
        }
        
        /* Badges */
        .badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge-admin { background: #FEE2E2; color: #991B1B; }
        .badge-user { background: #DBEAFE; color: #1E40AF; }
        .badge-super { background: #EDE9FE; color: #6B21A8; }
        
        /* Status Toggle */
        .status-toggle {
            position: relative;
            width: 44px;
            height: 24px;
            background: #E5E7EB;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .status-toggle.active {
            background: #10B981;
        }
        
        .status-toggle::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: all 0.2s;
        }
        
        .status-toggle.active::after {
            transform: translateX(20px);
        }
        
        /* Action Buttons */
        .action-btns {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            padding: 6px 8px;
            border: none;
            background: #F3F4F6;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: #E5E7EB;
        }
        
        .action-btn.edit:hover { background: #DBEAFE; color: #2563EB; }
        .action-btn.view:hover { background: #D1FAE5; color: #10B981; }
        .action-btn.suspend:hover { background: #FEF3C7; color: #F59E0B; }
        .action-btn.delete:hover { background: #FEE2E2; color: #DC2626; }
        
        /* Side Panel */
        .side-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -4px 0 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }
        
        .side-panel.open {
            right: 0;
        }
        
        .panel-header {
            padding: 24px;
            border-bottom: 1px solid #E5E7EB;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .panel-title {
            font-size: 20px;
            font-weight: 700;
            color: #111827;
        }
        
        .panel-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #6B7280;
        }
        
        .panel-content {
            padding: 24px;
        }
        
        .user-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .stat-card {
            background: #F9FAFB;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #111827;
        }
        
        .stat-label {
            font-size: 12px;
            color: #6B7280;
            margin-top: 4px;
        }
        
        .recent-reservations {
            margin-top: 24px;
        }
        
        .reservation-item {
            padding: 12px;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            margin-bottom: 8px;
        }
        
        .reservation-date {
            font-size: 12px;
            color: #6B7280;
        }
        
        .reservation-space {
            font-weight: 600;
            color: #111827;
        }
        
        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="page-header">
            <h1 class="page-title">üë• Gesti√≥n de Usuarios</h1>
            <p class="page-subtitle">Administra usuarios, roles y permisos del sistema</p>
        </div>

        <!-- Toolbar -->
        <div class="toolbar">
            <div class="toolbar-top">
                <div class="search-section">
                    <input type="text" class="search-input" placeholder="üîç Buscar usuarios por nombre, email o departamento...">
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-success">‚ûï Nuevo Usuario</button>
                    <button class="btn btn-primary">üì§ Importar Usuarios</button>
                    <button class="btn btn-secondary">üì• Exportar Lista</button>
                </div>
            </div>
            
            <div class="filters">
                <div class="filter-group">
                    <label class="filter-label">Estado</label>
                    <select class="filter-select">
                        <option>Todos los estados</option>
                        <option>Activo</option>
                        <option>Inactivo</option>
                        <option>Suspendido</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Rol</label>
                    <select class="filter-select">
                        <option>Todos los roles</option>
                        <option>Usuario</option>
                        <option>Administrador</option>
                        <option>Super Admin</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Departamento</label>
                    <select class="filter-select">
                        <option>Todos los departamentos</option>
                        <option>Tecnolog√≠a</option>
                        <option>Marketing</option>
                        <option>Recursos Humanos</option>
                        <option>Finanzas</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Fecha Registro</label>
                    <select class="filter-select">
                        <option>Cualquier fecha</option>
                        <option>√öltimo mes</option>
                        <option>√öltimos 3 meses</option>
                        <option>Este a√±o</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Table -->
        <div class="table-container">
            <div class="table-header">
                <div class="table-title">üë• Lista de Usuarios (342)</div>
                <div class="table-actions">
                    <button class="btn btn-secondary btn-small">üìã Acciones masivas</button>
                    <button class="btn btn-primary btn-small">‚öôÔ∏è Configurar columnas</button>
                </div>
            </div>
            
            <table class="table">
                <thead>
                    <tr>
                        <th><input type="checkbox"></th>
                        <th>Usuario</th>
                        <th>Email</th>
                        <th>Departamento</th>
                        <th>Rol</th>
                        <th>Estado</th>
                        <th>√öltima Conexi√≥n</th>
                        <th>Total Reservas</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>
                            <div class="user-cell">
                                <div class="user-avatar">AG</div>
                                <div class="user-info">
                                    <h4>Ana Garc√≠a</h4>
                                    <p>ID: USR-001</p>
                                </div>
                            </div>
                        </td>
                        <td>ana.garcia@empresa.com</td>
                        <td>Tecnolog√≠a</td>
                        <td><span class="badge badge-admin">Administrador</span></td>
                        <td>
                            <div class="status-toggle active" onclick="toggleStatus(this)"></div>
                        </td>
                        <td>Hace 2 horas</td>
                        <td>45</td>
                        <td>
                            <div class="action-btns">
                                <button class="action-btn edit" onclick="openUserPanel('Ana Garc√≠a')" title="Editar">‚úèÔ∏è</button>
                                <button class="action-btn view" title="Ver historial">üìã</button>
                                <button class="action-btn suspend" title="Suspender">üîí</button>
                                <button class="action-btn delete" title="Eliminar">üóëÔ∏è</button>
                            </div>
                        </td>
                    </tr>
                    
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>
                            <div class="user-cell">
                                <div class="user-avatar">LM</div>
                                <div class="user-info">
                                    <h4>Luis Mart√≠nez</h4>
                                    <p>ID: USR-002</p>
                                </div>
                            </div>
                        </td>
                        <td>luis.martinez@empresa.com</td>
                        <td>Marketing</td>
                        <td><span class="badge badge-user">Usuario</span></td>
                        <td>
                            <div class="status-toggle active" onclick="toggleStatus(this)"></div>
                        </td>
                        <td>Hace 1 d√≠a</td>
                        <td>23</td>
                        <td>
                            <div class="action-btns">
                                <button class="action-btn edit" onclick="openUserPanel('Luis Mart√≠nez')" title="Editar">‚úèÔ∏è</button>
                                <button class="action-btn view" title="Ver historial">üìã</button>
                                <button class="action-btn suspend" title="Suspender">üîí</button>
                                <button class="action-btn delete" title="Eliminar">üóëÔ∏è</button>
                            </div>
                        </td>
                    </tr>
                    
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>
                            <div class="user-cell">
                                <div class="user-avatar">MR</div>
                                <div class="user-info">
                                    <h4>Mar√≠a Rodr√≠guez</h4>
                                    <p>ID: USR-003</p>
                                </div>
                            </div>
                        </td>
                        <td>maria.rodriguez@empresa.com</td>
                        <td>Recursos Humanos</td>
                        <td><span class="badge badge-super">Super Admin</span></td>
                        <td>
                            <div class="status-toggle active" onclick="toggleStatus(this)"></div>
                        </td>
                        <td>Online ahora</td>
                        <td>67</td>
                        <td>
                            <div class="action-btns">
                                <button class="action-btn edit" onclick="openUserPanel('Mar√≠a Rodr√≠guez')" title="Editar">‚úèÔ∏è</button>
                                <button class="action-btn view" title="Ver historial">üìã</button>
                                <button class="action-btn suspend" title="Suspender">üîí</button>
                                <button class="action-btn delete" title="Eliminar">üóëÔ∏è</button>
                            </div>
                        </td>
                    </tr>
                    
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>
                            <div class="user-cell">
                                <div class="user-avatar">CL</div>
                                <div class="user-info">
                                    <h4>Carlos L√≥pez</h4>
                                    <p>ID: USR-004</p>
                                </div>
                            </div>
                        </td>
                        <td>carlos.lopez@empresa.com</td>
                        <td>Finanzas</td>
                        <td><span class="badge badge-user">Usuario</span></td>
                        <td>
                            <div class="status-toggle" onclick="toggleStatus(this)"></div>
                        </td>
                        <td>Hace 1 semana</td>
                        <td>12</td>
                        <td>
                            <div class="action-btns">
                                <button class="action-btn edit" onclick="openUserPanel('Carlos L√≥pez')" title="Editar">‚úèÔ∏è</button>
                                <button class="action-btn view" title="Ver historial">üìã</button>
                                <button class="action-btn suspend" title="Suspender">üîí</button>
                                <button class="action-btn delete" title="Eliminar">üóëÔ∏è</button>
                            </div>
                        </td>
                    </tr>
                    
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>
                            <div class="user-cell">
                                <div class="user-avatar">SP</div>
                                <div class="user-info">
                                    <h4>Sofia P√©rez</h4>
                                    <p>ID: USR-005</p>
                                </div>
                            </div>
                        </td>
                        <td>sofia.perez@empresa.com</td>
                        <td>Tecnolog√≠a</td>
                        <td><span class="badge badge-user">Usuario</span></td>
                        <td>
                            <div class="status-toggle active" onclick="toggleStatus(this)"></div>
                        </td>
                        <td>Hace 3 horas</td>
                        <td>31</td>
                        <td>
                            <div class="action-btns">
                                <button class="action-btn edit" onclick="openUserPanel('Sofia P√©rez')" title="Editar">‚úèÔ∏è</button>
                                <button class="action-btn view" title="Ver historial">üìã</button>
                                <button class="action-btn suspend" title="Suspender">üîí</button>
                                <button class="action-btn delete" title="Eliminar">üóëÔ∏è</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay" onclick="closeUserPanel()"></div>

    <!-- Side Panel -->
    <div class="side-panel" id="userPanel">
        <div class="panel-header">
            <h2 class="panel-title">üë§ Detalles del Usuario</h2>
            <button class="panel-close" onclick="closeUserPanel()">‚úñÔ∏è</button>
        </div>
        
        <div class="panel-content">
            <div class="user-cell" style="margin-bottom: 24px;">
                <div class="user-avatar" style="width: 60px; height: 60px; font-size: 24px;">AG</div>
                <div class="user-info">
                    <h4 style="font-size: 18px; margin-bottom: 4px;">Ana Garc√≠a</h4>
                    <p style="color: #10B981; font-weight: 600;">‚óè Activo</p>
                    <p>ana.garcia@empresa.com</p>
                    <p>+56 9 1234 5678</p>
                </div>
            </div>
            
            <div class="user-stats">
                <div class="stat-card">
                    <div class="stat-value">45</div>
                    <div class="stat-label">Total Reservas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">8</div>
                    <div class="stat-label">Este Mes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">2.3</div>
                    <div class="stat-label">Promedio/Semana</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">95%</div>
                    <div class="stat-label">Tasa Aprobaci√≥n</div>
                </div>
            </div>
            
            <div class="recent-reservations">
                <h4 style="margin-bottom: 16px; color: #374151;">üìã Reservas Recientes</h4>
                
                <div class="reservation-item">
                    <div class="reservation-date">15 Mar, 2025 - 09:00</div>
                    <div class="reservation-space">Sala de Conferencias A1</div>
                </div>
                
                <div class="reservation-item">
                    <div class="reservation-date">12 Mar, 2025 - 14:30</div>
                    <div class="reservation-space">Auditorio Principal</div>
                </div>
                
                <div class="reservation-item">
                    <div class="reservation-date">08 Mar, 2025 - 11:00</div>
                    <div class="reservation-space">Sala de Juntas B2</div>
                </div>
            </div>
            
            <div style="margin-top: 32px; display: flex; flex-direction: column; gap: 12px;">
                <button class="btn btn-primary" style="width: 100%;">‚úèÔ∏è Editar Usuario</button>
                <button class="btn btn-secondary" style="width: 100%;">üìß Enviar Mensaje</button>
                <button class="btn btn-secondary" style="width: 100%;">üîí Suspender Usuario</button>
            </div>
        </div>
    </div>

    <script>
        function toggleStatus(toggle) {
            toggle.classList.toggle('active');
        }
        
        function openUserPanel(userName) {
            document.getElementById('overlay').classList.add('active');
            document.getElementById('userPanel').classList.add('open');
            document.body.style.overflow = 'hidden';
        }
        
        function closeUserPanel() {
            document.getElementById('overlay').classList.remove('active');
            document.getElementById('userPanel').classList.remove('open');
            document.body.style.overflow = 'auto';
        }
        
        // Close panel with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeUserPanel();
            }
        });
    </script>
</body>
</html>
============================================================


===== login.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INACAP - Sistema de Reservas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 450px;
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            gap: 12px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: #dc2626;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .logo-text {
            font-size: 32px;
            font-weight: bold;
            color: #333;
        }

        .welcome-text {
            font-size: 24px;
            color: #333;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .tab-container {
            margin-bottom: 30px;
        }

        .tabs {
            display: flex;
            background: #f3f4f6;
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 20px;
            gap: 4px;
        }

        .tab {
            flex: 1;
            padding: 12px 16px;
            border: none;
            background: transparent;
            color: #666;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
        }

        .tab.active {
            background: white;
            color: #2563eb;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .user-type-selector {
            display: flex;
            background: #f3f4f6;
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 30px;
            gap: 4px;
        }

        .user-type-btn {
            flex: 1;
            padding: 12px 16px;
            border: none;
            background: transparent;
            color: #666;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
        }

        .user-type-btn.active {
            background: white;
            color: #2563eb;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .form-container {
            display: none;
        }

        .form-container.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
            background: #f9fafb;
        }

        .form-input:focus {
            outline: none;
            border-color: #2563eb;
            background: white;
        }

        .name-fields {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .password-container {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
        }

        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #666;
            cursor: pointer;
        }

        .remember-checkbox {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            border: 2px solid #ddd;
            cursor: pointer;
        }

        .forgot-password {
            color: #2563eb;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .forgot-password:hover {
            text-decoration: underline;
        }

        .action-button {
            width: 100%;
            padding: 15px;
            background: #2563eb;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-button:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
        }

        .action-button.loading {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .action-button.register {
            background: #10b981;
        }

        .action-button.register:hover {
            background: #059669;
        }

        .error-message {
            background: #fee2e2;
            color: #dc2626;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        .success-message {
            background: #d1fae5;
            color: #065f46;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        .demo-credentials {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 12px;
            color: #0369a1;
        }

        .demo-title {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .demo-item {
            margin-bottom: 4px;
        }

        .switch-form {
            margin-top: 20px;
            font-size: 14px;
            color: #666;
        }

        .switch-form a {
            color: #2563eb;
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
        }

        .switch-form a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="logo">
            <div class="logo-icon">IN</div>
            <div class="logo-text">INACAP</div>
        </div>
        
        <h1 class="welcome-text">Sistema de Reservas</h1>

        <div class="tab-container">
            <div class="tabs">
                <button class="tab active" data-tab="login">üîê Iniciar Sesi√≥n</button>
                <button class="tab" data-tab="register">üë§ Crear Cuenta</button>
            </div>
        </div>

        <div class="error-message" id="errorMessage"></div>
        <div class="success-message" id="successMessage"></div>
        
        <!-- FORMULARIO DE LOGIN -->
        <div class="form-container active" id="loginFormContainer">
            <div class="user-type-selector">
                <button class="user-type-btn active" data-type="usuario">üë§ Usuario</button>
                <button class="user-type-btn" data-type="administrador">üîß Administrador</button>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">Correo Electr√≥nico</label>
                    <input 
                        type="email" 
                        id="loginEmail" 
                        class="form-input" 
                        placeholder="tu.email@ejemplo.com"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label class="form-label">Contrase√±a</label>
                    <div class="password-container">
                        <input 
                            type="password" 
                            id="loginPassword" 
                            class="form-input" 
                            placeholder="Ingresa tu contrase√±a"
                            required
                        >
                        <button type="button" class="toggle-password" onclick="togglePassword('loginPassword')">üëÅÔ∏è</button>
                    </div>
                </div>
                
                <div class="form-options">
                    <label class="remember-me">
                        <input type="checkbox" class="remember-checkbox" id="rememberMe">
                        Recordar sesi√≥n
                    </label>
                    <a href="#" class="forgot-password">¬øOlvidaste tu contrase√±a?</a>
                </div>
                
                <button type="submit" class="action-button" id="loginBtn">
                    Iniciar Sesi√≥n
                </button>
            </form>

            <div class="demo-credentials">
                <div class="demo-title">Credenciales de Prueba:</div>
                <div class="demo-item"><strong>Usuario Normal:</strong> test@gmail.com / 123456</div>
                <div class="demo-item"><strong>Administrador:</strong> admin@inacapmail.cl / admin123</div>
            </div>
        </div>

        <!-- FORMULARIO DE REGISTRO -->
        <div class="form-container" id="registerFormContainer">
            <form id="registerForm">
                <div class="form-group">
                    <label class="form-label">Nombre Completo</label>
                    <div class="name-fields">
                        <input 
                            type="text" 
                            id="firstName" 
                            class="form-input" 
                            placeholder="Nombre"
                            required
                        >
                        <input 
                            type="text" 
                            id="lastName" 
                            class="form-input" 
                            placeholder="Apellido"
                            required
                        >
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Correo Electr√≥nico</label>
                    <input 
                        type="email" 
                        id="registerEmail" 
                        class="form-input" 
                        placeholder="tu.email@ejemplo.com"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label class="form-label">Contrase√±a</label>
                    <div class="password-container">
                        <input 
                            type="password" 
                            id="registerPassword" 
                            class="form-input" 
                            placeholder="Crea una contrase√±a segura"
                            required
                            minlength="6"
                        >
                        <button type="button" class="toggle-password" onclick="togglePassword('registerPassword')">üëÅÔ∏è</button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Confirmar Contrase√±a</label>
                    <div class="password-container">
                        <input 
                            type="password" 
                            id="confirmPassword" 
                            class="form-input" 
                            placeholder="Repite tu contrase√±a"
                            required
                        >
                        <button type="button" class="toggle-password" onclick="togglePassword('confirmPassword')">üëÅÔ∏è</button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Departamento/√Årea</label>
                    <select id="department" class="form-input" required>
                        <option value="">Selecciona tu departamento</option>
                        <option value="Estudiante">Estudiante</option>
                        <option value="Docente">Docente</option>
                        <option value="Administrativo">Administrativo</option>
                        <option value="Investigaci√≥n">Investigaci√≥n</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
                
                <button type="submit" class="action-button register" id="registerBtn">
                    üë§ Crear Mi Cuenta
                </button>
            </form>

            <div class="switch-form">
                ¬øYa tienes cuenta? <a onclick="showTab('login')">Inicia sesi√≥n aqu√≠</a>
            </div>
        </div>
    </div>

    <script>
        let currentUserType = 'usuario';
        let currentTab = 'login';

        // Sistema de pesta√±as
        function showTab(tabName) {
            currentTab = tabName;
            
            // Actualizar pesta√±as
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
            
            // Actualizar formularios
            document.querySelectorAll('.form-container').forEach(form => {
                form.classList.remove('active');
            });
            document.getElementById(`${tabName}FormContainer`).classList.add('active');
            
            // Limpiar mensajes
            hideMessages();
        }

        // Selector de tipo de usuario
        function selectUserType(type) {
            currentUserType = type;
            
            document.querySelectorAll('.user-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const loginBtn = document.getElementById('loginBtn');
            if (type === 'administrador') {
                loginBtn.textContent = 'Iniciar Sesi√≥n como Administrador';
                loginBtn.style.background = '#dc2626';
            } else {
                loginBtn.textContent = 'Iniciar Sesi√≥n';
                loginBtn.style.background = '#2563eb';
            }
        }

        function togglePassword(fieldId) {
            const passwordInput = document.getElementById(fieldId);
            const toggleButton = passwordInput.parentNode.querySelector('.toggle-password');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleButton.textContent = 'üîí';
            } else {
                passwordInput.type = 'password';
                toggleButton.textContent = 'üëÅÔ∏è';
            }
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            document.getElementById('successMessage').style.display = 'none';
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            document.getElementById('errorMessage').style.display = 'none';
        }

        function hideMessages() {
            document.getElementById('errorMessage').style.display = 'none';
            document.getElementById('successMessage').style.display = 'none';
        }

        // Event listeners para pesta√±as
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                showTab(this.dataset.tab);
            });
        });

        // Event listeners para tipo de usuario
        document.querySelectorAll('.user-type-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                selectUserType(this.dataset.type);
            });
        });

        // FUNCI√ìN MEJORADA DE LOGIN
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Limpiar mensajes anteriores
            hideMessages();
            
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const userType = currentUserType;
            
            console.log('üîÑ Iniciando proceso de login...');
            console.log('üìß Email:', email);
            console.log('üîë Password:', '*'.repeat(password.length));
            console.log('üë§ Tipo de usuario:', userType);
            
            if (!email || !password) {
                showError('Por favor completa todos los campos');
                return;
            }

            // Mostrar loading
            const loginBtn = document.getElementById('loginBtn');
            const originalText = loginBtn.innerHTML;
            loginBtn.innerHTML = '‚è≥ Conectando...';
            loginBtn.disabled = true;

            try {
                console.log('üì§ Enviando solicitud al servidor...');
                
                const response = await fetch('/login/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCSRFToken()
                    },
                    body: JSON.stringify({
                        email: email,
                        password: password,
                        user_type: userType
                    })
                });

                console.log('üì• Respuesta recibida. Status:', response.status);
                
                const data = await response.json();
                console.log('üìä Datos de respuesta:', data);
                
                if (data.success) {
                    console.log('‚úÖ Login exitoso, redirigiendo...');
                    showSuccess('¬°Login exitoso! Redirigiendo...');
                    
                    // Redirigir despu√©s de breve delay
                    setTimeout(() => {
                        window.location.href = data.redirect_url || '/dashboard/';
                    }, 1000);
                    
                } else {
                    console.log('‚ùå Login fallido:', data.message);
                    showError(data.message || 'Credenciales incorrectas');
                }
                
            } catch (error) {
                console.error('üí• Error completo:', error);
                
                if (error.name === 'TypeError' && error.message.includes('fetch')) {
                    showError('Error de conexi√≥n. Verifica que el servidor est√© ejecut√°ndose en http://localhost:8000');
                } else {
                    showError('Error de conexi√≥n con el servidor');
                }
            } finally {
                console.log('üèÅ Finalizando proceso de login');
                loginBtn.innerHTML = originalText;
                loginBtn.disabled = false;
            }
        });

        // Manejar registro de usuario
        document.getElementById('registerForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const department = document.getElementById('department').value;

            // Validaciones
            if (!firstName || !lastName) {
                showError('Por favor ingresa tu nombre completo');
                return;
            }

            if (password !== confirmPassword) {
                showError('Las contrase√±as no coinciden');
                return;
            }

            if (password.length < 6) {
                showError('La contrase√±a debe tener al menos 6 caracteres');
                return;
            }

            if (!department) {
                showError('Por favor selecciona tu departamento');
                return;
            }

            // Mostrar loading
            const registerBtn = document.getElementById('registerBtn');
            registerBtn.textContent = 'Creando cuenta...';
            registerBtn.disabled = true;

            try {
                const response = await fetch('/api/registro/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    'X-CSRFToken': getCSRFToken()
                    },
                    body: JSON.stringify({
                        first_name: firstName,
                        last_name: lastName,
                        email: email,
                        password: password,
                        department: department
                    })
                });

                const data = await response.json();

                if (data.success) {
                    showSuccess('¬°Cuenta creada exitosamente! Ahora puedes iniciar sesi√≥n.');
                    document.getElementById('registerForm').reset();
                    
                    // Cambiar a pesta√±a de login despu√©s de 2 segundos
                    setTimeout(() => {
                        showTab('login');
                        document.getElementById('loginEmail').value = email;
                    }, 2000);
                } else {
                    showError(data.message || 'Error al crear la cuenta');
                }

            } catch (error) {
                showError('Error de conexi√≥n. Intenta nuevamente.');
            } finally {
                registerBtn.textContent = 'üë§ Crear Mi Cuenta';
                registerBtn.disabled = false;
            }
        });

        // FUNCI√ìN PARA OBTENER CSRF TOKEN
        function getCSRFToken() {
            const name = 'csrftoken';
            let cookieValue = null;
            
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            
            console.log('üç™ CSRF Token:', cookieValue ? 'Encontrado' : 'No encontrado');
            return cookieValue;
        }

        // Probar conexi√≥n cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ P√°gina de login cargada');
            
            // Inicializar eventos
            document.querySelectorAll('.user-type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectUserType(this.dataset.type);
                });
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    showTab(this.dataset.tab);
                });
            });
        });
    </script>
</body>
</html>
============================================================


===== login_admin.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INACAP - Login Administrador</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .login-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        .logo { 
            font-size: 32px; 
            font-weight: bold; 
            color: #333; 
            margin-bottom: 10px;
        }
        .subtitle { 
            color: #666; 
            margin-bottom: 30px;
        }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-label { 
            display: block; 
            font-weight: 600; 
            color: #333; 
            margin-bottom: 8px; 
        }
        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        .form-input:focus {
            outline: none;
            border-color: #dc2626;
        }
        .login-button {
            width: 100%;
            padding: 15px;
            background: #dc2626;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }
        .login-button:hover {
            background: #b91c1c;
        }
        .user-link {
            display: block;
            margin-top: 20px;
            color: #dc2626;
            text-decoration: none;
        }
        .error-message {
            background: #fee2e2;
            color: #dc2626;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .warning {
            background: #fef3c7;
            color: #92400e;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="logo">inacap</div>
        <div class="subtitle">Panel de Administraci√≥n</div>
        
        <div class="warning">
            ‚ö†Ô∏è Acceso exclusivo para administradores
        </div>
        
        {% if messages %}
            {% for message in messages %}
                <div class="error-message">{{ message }}</div>
            {% endfor %}
        {% endif %}
        
        <form method="POST">
            {% csrf_token %}
            
            <div class="form-group">
                <label class="form-label">Usuario Administrador</label>
                <input type="text" name="username" class="form-input" placeholder="Usuario admin" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">Contrase√±a</label>
                <input type="password" name="password" class="form-input" placeholder="Contrase√±a admin" required>
            </div>
            
            <button type="submit" class="login-button">Acceder al Panel Admin</button>
        </form>
        
        <a href="{% url 'login_usuario' %}" class="user-link">‚Üê Volver al login de usuarios</a>
    </div>
</body>
</html>
============================================================


===== login_usuario.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INACAP - Login Usuario</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .login-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        .logo { 
            font-size: 32px; 
            font-weight: bold; 
            color: #333; 
            margin-bottom: 10px;
        }
        .subtitle { 
            color: #666; 
            margin-bottom: 30px;
        }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-label { 
            display: block; 
            font-weight: 600; 
            color: #333; 
            margin-bottom: 8px; 
        }
        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }
        .login-button {
            width: 100%;
            padding: 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }
        .login-button:hover {
            background: #5a6fd8;
        }
        .admin-link {
            display: block;
            margin-top: 20px;
            color: #667eea;
            text-decoration: none;
        }
        .error-message {
            background: #fee2e2;
            color: #dc2626;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="logo">inacap</div>
        <div class="subtitle">Sistema de Reservas - Usuarios</div>
        
        {% if messages %}
            {% for message in messages %}
                <div class="error-message">{{ message }}</div>
            {% endfor %}
        {% endif %}
        
        <form method="POST">
            {% csrf_token %}
            <input type="hidden" name="user_type" value="usuario">
            
            <div class="form-group">
                <label class="form-label">Usuario</label>
                <input type="text" name="username" class="form-input" placeholder="Ingresa tu usuario" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">Contrase√±a</label>
                <input type="password" name="password" class="form-input" placeholder="Ingresa tu contrase√±a" required>
            </div>
            
            <button type="submit" class="login-button">Iniciar Sesi√≥n como Usuario</button>
        </form>
        
        <a href="{% url 'login_admin' %}" class="admin-link">¬øEres administrador? Accede aqu√≠</a>
    </div>
</body>
</html>
============================================================


===== notificaciones.html =====
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Notificaciones</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 0;
      display: flex;
    }

    .container {
      width: 70%;
      padding: 20px;
    }

    h2 {
      margin-bottom: 15px;
    }

    .filters {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .filters button {
      padding: 8px 14px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background: #e6e6e6;
      transition: background 0.3s;
    }

    .filters button:hover {
      background: #d4d4d4;
    }

    .filters button.active {
      background: #0056d2;
      color: white;
    }

    .notification {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 12px;
      border-left: 6px solid;
      display: block;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .pendiente { border-color: #ffc107; }
    .aprobada { border-color: #28a745; }
    .rechazada { border-color: #dc3545; }

    .notification.unread {
      background: #f8f9fa;
      border-left-width: 8px;
    }

    .notification small {
      color: gray;
      display: block;
      margin-top: 6px;
    }

    .actions {
      margin-top: 10px;
    }

    .actions button {
      padding: 6px 12px;
      margin-right: 8px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: opacity 0.3s;
    }

    .actions button:hover {
      opacity: 0.9;
    }

    .btn-primary { background: #0056d2; color: white; }
    .btn-danger { background: #dc3545; color: white; }
    .btn-success { background: #28a745; color: white; }
    .btn-warning { background: #ffc107; color: black; }
    .btn-secondary { background: #6c757d; color: white; }

    .sidebar {
      width: 30%;
      background: white;
      padding: 20px;
      border-left: 1px solid #ddd;
      min-height: 100vh;
    }

    .sidebar h3 {
      margin-bottom: 15px;
    }

    .preference {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      align-items: center;
    }

    .toggle {
      width: 40px;
      height: 20px;
      background: #ddd;
      border-radius: 15px;
      position: relative;
      cursor: pointer;
      transition: background 0.3s;
    }

    .toggle::after {
      content: "";
      width: 18px;
      height: 18px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 1px;
      left: 1px;
      transition: 0.3s;
    }

    .toggle.active {
      background: #28a745;
    }

    .toggle.active::after {
      left: 21px;
    }

    .frecuencia {
      margin-top: 20px;
    }

    .frecuencia label {
      display: block;
      margin: 6px 0;
      cursor: pointer;
    }

    .loading {
      text-align: center;
      padding: 20px;
      color: #6c757d;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #6c757d;
    }

    .error-state {
      text-align: center;
      padding: 20px;
      color: #dc3545;
      background: #f8d7da;
      border-radius: 8px;
      margin: 10px 0;
    }

    .refresh-btn {
      background: #0056d2;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }

    .badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
      margin-left: 8px;
    }

    .badge-pending { background: #fff3cd; color: #856404; }
    .badge-approved { background: #d4edda; color: #155724; }
    .badge-rejected { background: #f8d7da; color: #721c24; }

    .debug-panel {
      background: #e9ecef;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      font-size: 14px;
    }

    .data-source {
      margin-top: 10px;
      padding: 8px;
      background: #d1ecf1;
      border-radius: 4px;
      font-size: 12px;
    }
  </style>
</head>
<body> 
  <div class="container">
    <h2>üîî Notificaciones (<span id="notification-count">0</span>)</h2>

    <div class="filters">
      <button class="active" data-filter="all">Todas</button>
      <button data-filter="pending">Pendientes</button>
      <button data-filter="approved">Aprobadas</button>
      <button data-filter="rejected">Rechazadas</button>
    </div>
    

    <div class="debug-panel">
      <strong>Estado del Sistema:</strong>
      <div id="system-status">Conectando al servidor...</div>
      <div class="data-source" id="data-source-info">
        Fuente de datos: <span id="data-source">Cargando...</span>
      </div>
      <button onclick="probarConexion()" style="margin-top: 10px; padding: 5px 10px; background: #0056d2; color: white; border: none; border-radius: 3px; cursor: pointer;">
        Probar Conexi√≥n API
      </button>
    </div>

    <div id="notifications-container">
      <div class="loading">Cargando notificaciones desde la base de datos...</div>
    </div>
  </div>

  <div class="sidebar">
    <h3>‚öôÔ∏è Preferencias</h3>

    <div class="preference">
      <span>Notificaciones de reservas</span>
      <div class="toggle active" data-pref="reservas"></div>
    </div>

    <div class="preference">
      <span>Recordatorios</span>
      <div class="toggle active" data-pref="recordatorios"></div>
    </div>

    <div class="frecuencia">
      <h4>üìÖ Frecuencia</h4>
      <label><input type="radio" name="frecuencia" value="immediate" checked> Inmediata</label>
      <label><input type="radio" name="frecuencia" value="daily"> Resumen diario</label>
      <label><input type="radio" name="frecuencia" value="weekly"> Resumen semanal</label>
    </div>
  </div>

  <script>
    // Configuraci√≥n - USA LA MISMA URL QUE FUNCIONA
    const API_BASE_URL = 'http://127.0.0.1:8000/api';
    let allNotifications = [];
    let currentFilter = 'all';

    // Funci√≥n para probar conexi√≥n y mostrar datos REALES
    async function probarConexion() {
      const statusElement = document.getElementById('system-status');
      const dataSourceElement = document.getElementById('data-source');
      
      statusElement.innerHTML = 'üîÑ Conectando a la API...';
      
      try {
        const response = await fetch(`${API_BASE_URL}/reservas/`, {
          credentials: 'include'
        });
        
        if (response.ok) {
          const data = await response.json();
          statusElement.innerHTML = `‚úÖ Conexi√≥n exitosa! Se encontraron ${data.length} reservas REALES en la BD`;
          dataSourceElement.innerHTML = `Base de datos PostgreSQL (${data.length} reservas)`;
          
          console.log('üìä DATOS REALES DE LA BASE DE DATOS:', data);
          
          // Mostrar informaci√≥n detallada de las reservas
          if (data.length > 0) {
            let info = '<br><strong>Reservas encontradas:</strong><br>';
            data.forEach((reserva, index) => {
              info += `${index + 1}. ${reserva.espacio_nombre} - ${reserva.fecha_reserva} ${reserva.hora_inicio}-${reserva.hora_fin} (${reserva.estado})<br>`;
            });
            statusElement.innerHTML += info;
          }
          
          return data;
        } else {
          throw new Error(`Error ${response.status}: ${response.statusText}`);
        }
      } catch (error) {
        statusElement.innerHTML = `‚ùå Error de conexi√≥n: ${error.message}`;
        dataSourceElement.innerHTML = 'Datos de ejemplo (fallback)';
        throw error;
      }
    }

    // Funci√≥n para cargar datos REALES de la API
    async function loadRealData() {
      const statusElement = document.getElementById('system-status');
      const dataSourceElement = document.getElementById('data-source');
      
      try {
        console.log('üîÑ Conectando a la API para datos REALES...');
        const response = await fetch(`${API_BASE_URL}/reservas/`, {
          credentials: 'include'
        });
        
        if (response.ok) {
          const reservas = await response.json();
          console.log('‚úÖ DATOS REALES CARGADOS:', reservas);
          
          statusElement.innerHTML = `‚úÖ Conectado a la BD - ${reservas.length} reservas REALES`;
          dataSourceElement.innerHTML = 'Base de datos PostgreSQL';
          
          return reservas;
        } else {
          throw new Error(`API responded with status: ${response.status}`);
        }
      } catch (error) {
        console.error('‚ùå Error cargando datos reales:', error);
        statusElement.innerHTML = `‚ùå Error: ${error.message}`;
        dataSourceElement.innerHTML = 'Error al cargar datos reales';
        
        // NO usar datos de ejemplo - mejor mostrar error
        throw new Error('No se pudieron cargar los datos reales de la base de datos');
      }
    }

    // Funciones de formato
    function formatFecha(fecha) {
      if (!fecha) return 'Fecha no especificada';
      const partes = fecha.split('-');
      if (partes.length === 3) {
        return `${partes[2]}/${partes[1]}/${partes[0]}`;
      }
      return fecha;
    }

    function formatHora(hora) {
      if (!hora) return 'Hora no especificada';
      // Convertir "14:00:00" a "14:00"
      return hora.substring(0, 5);
    }

    function formatRelativeTime(dateString) {
      try {
        const date = new Date(dateString);
        const now = new Date();
        const diffMs = now - date;
        const diffMins = Math.floor(diffMs / 60000);
        const diffHours = Math.floor(diffMs / 3600000);
        const diffDays = Math.floor(diffMs / 86400000);

        if (diffMins < 1) return `Hace unos segundos`;
        if (diffMins < 60) return `Hace ${diffMins} minutos`;
        if (diffHours < 24) return `Hace ${diffHours} horas`;
        if (diffDays === 1) return `Ayer`;
        return `Hace ${diffDays} d√≠as`;
      } catch (error) {
        return 'Fecha no disponible';
      }
    }

    // Generar notificaciones desde datos REALES
    function generateNotificationsFromRealData(reservas) {
      console.log('üîÑ Generando notificaciones desde datos REALES:', reservas);
      
      return reservas.map(reserva => {
        // Usar los datos REALES de la base de datos
        const espacioNombre = reserva.espacio_nombre || 'Espacio no especificado';
        const fechaFormateada = formatFecha(reserva.fecha_reserva);
        const horaInicio = formatHora(reserva.hora_inicio);
        const horaFin = formatHora(reserva.hora_fin);
        const estado = reserva.estado || 'Pendiente';
        
        let mensaje = '';
        let clase = '';
        
        switch(estado) {
          case 'Pendiente':
            mensaje = `Tu solicitud para <strong>${espacioNombre}</strong> el <strong>${fechaFormateada}</strong> de <strong>${horaInicio} - ${horaFin}</strong> est√° en revisi√≥n.`;
            clase = 'pendiente';
            break;
          case 'Aprobada':
            mensaje = `¬°Tu reserva para <strong>${espacioNombre}</strong> el <strong>${fechaFormateada}</strong> de <strong>${horaInicio} - ${horaFin}</strong> ha sido aprobada!`;
            clase = 'aprobada';
            break;
          case 'Rechazada':
            mensaje = `Tu reserva para <strong>${espacioNombre}</strong> el <strong>${fechaFormateada}</strong> ha sido rechazada.`;
            clase = 'rechazada';
            break;
        }
        
        return {
          id: reserva.id,
          type: estado.toLowerCase(),
          class: clase,
          title: `üìã ${estado === 'Pendiente' ? 'Solicitud de Reserva' : 'Reserva'} <span class="badge badge-${estado.toLowerCase()}">${estado}</span>`,
          message: mensaje,
          timestamp: reserva.fecha_solicitud,
          read: false,
          actions: [
            { text: 'Ver detalles', class: 'btn-primary', action: 'view' },
            ...(estado === 'Pendiente' ? [{ text: 'Cancelar reserva', class: 'btn-danger', action: 'cancel' }] : [])
          ],
          reservaData: reserva
        };
      });
    }

    // Renderizar notificaciones
    function renderNotifications(notifications, filter = 'all') {
      const container = document.getElementById('notifications-container');
      const countElement = document.getElementById('notification-count');
      
      let filteredNotifications = notifications;
      
      switch(filter) {
        case 'pending':
          filteredNotifications = notifications.filter(n => n.type === 'pendiente');
          break;
        case 'approved':
          filteredNotifications = notifications.filter(n => n.type === 'aprobada');
          break;
        case 'rejected':
          filteredNotifications = notifications.filter(n => n.type === 'rechazada');
          break;
      }
      
      countElement.textContent = filteredNotifications.length;
      
      if (filteredNotifications.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <p>No hay notificaciones ${filter !== 'all' ? 'de ' + filter : ''}</p>
            <p><small>Los datos se cargan directamente desde la base de datos PostgreSQL</small></p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = filteredNotifications.map(notif => `
        <div class="notification ${notif.class} ${!notif.read ? 'unread' : ''}">
          <b>${notif.title}</b>
          <p>${notif.message}</p>
          <small>${formatRelativeTime(notif.timestamp)} - <em>Datos reales de la BD</em></small>
          <div class="actions">
            ${notif.actions.map(action => 
              `<button class="${action.class}" data-action="${action.action}" data-reserva-id="${notif.id}">
                ${action.text}
              </button>`
            ).join('')}
          </div>
        </div>
      `).join('');
    }

    // Inicializar la aplicaci√≥n con datos REALES
    document.addEventListener('DOMContentLoaded', async function() {
      try {
        // Cargar datos REALES de la base de datos
        const reservasReales = await loadRealData();
        allNotifications = generateNotificationsFromRealData(reservasReales);
        renderNotifications(allNotifications);
        
        if (reservasReales.length === 0) {
          document.getElementById('notifications-container').innerHTML = `
            <div class="empty-state">
              <p>No tienes reservas en el sistema</p>
              <p><small>Cuando crees una reserva, aparecer√° aqu√≠ con los datos reales de PostgreSQL</small></p>
            </div>
          `;
        }
        
      } catch (error) {
        console.error('Error inicializando:', error);
        document.getElementById('notifications-container').innerHTML = `
          <div class="error-state">
            <strong>No se pudieron cargar los datos reales</strong><br>
            ${error.message}<br>
            <small>Verifica que el servidor Django est√© corriendo y tengas reservas creadas</small>
            <button class="refresh-btn" onclick="location.reload()">Reintentar</button>
          </div>
        `;
        return;
      }

      // Filtros
      document.querySelectorAll('.filters button').forEach(button => {
        button.addEventListener('click', function() {
          document.querySelectorAll('.filters button').forEach(btn => {
            btn.classList.remove('active');
          });
          this.classList.add('active');
          currentFilter = this.getAttribute('data-filter');
          renderNotifications(allNotifications, currentFilter);
        });
      });

      // Acciones
      document.addEventListener('click', function(e) {
        const button = e.target.closest('.actions button');
        if (button) {
          const action = button.getAttribute('data-action');
          const reservaId = button.getAttribute('data-reserva-id');
          const notificacion = allNotifications.find(n => n.id == reservaId);
          
          if (notificacion) {
            const reserva = notificacion.reservaData;
            const fechaFormateada = formatFecha(reserva.fecha_reserva);
            const horaInicio = formatHora(reserva.hora_inicio);
            const horaFin = formatHora(reserva.hora_fin);
            
            switch(action) {
              case 'view':
                alert(`üìã Detalles de la reserva (DESDE BASE DE DATOS):\n\n
ID: ${reserva.id}\n
Espacio: ${reserva.espacio_nombre}\n
Fecha: ${fechaFormateada}\n
Horario: ${horaInicio} - ${horaFin}\n
Estado: ${reserva.estado}\n
Prop√≥sito: ${reserva.proposito || 'No especificado'}\n
N√∫mero de asistentes: ${reserva.num_asistentes || 'No especificado'}\n
Fecha de solicitud: ${formatRelativeTime(reserva.fecha_solicitud)}`);
                break;
              case 'cancel':
                if (confirm('¬øEst√°s seguro de que quieres cancelar esta reserva?')) {
                  alert('Funci√≥n de cancelaci√≥n (conectada a la API real)');
                }
                break;
            }
          }
        }
      });
    });

    // Toggles
    document.querySelectorAll('.toggle').forEach(toggle => {
      toggle.addEventListener('click', function() {
        this.classList.toggle('active');
      });
    });
  </script>
</body>
</html>
============================================================


===== notificaciones_admin.html =====
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Notificaciones - Sistema de Reservas</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: #f9fafb;
                color: #111827;
            }

            /* Header */
            .header {
                background: white;
                border-bottom: 1px solid #e5e7eb;
                padding: 0 24px;
                height: 64px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            }

            .logo-section {
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .logo {
                width: 40px;
                height: 40px;
                background: #2563eb;
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
            }

            .user-menu {
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .user-avatar {
                width: 32px;
                height: 32px;
                background: #10b981;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: 600;
            }

            /* Main Content */
            .main-content {
                padding: 24px;
                max-width: 1200px;
                margin: 0 auto;
            }

            .page-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 32px;
                flex-wrap: wrap;
                gap: 16px;
            }

            .header-left {
                display: flex;
                align-items: center;
                gap: 16px;
            }

            .page-title {
                font-size: 28px;
                font-weight: 700;
                color: #111827;
            }

            .notification-count {
                background: #dc2626;
                color: white;
                padding: 4px 12px;
                border-radius: 16px;
                font-size: 14px;
                font-weight: 600;
            }

            .header-actions {
                display: flex;
                gap: 12px;
            }

            .header-btn {
                padding: 10px 16px;
                border: 2px solid #e5e7eb;
                background: white;
                border-radius: 8px;
                cursor: pointer;
                font-weight: 500;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 6px;
            }

            .header-btn:hover {
                border-color: #2563eb;
                color: #2563eb;
            }

            .header-btn.primary {
                background: #2563eb;
                color: white;
                border-color: #2563eb;
            }

            .header-btn.primary:hover {
                background: #1d4ed8;
            }

            /* Content Layout */
            .content-layout {
                display: grid;
                grid-template-columns: 1fr 300px;
                gap: 24px;
            }

            /* Notifications Panel */
            .notifications-panel {
                background: white;
                border-radius: 12px;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                overflow: hidden;
            }

            .panel-header {
                padding: 20px 24px;
                border-bottom: 1px solid #e5e7eb;
                display: flex;
                align-items: center;
                justify-content: between;
                gap: 16px;
            }

            .filter-tabs {
                display: flex;
                background: #f3f4f6;
                border-radius: 8px;
                padding: 4px;
                flex: 1;
            }

            .filter-tab {
                flex: 1;
                padding: 8px 12px;
                border: none;
                background: none;
                border-radius: 6px;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                text-align: center;
                font-size: 14px;
                position: relative;
            }

            .filter-tab.active {
                background: white;
                color: #2563eb;
                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            }

            .filter-tab .badge {
                background: #dc2626;
                color: white;
                font-size: 10px;
                padding: 2px 6px;
                border-radius: 8px;
                margin-left: 4px;
            }

            .filter-tab.active .badge {
                background: #2563eb;
            }

            /* Notifications List */
            .notifications-list {
                max-height: 600px;
                overflow-y: auto;
            }

            .notification-item {
                padding: 16px 24px;
                border-bottom: 1px solid #f3f4f6;
                transition: all 0.3s ease;
                cursor: pointer;
                position: relative;
            }

            .notification-item:hover {
                background: #f9fafb;
            }

            .notification-item.unread {
                background: #fffbeb;
                border-left: 4px solid #f59e0b;
            }

            .notification-item.unread::before {
                content: '';
                position: absolute;
                top: 20px;
                right: 20px;
                width: 8px;
                height: 8px;
                background: #dc2626;
                border-radius: 50%;
            }

            .notification-content {
                display: flex;
                gap: 12px;
            }

            .notification-icon {
                width: 40px;
                height: 40px;
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 18px;
                flex-shrink: 0;
            }

            .notification-icon.reservation {
                background: #dbeafe;
                color: #2563eb;
            }

            .notification-icon.approval {
                background: #d1fae5;
                color: #059669;
            }

            .notification-icon.rejection {
                background: #fee2e2;
                color: #dc2626;
            }

            .notification-icon.reminder {
                background: #fef3c7;
                color: #d97706;
            }

            .notification-icon.maintenance {
                background: #fed7aa;
                color: #ea580c;
            }

            .notification-icon.system {
                background: #f3f4f6;
                color: #6b7280;
            }

            .notification-details {
                flex: 1;
                min-width: 0;
            }

            .notification-title {
                font-weight: 600;
                color: #111827;
                margin-bottom: 4px;
                line-height: 1.4;
            }

            .notification-description {
                font-size: 14px;
                color: #6b7280;
                margin-bottom: 8px;
                line-height: 1.4;
            }

            .notification-meta {
                display: flex;
                align-items: center;
                gap: 12px;
                font-size: 12px;
                color: #9ca3af;
            }

            .notification-time {
                display: flex;
                align-items: center;
                gap: 4px;
            }

            .notification-actions {
                display: flex;
                gap: 8px;
                margin-top: 12px;
            }

            .quick-action {
                padding: 6px 12px;
                border: 1px solid #e5e7eb;
                background: white;
                border-radius: 6px;
                font-size: 12px;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .quick-action:hover {
                border-color: #2563eb;
                color: #2563eb;
            }

            .quick-action.primary {
                background: #2563eb;
                color: white;
                border-color: #2563eb;
            }

            .quick-action.primary:hover {
                background: #1d4ed8;
            }

            .quick-action.success {
                background: #10b981;
                color: white;
                border-color: #10b981;
            }

            .quick-action.success:hover {
                background: #059669;
            }

            .quick-action.danger {
                background: #dc2626;
                color: white;
                border-color: #dc2626;
            }

            .quick-action.danger:hover {
                background: #b91c1c;
            }

            /* Empty State */
            .empty-state {
                text-align: center;
                padding: 60px 20px;
                color: #6b7280;
            }

            .empty-state-icon {
                font-size: 48px;
                margin-bottom: 16px;
                opacity: 0.5;
            }

            .empty-state-title {
                font-size: 18px;
                font-weight: 500;
                margin-bottom: 8px;
            }

            .empty-state-text {
                font-size: 14px;
            }

            /* Sidebar */
            .sidebar {
                display: flex;
                flex-direction: column;
                gap: 24px;
            }

            .sidebar-section {
                background: white;
                border-radius: 12px;
                padding: 20px;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            }

            .sidebar-title {
                font-size: 16px;
                font-weight: 600;
                color: #111827;
                margin-bottom: 16px;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            /* Notification Preferences */
            .preference-item {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 12px 0;
                border-bottom: 1px solid #f3f4f6;
            }

            .preference-item:last-child {
                border-bottom: none;
            }

            .preference-info {
                flex: 1;
            }

            .preference-name {
                font-weight: 500;
                color: #111827;
                margin-bottom: 2px;
            }

            .preference-description {
                font-size: 12px;
                color: #6b7280;
            }

            .preference-toggles {
                display: flex;
                gap: 8px;
            }

            .toggle-btn {
                padding: 4px 8px;
                border: 1px solid #e5e7eb;
                background: white;
                border-radius: 4px;
                font-size: 10px;
                cursor: pointer;
                transition: all 0.3s ease;
                color: #6b7280;
            }

            .toggle-btn.active {
                background: #2563eb;
                color: white;
                border-color: #2563eb;
            }

            /* Frequency Settings */
            .frequency-setting {
                margin-bottom: 16px;
            }

            .frequency-label {
                font-size: 14px;
                font-weight: 500;
                color: #374151;
                margin-bottom: 8px;
            }

            .frequency-options {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .frequency-option {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 8px;
                border-radius: 6px;
                cursor: pointer;
                transition: background 0.3s ease;
            }

            .frequency-option:hover {
                background: #f9fafb;
            }

            .frequency-option input[type="radio"] {
                width: 16px;
                height: 16px;
            }

            /* Do Not Disturb */
            .dnd-section {
                background: #f9fafb;
                border-radius: 8px;
                padding: 16px;
                margin-top: 16px;
            }

            .dnd-header {
                display: flex;
                align-items: center;
                justify-content: between;
                margin-bottom: 12px;
            }

            .dnd-toggle {
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .switch {
                position: relative;
                width: 44px;
                height: 24px;
                background: #e5e7eb;
                border-radius: 12px;
                cursor: pointer;
                transition: background 0.3s ease;
            }

            .switch.active {
                background: #10b981;
            }

            .switch::before {
                content: '';
                position: absolute;
                top: 2px;
                left: 2px;
                width: 20px;
                height: 20px;
                background: white;
                border-radius: 50%;
                transition: transform 0.3s ease;
            }

            .switch.active::before {
                transform: translateX(20px);
            }

            .time-inputs {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 8px;
                margin-top: 12px;
            }

            .time-input {
                padding: 8px;
                border: 1px solid #e5e7eb;
                border-radius: 6px;
                font-size: 14px;
            }

            /* Quick Stats */
            .stats-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }

            .stat-item {
                text-align: center;
                padding: 12px;
                background: #f9fafb;
                border-radius: 8px;
            }

            .stat-value {
                font-size: 24px;
                font-weight: 700;
                color: #111827;
            }

            .stat-label {
                font-size: 12px;
                color: #6b7280;
                margin-top: 4px;
            }

            /* Responsive */
            @media (max-width: 1024px) {
                .content-layout {
                    grid-template-columns: 1fr;
                }
            }

            @media (max-width: 768px) {
                .main-content {
                    padding: 16px;
                }

                .page-header {
                    flex-direction: column;
                    align-items: flex-start;
                }

                .filter-tabs {
                    flex-wrap: wrap;
                }

                .filter-tab {
                    min-width: 80px;
                    flex: none;
                }

                .notification-content {
                    flex-direction: column;
                    gap: 8px;
                }

                .notification-actions {
                    flex-wrap: wrap;
                }
            }
        </style>
    </head>
    <body>
        <!-- Header -->
        <header class="header">
            <div class="logo-section">
                <div class="logo">SR</div>
            </div>
            
            <div class="user-menu">
                <div class="user-avatar">JD</div>
                <span>Juan Dom√≠nguez</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Page Header -->
            <div class="page-header">
                <div class="header-left">
                    <h1 class="page-title">Notificaciones</h1>
                    <span class="notification-count">12</span>
                </div>
                <div class="header-actions">
                    <button class="header-btn" id="markAllRead">
                        ‚úì Marcar todas como le√≠das
                    </button>
                    <button class="header-btn" id="clearOld">
                        üóëÔ∏è Limpiar antiguas
                    </button>
                    <button class="header-btn primary" id="openSettings">
                        ‚öôÔ∏è Configurar
                    </button>
                </div>
            </div>

            <!-- Content Layout -->
            <div class="content-layout">
                <!-- Notifications Panel -->
                <div class="notifications-panel">
                    <div class="panel-header">
                        <div class="filter-tabs">
                            <button class="filter-tab active" data-filter="all">
                                Todas
                                <span class="badge">12</span>
                            </button>
                            <button class="filter-tab" data-filter="unread">
                                Sin leer
                                <span class="badge">8</span>
                            </button>
                            <button class="filter-tab" data-filter="reservations">
                                Reservas
                            </button>
                            <button class="filter-tab" data-filter="system">
                                Sistema
                            </button>
                            <button class="filter-tab" data-filter="reminders">
                                Recordatorios
                            </button>
                        </div>
                    </div>

                    <div class="notifications-list" id="notificationsList">
                        <!-- Notification Items -->
                        <div class="notification-item unread" data-type="approval">
                            <div class="notification-content">
                                <div class="notification-icon approval">‚úÖ</div>
                                <div class="notification-details">
                                    <div class="notification-title">Reserva Aprobada</div>
                                    <div class="notification-description">
                                        Tu solicitud para la Sala de Conferencias A el 22 de marzo ha sido aprobada.
                                    </div>
                                    <div class="notification-meta">
                                        <div class="notification-time">
                                            <span>üïê</span>
                                            <span>Hace 5 minutos</span>
                                        </div>
                                    </div>
                                    <div class="notification-actions">
                                        <button class="quick-action primary">Ver detalles</button>
                                        <button class="quick-action">Agregar al calendario</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="notification-item unread" data-type="reservation">
                            <div class="notification-content">
                                <div class="notification-icon reservation">üìÖ</div>
                                <div class="notification-details">
                                    <div class="notification-title">Nueva Solicitud de Reserva</div>
                                    <div class="notification-description">
                                        Mar√≠a Gonz√°lez ha solicitado reservar el Auditorio Principal para ma√±ana.
                                    </div>
                                    <div class="notification-meta">
                                        <div class="notification-time">
                                            <span>üïê</span>
                                            <span>Hace 15 minutos</span>
                                        </div>
                                    </div>
                                    <div class="notification-actions">
                                        <button class="quick-action success">Aprobar</button>
                                        <button class="quick-action danger">Rechazar</button>
                                        <button class="quick-action">Ver solicitud</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="notification-item unread" data-type="reminder">
                            <div class="notification-content">
                                <div class="notification-icon reminder">‚è∞</div>
                                <div class="notification-details">
                                    <div class="notification-title">Recordatorio de Reserva</div>
                                    <div class="notification-description">
                                        Tu reserva en el Laboratorio 3 comenzar√° en 30 minutos.
                                    </div>
                                    <div class="notification-meta">
                                        <div class="notification-time">
                                            <span>üïê</span>
                                            <span>Hace 30 minutos</span>
                                        </div>
                                    </div>
                                    <div class="notification-actions">
                                        <button class="quick-action primary">Ver ubicaci√≥n</button>
                                        <button class="quick-action">Posponer recordatorio</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="notification-item" data-type="rejection">
                            <div class="notification-content">
                                <div class="notification-icon rejection">‚ùå</div>
                                <div class="notification-details">
                                    <div class="notification-title">Reserva Rechazada</div>
                                    <div class="notification-description">
                                        Tu solicitud para la Sala de Juntas B ha sido rechazada. Motivo: Conflicto de horarios.
                                    </div>
                                    <div class="notification-meta">
                                        <div class="notification-time">
                                            <span>üïê</span>
                                            <span>Hace 1 hora</span>
                                        </div>
                                    </div>
                                    <div class="notification-actions">
                                        <button class="quick-action primary">Ver alternativas</button>
                                        <button class="quick-action">Solicitar otro horario</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="notification-item unread" data-type="maintenance">
                            <div class="notification-content">
                                <div class="notification-icon maintenance">üîß</div>
                                <div class="notification-details">
                                    <div class="notification-title">Mantenimiento Programado</div>
                                    <div class="notification-description">
                                        El Auditorio Principal estar√° fuera de servicio ma√±ana por mantenimiento.
                                    </div>
                                    <div class="notification-meta">
                                        <div class="notification-time">
                                            <span>üïê</span>
                                            <span>Hace 2 horas</span>
                                        </div>
                                    </div>
                                    <div class="notification-actions">
                                        <button class="quick-action primary">Ver espacios alternativos</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="notification-item" data-type="system">
                            <div class="notification-content">
                                <div class="notification-icon system">‚öôÔ∏è</div>
                                <div class="notification-details">
                                    <div class="notification-title">Actualizaci√≥n del Sistema</div>
                                    <div class="notification-description">
                                        Se han agregado nuevas funcionalidades al sistema de reservas.
                                    </div>
                                    <div class="notification-meta">
                                        <div class="notification-time">
                                            <span>üïê</span>
                                            <span>Hace 1 d√≠a</span>
                                        </div>
                                    </div>
                                    <div class="notification-actions">
                                        <button class="quick-action primary">Ver novedades</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="notification-item unread" data-type="reservation">
                            <div class="notification-content">
                                <div class="notification-icon reservation">üìÖ</div>
                                <div class="notification-details">
                                    <div class="notification-title">Cancelaci√≥n de Reserva</div>
                                    <div class="notification-description">
                                        Carlos Mendoza ha cancelado su reserva del Laboratorio 2 para esta tarde.
                                    </div>
                                    <div class="notification-meta">
                                        <div class="notification-time">
                                            <span>üïê</span>
                                            <span>Hace 3 horas</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="notification-item" data-type="approval">
                            <div class="notification-content">
                                <div class="notification-icon approval">‚úÖ</div>
                                <div class="notification-details">
                                    <div class="notification-title">Reserva Confirmada</div>
                                    <div class="notification-description">
                                        Has confirmado tu asistencia a la reserva del Aula Magna.
                                    </div>
                                    <div class="notification-meta">
                                        <div class="notification-time">
                                            <span>üïê</span>
                                            <span>Hace 5 horas</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="sidebar">
                    <!-- Quick Stats -->
                    <div class="sidebar-section">
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">
                            <span>üîî</span>
                            Preferencias
                        </h3>
                        
                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-name">Nuevas solicitudes</div>
                                <div class="preference-description">Cuando recibas una nueva solicitud</div>
                            </div>
                            <div class="preference-toggles">
                                <button class="toggle-btn active">üìß</button>
                                <button class="toggle-btn active">üîî</button>
                                <button class="toggle-btn">üì±</button>
                            </div>
                        </div>

                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-name">Reservas aprobadas</div>
                                <div class="preference-description">Confirmaci√≥n de aprobaci√≥n</div>
                            </div>
                            <div class="preference-toggles">
                                <button class="toggle-btn active">üìß</button>
                                <button class="toggle-btn active">üîî</button>
                                <button class="toggle-btn">üì±</button>
                            </div>
                        </div>

                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-name">Reservas rechazadas</div>
                                <div class="preference-description">Notificaci√≥n de rechazo</div>
                            </div>
                            <div class="preference-toggles">
                                <button class="toggle-btn active">üìß</button>
                                <button class="toggle-btn">üîî</button>
                                <button class="toggle-btn">üì±</button>
                            </div>
                        </div>

                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-name">Recordatorios</div>
                                <div class="preference-description">Antes de tus reservas</div>
                            </div>
                            <div class="preference-toggles">
                                <button class="toggle-btn">üìß</button>
                                <button class="toggle-btn active">üîî</button>
                                <button class="toggle-btn active">üì±</button>
                            </div>
                        </div>

                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-name">Mantenimiento</div>
                                <div class="preference-description">Espacios fuera de servicio</div>
                            </div>
                            <div class="preference-toggles">
                                <button class="toggle-btn active">üìß</button>
                                <button class="toggle-btn active">üîî</button>
                                <button class="toggle-btn">üì±</button>
                            </div>
                        </div>

                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-name">Actualizaciones</div>
                                <div class="preference-description">Novedades del sistema</div>
                            </div>
                            <div class="preference-toggles">
                                <button class="toggle-btn active">üìß</button>
                                <button class="toggle-btn">üîî</button>
                                <button class="toggle-btn">üì±</button>
                            </div>
                        </div>
                    </div>

                    <!-- Frequency Settings -->
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">
                            <span>‚è∞</span>
                            Frecuencia
                        </h3>
                        
                        <div class="frequency-setting">
                            <div class="frequency-label">Resumen de notificaciones</div>
                            <div class="frequency-options">
                                <label class="frequency-option">
                                    <input type="radio" name="frequency" value="immediate" checked>
                                    <span>Inmediata</span>
                                </label>
                                <label class="frequency-option">
                                    <input type="radio" name="frequency" value="daily">
                                    <span>Resumen diario</span>
                                </label>
                                <label class="frequency-option">
                                    <input type="radio" name="frequency" value="weekly">
                                    <span>Resumen semanal</span>
                                </label>
                            </div>
                        </div>

                        <!-- Do Not Disturb -->
                        <div class="dnd-section">
                            <div class="dnd-header">
                                <div class="dnd-toggle">
                                    <span>üò¥ No molestar</span>
                                    <div class="switch" id="dndSwitch"></div>
                                </div>
                            </div>
                            <div class="time-inputs">
                                <input type="time" class="time-input" value="22:00" placeholder="Desde">
                                <input type="time" class="time-input" value="08:00" placeholder="Hasta">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <script>
            // Sample notification data
            const notifications = [
                {
                    id: 1,
                    type: 'approval',
                    title: 'Reserva Aprobada',
                    description: 'Tu solicitud para la Sala de Conferencias A el 22 de marzo ha sido aprobada.',
                    time: 'Hace 5 minutos',
                    unread: true,
                    actions: ['Ver detalles', 'Agregar al calendario']
                },
                {
                    id: 2,
                    type: 'reservation',
                    title: 'Nueva Solicitud de Reserva',
                    description: 'Mar√≠a Gonz√°lez ha solicitado reservar el Auditorio Principal para ma√±ana.',
                    time: 'Hace 15 minutos',
                    unread: true,
                    actions: ['Aprobar', 'Rechazar', 'Ver solicitud']
                },
                {
                    id: 3,
                    type: 'reminder',
                    title: 'Recordatorio de Reserva',
                    description: 'Tu reserva en el Laboratorio 3 comenzar√° en 30 minutos.',
                    time: 'Hace 30 minutos',
                    unread: true,
                    actions: ['Ver ubicaci√≥n', 'Posponer recordatorio']
                },
                {
                    id: 4,
                    type: 'rejection',
                    title: 'Reserva Rechazada',
                    description: 'Tu solicitud para la Sala de Juntas B ha sido rechazada. Motivo: Conflicto de horarios.',
                    time: 'Hace 1 hora',
                    unread: false,
                    actions: ['Ver alternativas', 'Solicitar otro horario']
                },
                {
                    id: 5,
                    type: 'maintenance',
                    title: 'Mantenimiento Programado',
                    description: 'El Auditorio Principal estar√° fuera de servicio ma√±ana por mantenimiento.',
                    time: 'Hace 2 horas',
                    unread: true,
                    actions: ['Ver espacios alternativos']
                },
                {
                    id: 6,
                    type: 'system',
                    title: 'Actualizaci√≥n del Sistema',
                    description: 'Se han agregado nuevas funcionalidades al sistema de reservas.',
                    time: 'Hace 1 d√≠a',
                    unread: false,
                    actions: ['Ver novedades']
                }
            ];

            // Filter functionality
            const filterTabs = document.querySelectorAll('.filter-tab');
            const notificationsList = document.getElementById('notificationsList');

            filterTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    filterTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filter = this.dataset.filter;
                    filterNotifications(filter);
                });
            });

            function filterNotifications(filter) {
                const items = document.querySelectorAll('.notification-item');
                
                items.forEach(item => {
                    const type = item.dataset.type;
                    const isUnread = item.classList.contains('unread');
                    
                    let show = true;
                    
                    switch(filter) {
                        case 'unread':
                            show = isUnread;
                            break;
                        case 'reservations':
                            show = type === 'reservation' || type === 'approval' || type === 'rejection';
                            break;
                        case 'system':
                            show = type === 'system' || type === 'maintenance';
                            break;
                        case 'reminders':
                            show = type === 'reminder';
                            break;
                        case 'all':
                        default:
                            show = true;
                            break;
                    }
                    
                    item.style.display = show ? 'block' : 'none';
                });
            }

            // Mark as read functionality
            const notificationItems = document.querySelectorAll('.notification-item');
            notificationItems.forEach(item => {
                item.addEventListener('click', function() {
                    this.classList.remove('unread');
                    updateBadges();
                });
            });

            // Header actions
            document.getElementById('markAllRead').addEventListener('click', function() {
                notificationItems.forEach(item => {
                    item.classList.remove('unread');
                });
                updateBadges();
                alert('Todas las notificaciones han sido marcadas como le√≠das');
            });

            document.getElementById('clearOld').addEventListener('click', function() {
                if (confirm('¬øEst√°s seguro de que deseas eliminar las notificaciones antiguas?')) {
                    // In real implementation, this would remove old notifications
                    alert('Notificaciones antiguas eliminadas');
                }
            });

            document.getElementById('openSettings').addEventListener('click', function() {
                alert('Abriendo configuraci√≥n avanzada de notificaciones...');
            });

            // Update notification badges
            function updateBadges() {
                const unreadCount = document.querySelectorAll('.notification-item.unread').length;
                const totalCount = document.querySelectorAll('.notification-item').length;
                
                document.querySelector('.notification-count').textContent = unreadCount;
                document.querySelector('.filter-tab[data-filter="all"] .badge').textContent = totalCount;
                document.querySelector('.filter-tab[data-filter="unread"] .badge').textContent = unreadCount;
                
                // Update sidebar stats
                document.querySelector('.stat-item .stat-value').textContent = unreadCount;
                document.querySelectorAll('.stat-item .stat-value')[1].textContent = totalCount;
            }

            // Preference toggles
            const toggleBtns = document.querySelectorAll('.toggle-btn');
            toggleBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    this.classList.toggle('active');
                });
            });

            // Do not disturb toggle
            const dndSwitch = document.getElementById('dndSwitch');
            dndSwitch.addEventListener('click', function() {
                this.classList.toggle('active');
            });

            // Quick actions
            const quickActions = document.querySelectorAll('.quick-action');
            quickActions.forEach(action => {
                action.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    const actionText = this.textContent;
                    
                    // Simulate different actions
                    switch(actionText) {
                        case 'Aprobar':
                            this.textContent = 'Aprobando...';
                            this.disabled = true;
                            setTimeout(() => {
                                alert('Reserva aprobada exitosamente');
                                this.parentElement.parentElement.parentElement.parentElement.remove();
                                updateBadges();
                            }, 1500);
                            break;
                        case 'Rechazar':
                            if (confirm('¬øEst√°s seguro de que deseas rechazar esta solicitud?')) {
                                alert('Solicitud rechazada');
                                this.parentElement.parentElement.parentElement.parentElement.remove();
                                updateBadges();
                            }
                            break;
                        case 'Ver detalles':
                            alert('Abriendo detalles de la reserva...');
                            break;
                        case 'Ver solicitud':
                            alert('Abriendo vista detallada de la solicitud...');
                            break;
                        case 'Agregar al calendario':
                            alert('Agregando evento al calendario...');
                            break;
                        case 'Ver ubicaci√≥n':
                            alert('Mostrando ubicaci√≥n en el mapa...');
                            break;
                        case 'Ver alternativas':
                            alert('Mostrando espacios alternativos disponibles...');
                            break;
                        default:
                            alert(`Ejecutando acci√≥n: ${actionText}`);
                    }
                });
            });

            // Frequency radio buttons
            const frequencyOptions = document.querySelectorAll('input[name="frequency"]');
            frequencyOptions.forEach(option => {
                option.addEventListener('change', function() {
                    console.log(`Frecuencia cambiada a: ${this.value}`);
                });
            });

            // Real-time notification simulation
            function simulateNewNotification() {
                const newNotification = document.createElement('div');
                newNotification.className = 'notification-item unread';
                newNotification.dataset.type = 'reservation';
                
                newNotification.innerHTML = `
                    <div class="notification-content">
                        <div class="notification-icon reservation">üìÖ</div>
                        <div class="notification-details">
                            <div class="notification-title">Nueva Solicitud</div>
                            <div class="notification-description">
                                Se ha recibido una nueva solicitud de reserva.
                            </div>
                            <div class="notification-meta">
                                <div class="notification-time">
                                    <span>üïê</span>
                                    <span>Ahora</span>
                                </div>
                            </div>
                            <div class="notification-actions">
                                <button class="quick-action success">Aprobar</button>
                                <button class="quick-action danger">Rechazar</button>
                                <button class="quick-action">Ver solicitud</button>
                            </div>
                        </div>
                    </div>
                `;
                
                // Insert at the top
                notificationsList.insertBefore(newNotification, notificationsList.firstChild);
                
                // Add click handler
                newNotification.addEventListener('click', function() {
                    this.classList.remove('unread');
                    updateBadges();
                });
                
                // Add quick action handlers
                newNotification.querySelectorAll('.quick-action').forEach(action => {
                    action.addEventListener('click', function(e) {
                        e.stopPropagation();
                        alert(`Ejecutando: ${this.textContent}`);
                    });
                });
                
                updateBadges();
                
                // Show brief highlight animation
                newNotification.style.backgroundColor = '#fef3c7';
                setTimeout(() => {
                    newNotification.style.backgroundColor = '';
                }, 2000);
            }

            // Simulate new notifications every 30 seconds (for demo)
            setInterval(simulateNewNotification, 30000);

            // Initialize
            updateBadges();
        </script>
    </body>
    </html>="sidebar-title">
                            <span>üìä</span>
                            Resumen
                        </h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value">8</div>
                                <div class="stat-label">Sin leer</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">12</div>
                                <div class="stat-label">Total</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">3</div>
                                <div class="stat-label">Pendientes</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">2</div>
                                <div class="stat-label">Urgentes</div>
                            </div>
                        </div>
                    </div>

                    <!-- Notification Preferences -->
                    <div class="sidebar-section">
                        <h3 class
============================================================


===== reportes.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportes - Sistema de Reservas</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f9fafb;
            color: #111827;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0 24px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: #2563eb;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav-menu {
            display: flex;
            gap: 32px;
        }

        .nav-item {
            color: #6b7280;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-item:hover, .nav-item.active {
            background: #2563eb;
            color: white;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            padding: 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: #6b7280;
            font-size: 16px;
        }

        /* Report Types Section */
        .report-types {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .report-tabs {
            display: flex;
            gap: 2px;
            background: #f3f4f6;
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 24px;
        }

        .report-tab {
            flex: 1;
            padding: 12px 16px;
            border: none;
            background: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .report-tab.active {
            background: white;
            color: #2563eb;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .template-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .template-card:hover {
            border-color: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .template-card.selected {
            border-color: #2563eb;
            background: #eff6ff;
        }

        .template-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .template-icon {
            width: 40px;
            height: 40px;
            background: #f3f4f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .template-card.selected .template-icon {
            background: #2563eb;
            color: white;
        }

        .template-name {
            font-size: 16px;
            font-weight: 600;
            color: #111827;
        }

        .template-description {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.4;
        }

        /* Report Configuration */
        .report-config {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .config-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .config-label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .config-select, .config-input {
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            transition: border-color 0.3s ease;
        }

        .config-select:focus, .config-input:focus {
            outline: none;
            border-color: #2563eb;
        }

        .metrics-section {
            border-top: 1px solid #e5e7eb;
            padding-top: 20px;
        }

        .metrics-title {
            font-size: 16px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 16px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .metric-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .metric-checkbox:hover {
            background: #f9fafb;
        }

        .metric-checkbox input[type="checkbox"] {
            width: 16px;
            height: 16px;
        }

        /* Preview Section */
        .report-preview {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .preview-actions {
            display: flex;
            gap: 12px;
        }

        .preview-btn {
            padding: 8px 16px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .preview-btn:hover {
            border-color: #2563eb;
            color: #2563eb;
        }

        .preview-btn.active {
            border-color: #2563eb;
            background: #2563eb;
            color: white;
        }

        /* KPI Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .kpi-card {
            background: #f9fafb;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .kpi-value {
            font-size: 32px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 4px;
        }

        .kpi-label {
            font-size: 14px;
            color: #6b7280;
            font-weight: 500;
        }

        .kpi-change {
            font-size: 12px;
            margin-top: 4px;
        }

        .kpi-change.positive {
            color: #10b981;
        }

        .kpi-change.negative {
            color: #dc2626;
        }

        /* Charts */
        .charts-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }

        .chart-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            height: 400px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 16px;
        }

        /* Data Table */
        .data-table {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .table-header {
            background: #f9fafb;
            padding: 16px 20px;
            border-bottom: 1px solid #e5e7eb;
        }

        .table-title {
            font-size: 16px;
            font-weight: 600;
            color: #111827;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            text-align: left;
            padding: 12px 20px;
            border-bottom: 1px solid #e5e7eb;
        }

        .table th {
            background: #f9fafb;
            font-weight: 600;
            color: #374151;
            font-size: 12px;
            text-transform: uppercase;
        }

        /* Export Options */
        .export-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .export-option {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .export-option:hover {
            border-color: #2563eb;
        }

        .export-option.selected {
            border-color: #2563eb;
            background: #eff6ff;
        }

        .export-icon {
            font-size: 32px;
            margin-bottom: 8px;
            display: block;
        }

        .export-name {
            font-weight: 600;
            color: #111827;
            margin-bottom: 4px;
        }

        .export-description {
            font-size: 12px;
            color: #6b7280;
        }

        .pdf-options {
            background: #f9fafb;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
            display: none;
        }

        .pdf-options.visible {
            display: block;
        }

        .pdf-option {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .pdf-option:last-child {
            margin-bottom: 0;
        }

        .export-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .export-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .export-btn.primary {
            background: #10b981;
            color: white;
        }

        .export-btn.primary:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        .export-btn.secondary {
            background: #2563eb;
            color: white;
        }

        .export-btn.secondary:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .export-btn.outline {
            background: white;
            color: #6b7280;
            border: 2px solid #e5e7eb;
        }

        .export-btn.outline:hover {
            border-color: #2563eb;
            color: #2563eb;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                padding: 16px;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .export-actions {
                flex-direction: column;
            }

            .report-tabs {
                flex-wrap: wrap;
            }

            .report-tab {
                min-width: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo-section">
            <div class="logo">SR</div>
        </div>
        
        <nav class="nav-menu">
            <a href="#" class="nav-item">Dashboard</a>
            <a href="#" class="nav-item">Solicitudes</a>
            <a href="#" class="nav-item">Espacios</a>
            <a href="#" class="nav-item">Usuarios</a>
            <a href="#" class="nav-item active">Reportes</a>
        </nav>
        
        <div class="user-menu">
            <div class="user-avatar">AD</div>
            <span>Admin</span>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">Reportes y Analytics</h1>
            <p class="page-subtitle">Genera reportes detallados sobre el uso de espacios y gesti√≥n de reservas</p>
        </div>

        <!-- Report Types -->
        <div class="report-types">
            <h2 class="section-title">
                <span>üìä</span>
                Tipo de Reporte
            </h2>
            
            <div class="report-tabs">
                <button class="report-tab active" data-type="ocupacion">Ocupaci√≥n</button>
                <button class="report-tab" data-type="usuarios">Usuarios</button>
                <button class="report-tab" data-type="espacios">Espacios</button>
                <button class="report-tab" data-type="solicitudes">Solicitudes</button>
            </div>

            <div class="templates-grid">
                <div class="template-card selected" data-template="monthly">
                    <div class="template-header">
                        <div class="template-icon">üìÖ</div>
                        <div class="template-name">Reporte Mensual</div>
                    </div>
                    <p class="template-description">
                        Resumen completo de actividad mensual con m√©tricas de ocupaci√≥n, usuarios activos y tendencias.
                    </p>
                </div>

                <div class="template-card" data-template="space-usage">
                    <div class="template-header">
                        <div class="template-icon">üè¢</div>
                        <div class="template-name">Ocupaci√≥n por Espacio</div>
                    </div>
                    <p class="template-description">
                        An√°lisis detallado del uso de cada espacio con porcentajes de ocupaci√≥n y patrones de uso.
                    </p>
                </div>

                <div class="template-card" data-template="active-users">
                    <div class="template-header">
                        <div class="template-icon">üë•</div>
                        <div class="template-name">Usuarios M√°s Activos</div>
                    </div>
                    <p class="template-description">
                        Ranking de usuarios por n√∫mero de reservas y frecuencia de uso del sistema.
                    </p>
                </div>

                <div class="template-card" data-template="underutilized">
                    <div class="template-header">
                        <div class="template-icon">üìâ</div>
                        <div class="template-name">Espacios Subutilizados</div>
                    </div>
                    <p class="template-description">
                        Identificaci√≥n de espacios con baja ocupaci√≥n y oportunidades de optimizaci√≥n.
                    </p>
                </div>
            </div>
        </div>

        <!-- Report Configuration -->
        <div class="report-config">
            <h2 class="section-title">
                <span>‚öôÔ∏è</span>
                Configuraci√≥n del Reporte
            </h2>
            
            <div class="config-grid">
                <div class="config-group">
                    <label class="config-label">üìÖ Per√≠odo</label>
                    <select class="config-select" id="periodSelect">
                        <option value="last-week">√öltima semana</option>
                        <option value="last-month" selected>√öltimo mes</option>
                        <option value="last-quarter">√öltimo trimestre</option>
                        <option value="last-year">√öltimo a√±o</option>
                        <option value="custom">Personalizado</option>
                    </select>
                </div>

                <div class="config-group">
                    <label class="config-label">üìç Espacios</label>
                    <select class="config-select" id="spaceSelect">
                        <option value="all" selected>Todos los espacios</option>
                        <option value="building-a">Edificio A</option>
                        <option value="building-b">Edificio B</option>
                        <option value="building-c">Edificio C</option>
                        <option value="specific">Espacios espec√≠ficos</option>
                    </select>
                </div>

                <div class="config-group">
                    <label class="config-label">üë§ Usuarios</label>
                    <select class="config-select" id="userSelect">
                        <option value="all" selected>Todos los usuarios</option>
                        <option value="department">Por departamento</option>
                        <option value="role">Por rol</option>
                        <option value="active">Solo activos</option>
                    </select>
                </div>

                <div class="config-group">
                    <label class="config-label">üìä Formato de datos</label>
                    <select class="config-select" id="formatSelect">
                        <option value="summary" selected>Resumen ejecutivo</option>
                        <option value="detailed">Detallado</option>
                        <option value="raw">Datos en bruto</option>
                    </select>
                </div>
            </div>

            <div class="metrics-section">
                <h3 class="metrics-title">M√©tricas a Incluir</h3>
                <div class="metrics-grid">
                    <label class="metric-checkbox">
                        <input type="checkbox" checked>
                        <span>N√∫mero de reservas</span>
                    </label>
                    <label class="metric-checkbox">
                        <input type="checkbox" checked>
                        <span>Horas de ocupaci√≥n</span>
                    </label>
                    <label class="metric-checkbox">
                        <input type="checkbox" checked>
                        <span>Porcentaje de utilizaci√≥n</span>
                    </label>
                    <label class="metric-checkbox">
                        <input type="checkbox">
                        <span>Cancelaciones</span>
                    </label>
                    <label class="metric-checkbox">
                        <input type="checkbox">
                        <span>Solicitudes rechazadas</span>
                    </label>
                    <label class="metric-checkbox">
                        <input type="checkbox">
                        <span>Tiempo promedio de uso</span>
                    </label>
                    <label class="metric-checkbox">
                        <input type="checkbox">
                        <span>Usuarios √∫nicos</span>
                    </label>
                    <label class="metric-checkbox">
                        <input type="checkbox">
                        <span>Tendencias temporales</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Preview Section -->
        <div class="report-preview">
            <div class="preview-header">
                <h2 class="section-title">
                    <span>üëÅÔ∏è</span>
                    Vista Previa del Reporte
                </h2>
                <div class="preview-actions">
                    <button class="preview-btn active">üìä Gr√°ficos</button>
                    <button class="preview-btn">üìã Tabla</button>
                    <button class="preview-btn">üìà Tendencias</button>
                </div>
            </div>

            <!-- KPI Summary -->
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-value">1,247</div>
                    <div class="kpi-label">Total Reservas</div>
                    <div class="kpi-change positive">‚Üó +12% vs mes anterior</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value">78%</div>
                    <div class="kpi-label">Ocupaci√≥n Promedio</div>
                    <div class="kpi-change positive">‚Üó +5% vs mes anterior</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value">2,890</div>
                    <div class="kpi-label">Horas Utilizadas</div>
                    <div class="kpi-change positive">‚Üó +8% vs mes anterior</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value">342</div>
                    <div class="kpi-label">Usuarios Activos</div>
                    <div class="kpi-change negative">‚Üò -3% vs mes anterior</div>
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-title">Ocupaci√≥n por D√≠as de la Semana</div>
                    <canvas id="weeklyChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">Top 5 Espacios M√°s Utilizados</div>
                    <canvas id="spacesChart"></canvas>
                </div>
            </div>

            <!-- Data Table -->
            <div class="data-table">
                <div class="table-header">
                    <h3 class="table-title">Resumen por Espacio</h3>
                </div>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Espacio</th>
                            <th>Reservas</th>
                            <th>Horas</th>
                            <th>Ocupaci√≥n</th>
                            <th>Usuarios</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Sala de Conferencias A</td>
                            <td>156</td>
                            <td>312h</td>
                            <td>87%</td>
                            <td>45</td>
                        </tr>
                        <tr>
                            <td>Auditorio Principal</td>
                            <td>89</td>
                            <td>445h</td>
                            <td>92%</td>
                            <td>78</td>
                        </tr>
                        <tr>
                            <td>Laboratorio 3</td>
                            <td>134</td>
                            <td>268h</td>
                            <td>75%</td>
                            <td>56</td>
                        </tr>
                        <tr>
                            <td>Sala de Juntas B</td>
                            <td>98</td>
                            <td>147h</td>
                            <td>65%</td>
                            <td>32</td>
                        </tr>
                        <tr>
                            <td>Aula Magna</td>
                            <td>67</td>
                            <td>201h</td>
                            <td>58%</td>
                            <td>41</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Export Options -->
        <div class="export-section">
            <h2 class="section-title">
                <span>üì§</span>
                Opciones de Exportaci√≥n
            </h2>

            <div class="export-options">
                <div class="export-option selected" data-format="pdf">
                    <span class="export-icon">üìÑ</span>
                    <div class="export-name">PDF</div>
                    <div class="export-description">Reporte completo con gr√°ficos</div>
                </div>
                <div class="export-option" data-format="excel">
                    <span class="export-icon">üìä</span>
                    <div class="export-name">Excel</div>
                    <div class="export-description">Datos con tablas din√°micas</div>
                </div>
                <div class="export-option" data-format="csv">
                    <span class="export-icon">üìã</span>
                    <div class="export-name">CSV</div>
                    <div class="export-description">Datos en bruto para an√°lisis</div>
                </div>
            </div>

            <div class="pdf-options visible" id="pdfOptions">
                <div class="pdf-option">
                    <input type="checkbox" checked id="includeCharts">
                    <label for="includeCharts">Incluir gr√°ficos interactivos</label>
                </div>
                <div class="pdf-option">
                    <input type="checkbox" id="landscape">
                    <label for="landscape">Orientaci√≥n horizontal</label>
                </div>
                <div class="pdf-option">
                    <input type="checkbox" checked id="includeLogo">
                    <label for="includeLogo">Incluir logo institucional</label>
                </div>
                <div class="pdf-option">
                    <input type="checkbox" id="watermark">
                    <label for="watermark">Marca de agua</label>
                </div>
            </div>

            <div class="export-actions">
                <button class="export-btn outline" id="saveConfig">
                    üíæ Guardar Configuraci√≥n
                </button>
                <button class="export-btn secondary" id="scheduleReport">
                    üìÖ Programar Env√≠o
                </button>
                <button class="export-btn primary" id="generateReport">
                    üöÄ Generar Reporte
                </button>
            </div>
        </div>
    </main>

    <script>
        // Chart.js configurations
        const weeklyCtx = document.getElementById('weeklyChart').getContext('2d');
        const spacesCtx = document.getElementById('spacesChart').getContext('2d');

        // Weekly occupancy chart
        new Chart(weeklyCtx, {
            type: 'line',
            data: {
                labels: ['Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado', 'Domingo'],
                datasets: [{
                    label: 'Ocupaci√≥n (%)',
                    data: [85, 92, 78, 88, 95, 45, 12],
                    borderColor: '#2563eb',
                    backgroundColor: 'rgba(37, 99, 235, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100
                    }
                }
            }
        });

        // Spaces usage chart
        new Chart(spacesCtx, {
            type: 'doughnut',
            data: {
                labels: ['Sala Conf. A', 'Auditorio', 'Lab 3', 'Sala Juntas B', 'Otros'],
                datasets: [{
                    data: [25, 20, 18, 15, 22],
                    backgroundColor: [
                        '#2563eb',
                        '#10b981',
                        '#f59e0b',
                        '#ef4444',
                        '#8b5cf6'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // Template selection
        const templateCards = document.querySelectorAll('.template-card');
        templateCards.forEach(card => {
            card.addEventListener('click', function() {
                templateCards.forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        // Report tabs
        const reportTabs = document.querySelectorAll('.report-tab');
        reportTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                reportTabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Export format selection
        const exportOptions = document.querySelectorAll('.export-option');
        const pdfOptions = document.getElementById('pdfOptions');

        exportOptions.forEach(option => {
            option.addEventListener('click', function() {
                exportOptions.forEach(o => o.classList.remove('selected'));
                this.classList.add('selected');
                
                const format = this.dataset.format;
                if (format === 'pdf') {
                    pdfOptions.classList.add('visible');
                } else {
                    pdfOptions.classList.remove('visible');
                }
            });
        });

        // Preview actions
        const previewBtns = document.querySelectorAll('.preview-btn');
        previewBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                previewBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Export actions
        document.getElementById('generateReport').addEventListener('click', function() {
            this.textContent = '‚è≥ Generando...';
            this.disabled = true;
            
            setTimeout(() => {
                alert('¬°Reporte generado exitosamente! Se ha iniciado la descarga.');
                this.textContent = 'üöÄ Generar Reporte';
                this.disabled = false;
            }, 3000);
        });

        document.getElementById('scheduleReport').addEventListener('click', function() {
            alert('Abriendo configuraci√≥n de programaci√≥n de reportes...');
        });

        document.getElementById('saveConfig').addEventListener('click', function() {
            alert('Configuraci√≥n guardada como plantilla personalizada');
        });

        // Period selection handler
        document.getElementById('periodSelect').addEventListener('change', function() {
            if (this.value === 'custom') {
                // Show custom date inputs (would be implemented in real app)
                console.log('Show custom date range picker');
            }
        });
    </script>
</body>
</html>
============================================================


===== reservas.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial de Reservas - Sistema de Reservas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f9fafb;
            color: #111827;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0 24px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: #2563eb;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .logo-text {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
        }

        .nav-menu {
            display: flex;
            gap: 32px;
        }

        .nav-item {
            color: #6b7280;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-item:hover, .nav-item.active {
            background: #2563eb;
            color: white;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: background 0.3s ease;
            position: relative;
        }

        .user-menu:hover {
            background: #f3f4f6;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .user-name {
            font-weight: 500;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            min-width: 200px;
            display: none;
            z-index: 1000;
        }

        .dropdown-menu.show {
            display: block;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            text-decoration: none;
            color: #374151;
            transition: background 0.3s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
        }

        .dropdown-item:hover {
            background: #f9fafb;
        }

        .dropdown-item.logout {
            color: #dc2626;
            border-top: 1px solid #e5e7eb;
        }

        /* Main Content */
        .main-content {
            padding: 24px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: #6b7280;
            font-size: 16px;
        }

        /* Filters */
        .filters-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .filter-label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .filter-select, .filter-input {
            padding: 10px 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            transition: border-color 0.3s ease;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: #2563eb;
        }

        .status-tabs {
            display: flex;
            background: #f3f4f6;
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 16px;
        }

        .status-tab {
            flex: 1;
            padding: 8px 16px;
            border: none;
            background: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .status-tab.active {
            background: white;
            color: #2563eb;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* Reservations List */
        .reservations-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .reservation-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border-left: 4px solid;
        }

        .reservation-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .reservation-card.approved {
            border-left-color: #10b981;
        }

        .reservation-card.pending {
            border-left-color: #f59e0b;
        }

        .reservation-card.rejected {
            border-left-color: #dc2626;
        }

        .reservation-card.cancelled {
            border-left-color: #6b7280;
        }

        .reservation-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .reservation-info {
            flex: 1;
        }

        .reservation-title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 4px;
        }

        .reservation-datetime {
            font-size: 16px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .reservation-user {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #374151;
            font-size: 14px;
        }

        .reservation-meta {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 8px;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-badge.approved {
            background: #d1fae5;
            color: #065f46;
        }

        .status-badge.pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-badge.rejected {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-badge.cancelled {
            background: #f3f4f6;
            color: #6b7280;
        }

        .reservation-id {
            font-size: 12px;
            color: #9ca3af;
        }

        .reservation-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
            padding-top: 16px;
            border-top: 1px solid #e5e7eb;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .detail-icon {
            color: #6b7280;
            font-size: 16px;
        }

        .detail-label {
            font-weight: 500;
            color: #374151;
            font-size: 14px;
        }

        .detail-value {
            color: #6b7280;
            font-size: 14px;
        }

        .reservation-actions {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        .action-btn {
            padding: 8px 16px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
        }

        .action-btn:hover {
            border-color: #2563eb;
            color: #2563eb;
        }

        .action-btn.primary {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .action-btn.primary:hover {
            background: #1d4ed8;
        }

        .action-btn.danger {
            background: #dc2626;
            color: white;
            border-color: #dc2626;
        }

        .action-btn.danger:hover {
            background: #b91c1c;
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .action-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 8px;
        }

        .empty-state-text {
            color: #6b7280;
            margin-bottom: 24px;
        }

        .empty-state-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: #2563eb;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .empty-state-btn:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 0 16px;
            }

            .nav-menu {
                display: none;
            }

            .main-content {
                padding: 16px;
            }

            .reservation-header {
                flex-direction: column;
                gap: 12px;
            }

            .reservation-meta {
                align-items: flex-start;
            }

            .reservation-details {
                grid-template-columns: 1fr;
            }

            .reservation-actions {
                justify-content: flex-start;
                flex-wrap: wrap;
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo-section">
            <div class="logo">SR</div>
            <div class="logo-text">Sistema de Reservas</div>
        </div>
        
        <nav class="nav-menu">
            <a href="{% url 'dashboard' %}" class="nav-item">Dashboard</a>
            <a href="{% url 'crear_reserva' %}" class="nav-item">Reservar</a>
            <a href="{% url 'reservas' %}" class="nav-item active">Historial</a>
            <a href="{% url 'calendario' %}" class="nav-item">Calendario</a>
            <a href="{% url 'espacios' %}" class="nav-item">Espacios</a>
            <a href="{% url 'notificaciones' %}" class="nav-item">Notificaciones</a>
        </nav>
        <div class="user-menu">

</div>

        <div class="user-menu" id="userMenu">
            <div class="user-avatar">
                {% if user.first_name and user.last_name %}
                    {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
                {% else %}
                    {{ user.username|first|upper }}
                {% endif %}
            </div>
            <span class="user-name">
                {% if user.first_name and user.last_name %}
                    {{ user.first_name }} {{ user.last_name }}
                {% else %}
                    {{ user.username }}
                {% endif %}
            </span>
            
            <!-- Dropdown Menu -->
            <div class="dropdown-menu" id="dropdownMenu">
                <div class="dropdown-item">
                    <span>üë§</span>
                    Mi Perfil
                </div>
                <div class="dropdown-item">
                    <span>‚öôÔ∏è</span>
                    Configuraci√≥n
                </div>
                <a href="{% url 'logout' %}" class="dropdown-item logout">
                    <span>üö™</span>
                    Cerrar Sesi√≥n
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">üìã Historial de Reservas</h1>
            <p class="page-subtitle">
                Gestiona y revisa todas tus solicitudes de reserva
            </p>
        </div>

        <!-- Filters -->
        <div class="filters-section">
            <div class="status-tabs">
                <button class="status-tab active" data-status="all">Todas</button>
                <button class="status-tab" data-status="approved">Aprobadas</button>
                <button class="status-tab" data-status="pending">Pendientes</button>
                <button class="status-tab" data-status="rejected">Rechazadas</button>
                <button class="status-tab" data-status="cancelled">Canceladas</button>
            </div>

            <div class="filters-grid">
                <div class="filter-group">
                    <label class="filter-label">üìÖ Fecha desde</label>
                    <input type="date" class="filter-input" id="dateFrom">
                </div>

                <div class="filter-group">
                    <label class="filter-label">üìÖ Fecha hasta</label>
                    <input type="date" class="filter-input" id="dateTo">
                </div>

                <div class="filter-group">
                    <label class="filter-label">üè¢ Espacio</label>
                    <select class="filter-select" id="spaceFilter">
                        <option value="">Todos los espacios</option>
                        {% for reserva in reservas %}
                            {% ifchanged reserva.espacio.nombre %}
                                <option value="{{ reserva.espacio.id }}">{{ reserva.espacio.nombre }}</option>
                            {% endifchanged %}
                        {% endfor %}
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">üîç Buscar</label>
                    <input type="text" class="filter-input" id="searchInput" placeholder="Buscar por ID o prop√≥sito...">
                </div>
            </div>
        </div>

        <!-- Reservations List -->
        <div class="reservations-list" id="reservationsList">
            {% for reserva in reservas %}
            <div class="reservation-card {{ reserva.estado|lower }}" 
                 data-status="{{ reserva.estado|lower }}" 
                 data-space="{{ reserva.espacio.id }}"
                 data-date="{{ reserva.fecha_reserva|date:'Y-m-d' }}"
                 data-id="{{ reserva.id }}"
                 data-purpose="{{ reserva.proposito|lower }}">
                <div class="reservation-header">
                    <div class="reservation-info">
                        <div class="reservation-title">{{ reserva.espacio.nombre }}</div>
                        <div class="reservation-datetime">
                            üìÖ {{ reserva.fecha_reserva|date:"l, d M Y" }} ‚Ä¢ ‚è∞ {{ reserva.hora_inicio|time:"H:i" }} - {{ reserva.hora_fin|time:"H:i" }}
                        </div>
                        <div class="reservation-user">
                            <span>üë§ Solicitante: T√∫</span>
                        </div>
                    </div>
                    <div class="reservation-meta">
                        <span class="status-badge {{ reserva.estado|lower }}">
                            {{ reserva.estado }}
                        </span>
                        <span class="reservation-id">#{{ reserva.id }}</span>
                    </div>
                </div>

                <div class="reservation-details">
                    <div class="detail-item">
                        <span class="detail-icon">üë•</span>
                        <span class="detail-label">Asistentes:</span>
                        <span class="detail-value">{{ reserva.num_asistentes }} personas</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">‚è±Ô∏è</span>
                        <span class="detail-label">Duraci√≥n:</span>
                        <span class="detail-value">
                            {% with inicio=reserva.hora_inicio fin=reserva.hora_fin %}
                                {{ fin.hour|add:fin.minute|divisibleby:60 }} horas
                            {% endwith %}
                        </span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">üìù</span>
                        <span class="detail-label">Solicitado:</span>
                        <span class="detail-value">{{ reserva.fecha_solicitud|date:"d M, H:i" }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">üéØ</span>
                        <span class="detail-label">Prop√≥sito:</span>
                        <span class="detail-value">{{ reserva.proposito }}</span>
                    </div>
                </div>

                <div class="reservation-actions">
                    <button class="action-btn" onclick="verDetalles({{ reserva.id }})">
                        <span>üëÅÔ∏è</span>
                        Ver Detalles
                    </button>
                    {% if reserva.estado == 'Pendiente' or reserva.estado == 'Aprobada' %}
                    <button class="action-btn danger" onclick="cancelarReserva({{ reserva.id }})">
                        <span>‚ùå</span>
                        Cancelar
                    </button>
                    {% endif %}
                    {% if reserva.estado == 'Aprobada' %}
                    <button class="action-btn primary">
                        <span>üìÖ</span>
                        Agregar al Calendario
                    </button>
                    {% endif %}
                </div>
            </div>
            {% empty %}
            <div class="empty-state">
                <div class="empty-state-icon">üìã</div>
                <h2 class="empty-state-title">No hay reservas encontradas</h2>
                <p class="empty-state-text">
                    A√∫n no has realizado ninguna reserva.
                </p>
                <a href="{% url 'crear_reserva' %}" class="empty-state-btn">
                    <span>‚ûï</span>
                    Crear Nueva Reserva
                </a>
            </div>
            {% endfor %}
        </div>
    </main>

    <script>
        // User menu dropdown functionality
        const userMenu = document.getElementById('userMenu');
        const dropdownMenu = document.getElementById('dropdownMenu');

        if (userMenu && dropdownMenu) {
            userMenu.addEventListener('click', function(e) {
                e.stopPropagation();
                dropdownMenu.classList.toggle('show');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function() {
                dropdownMenu.classList.remove('show');
            });
        }

        // Funciones para manejar reservas
        function verDetalles(reservaId) {
            window.location.href = `/detalle-reserva/?id=${reservaId}`;
        }

        function cancelarReserva(reservaId) {
            if (confirm('¬øEst√°s seguro de que deseas cancelar esta reserva?')) {
                fetch(`/api/reservas/${reservaId}/cancelar/`, {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': getCSRFToken(),
                        'Content-Type': 'application/json',
                    },
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Reserva cancelada exitosamente');
                        location.reload();
                    } else {
                        alert('Error al cancelar la reserva: ' + data.error);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error al cancelar la reserva');
                });
            }
        }

        function getCSRFToken() {
            const name = 'csrftoken';
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        // Sistema de filtrado mejorado
        let currentFilters = {
            status: 'all',
            dateFrom: '',
            dateTo: '',
            space: '',
            search: ''
        };

        // Filtros por estado
        document.querySelectorAll('.status-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const status = this.dataset.status;
                currentFilters.status = status;
                
                // Update active tab
                document.querySelectorAll('.status-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                applyFilters();
            });
        });

        // Filtro por fecha desde
        document.getElementById('dateFrom').addEventListener('change', function() {
            currentFilters.dateFrom = this.value;
            applyFilters();
        });

        // Filtro por fecha hasta
        document.getElementById('dateTo').addEventListener('change', function() {
            currentFilters.dateTo = this.value;
            applyFilters();
        });

        // Filtro por espacio
        document.getElementById('spaceFilter').addEventListener('change', function() {
            currentFilters.space = this.value;
            applyFilters();
        });

        // Filtro de b√∫squeda
        document.getElementById('searchInput').addEventListener('input', function(e) {
            currentFilters.search = e.target.value.toLowerCase();
            applyFilters();
        });

        // Funci√≥n principal de filtrado
        function applyFilters() {
            const cards = document.querySelectorAll('.reservation-card');
            let visibleCount = 0;
            
            cards.forEach(card => {
                const cardStatus = card.dataset.status;
                const cardSpace = card.dataset.space;
                const cardDate = card.dataset.date;
                const cardId = card.dataset.id;
                const cardPurpose = card.dataset.purpose;
                
                let show = true;
                
                // Filtro por estado
                if (currentFilters.status !== 'all' && cardStatus !== currentFilters.status) {
                    show = false;
                }
                
                // Filtro por espacio
                if (currentFilters.space && cardSpace !== currentFilters.space) {
                    show = false;
                }
                
                // Filtro por fecha desde
                if (currentFilters.dateFrom && cardDate < currentFilters.dateFrom) {
                    show = false;
                }
                
                // Filtro por fecha hasta
                if (currentFilters.dateTo && cardDate > currentFilters.dateTo) {
                    show = false;
                }
                
                // Filtro de b√∫squeda
                if (currentFilters.search) {
                    const searchTerm = currentFilters.search;
                    const matchesId = cardId.includes(searchTerm);
                    const matchesPurpose = cardPurpose.includes(searchTerm);
                    
                    if (!matchesId && !matchesPurpose) {
                        show = false;
                    }
                }
                
                if (show) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            updateEmptyState(visibleCount);
        }

        // Actualizar estado vac√≠o
        function updateEmptyState(visibleCount) {
            const emptyState = document.querySelector('.empty-state');
            const reservationsList = document.getElementById('reservationsList');
            const existingCards = document.querySelectorAll('.reservation-card').length;
            
            if (visibleCount === 0 && existingCards > 0) {
                // Crear estado vac√≠o si hay reservas pero ninguna coincide con los filtros
                if (!emptyState || !emptyState.classList.contains('filter-empty-state')) {
                    const emptyHtml = `
                        <div class="empty-state filter-empty-state">
                            <div class="empty-state-icon">üîç</div>
                            <h2 class="empty-state-title">No hay reservas encontradas</h2>
                            <p class="empty-state-text">
                                No se encontraron reservas que coincidan con los filtros seleccionados.
                            </p>
                            <button class="empty-state-btn" onclick="resetFilters()">
                                <span>üîÑ</span>
                                Restablecer Filtros
                            </button>
                        </div>
                    `;
                    
                    // Remover estado vac√≠o anterior si existe
                    if (emptyState) {
                        emptyState.remove();
                    }
                    
                    reservationsList.insertAdjacentHTML('beforeend', emptyHtml);
                }
            } else if (emptyState && emptyState.classList.contains('filter-empty-state') && visibleCount > 0) {
                // Remover estado vac√≠o de filtros si ahora hay reservas visibles
                emptyState.remove();
            }
        }

        // Restablecer filtros
        function resetFilters() {
            // Restablecer valores de los filtros
            document.querySelectorAll('.status-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector('.status-tab[data-status="all"]').classList.add('active');
            
            document.getElementById('dateFrom').value = '';
            document.getElementById('dateTo').value = '';
            document.getElementById('spaceFilter').value = '';
            document.getElementById('searchInput').value = '';
            
            // Restablecer filtros actuales
            currentFilters = {
                status: 'all',
                dateFrom: '',
                dateTo: '',
                space: '',
                search: ''
            };
            
            // Aplicar filtros (mostrar todo)
            applyFilters();
        }

        // Inicializar filtros al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            applyFilters();
        });

        // Formatear fechas para inputs date (compatibilidad)
        function formatDateForInput(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toISOString().split('T')[0];
        }

        // Establecer fecha m√°xima como hoy para filtro de fecha hasta
        document.getElementById('dateTo').max = new Date().toISOString().split('T')[0];
    </script>
</body>
</html>
============================================================


===== reserva_exitosa.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmaci√≥n - Sistema de Reservas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ecfdf5 0%, #f0fdf4 50%, #f9fafb 100%);
            color: #111827;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0 24px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: #2563eb;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .main-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 24px;
        }

        .confirmation-container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 48px 40px;
            max-width: 600px;
            width: 100%;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .confirmation-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #10b981, #059669);
        }

        .success-animation {
            width: 120px;
            height: 120px;
            margin: 0 auto 32px;
            position: relative;
            animation: successPulse 2s ease-in-out infinite;
        }

        .success-icon {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
        }

        @keyframes successPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .success-rings {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
        }

        .success-ring {
            position: absolute;
            border: 2px solid #10b981;
            border-radius: 50%;
            opacity: 0;
            animation: ringExpand 2s ease-out infinite;
        }

        .success-ring:nth-child(1) {
            animation-delay: 0s;
        }

        .success-ring:nth-child(2) {
            animation-delay: 0.5s;
        }

        .success-ring:nth-child(3) {
            animation-delay: 1s;
        }

        @keyframes ringExpand {
            0% {
                width: 120px;
                height: 120px;
                opacity: 1;
            }
            100% {
                width: 200px;
                height: 200px;
                opacity: 0;
            }
        }

        .success-title {
            font-size: 32px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 16px;
        }

        .success-message {
            font-size: 18px;
            color: #6b7280;
            margin-bottom: 40px;
            line-height: 1.5;
        }

        .reservation-card {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            text-align: left;
        }

        .reservation-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .reservation-number {
            background: #2563eb;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }

        .reservation-status {
            display: flex;
            align-items: center;
            gap: 6px;
            background: #fef3c7;
            color: #92400e;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .reservation-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            border: 1px solid #e5e7eb;
        }

        .detail-content {
            flex: 1;
        }

        .detail-label {
            font-size: 12px;
            color: #6b7280;
            text-transform: uppercase;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .detail-value {
            font-size: 16px;
            color: #111827;
            font-weight: 500;
        }

        .info-section {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 32px;
            text-align: left;
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .info-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e40af;
        }

        .info-content {
            color: #1e40af;
            font-size: 14px;
            line-height: 1.5;
        }

        .info-list {
            margin: 12px 0 0 0;
            padding-left: 20px;
        }

        .info-list li {
            margin-bottom: 6px;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .action-btn {
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .action-btn.primary {
            background: #10b981;
            color: white;
        }

        .action-btn.primary:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .action-btn.secondary {
            background: #2563eb;
            color: white;
        }

        .action-btn.secondary:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .action-btn.link {
            background: none;
            color: #6b7280;
            border: 1px solid #e5e7eb;
        }

        .action-btn.link:hover {
            background: #f9fafb;
            color: #374151;
        }

        .additional-info {
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 16px 20px;
            margin-top: 24px;
            border-radius: 0 8px 8px 0;
            text-align: left;
        }

        .additional-info-title {
            font-size: 14px;
            font-weight: 600;
            color: #0c4a6e;
            margin-bottom: 8px;
        }

        .additional-info-text {
            font-size: 14px;
            color: #0c4a6e;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px 16px;
            }

            .confirmation-container {
                padding: 32px 24px;
            }

            .success-title {
                font-size: 28px;
            }

            .success-message {
                font-size: 16px;
            }

            .reservation-details {
                grid-template-columns: 1fr;
            }

            .reservation-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .action-buttons {
                margin-top: 24px;
            }
        }

        @media (max-width: 480px) {
            .success-animation {
                width: 100px;
                height: 100px;
            }

            .success-icon {
                width: 100px;
                height: 100px;
                font-size: 40px;
            }

            .success-rings {
                width: 100px;
                height: 100px;
            }

            .success-title {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo-section">
            <div class="logo">SR</div>
        </div>
        
        <div class="user-menu">
            <div class="user-avatar">
                {% if user.first_name and user.last_name %}
                    {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
                {% else %}
                    {{ user.username|first|upper }}
                {% endif %}
            </div>
            <span>
                {% if user.first_name %}
                    {{ user.first_name }} {{ user.last_name }}
                {% else %}
                    {{ user.username }}
                {% endif %}
            </span>
            <a href="{% url 'logout' %}" style="margin-left: 10px; color: #666; text-decoration: none;">üö™</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="confirmation-container">
            <!-- Success Animation -->
            <div class="success-animation">
                <div class="success-icon">‚úì</div>
                <div class="success-rings">
                    <div class="success-ring"></div>
                    <div class="success-ring"></div>
                    <div class="success-ring"></div>
                </div>
            </div>

            <!-- Success Message -->
            <h1 class="success-title">
                {% if reserva %}
                    ¬°Reserva Enviada con √âxito!
                {% else %}
                    ¬°Reserva Procesada!
                {% endif %}
            </h1>
            <p class="success-message">
                {% if reserva %}
                    Tu solicitud de reserva ha sido enviada correctamente y est√° pendiente de aprobaci√≥n.
                    Te notificaremos por correo electr√≥nico cuando sea procesada.
                {% else %}
                    Tu reserva ha sido procesada exitosamente.
                {% endif %}
            </p>

            <!-- Reservation Details Card -->
            {% if reserva %}
            <div class="reservation-card">
                <div class="reservation-header">
                    <div class="reservation-number">
                        #SR-{{ reserva.id|stringformat:"04d" }}
                    </div>
                    <div class="reservation-status">
                        {% if reserva.estado == 'Pendiente' %}
                            ‚è≥ Pendiente de Aprobaci√≥n
                        {% elif reserva.estado == 'Aprobada' %}
                            ‚úÖ Aprobada
                        {% elif reserva.estado == 'Rechazada' %}
                            ‚ùå Rechazada
                        {% else %}
                            üìã {{ reserva.estado }}
                        {% endif %}
                    </div>
                </div>

                <div class="reservation-details">
                    <div class="detail-item">
                        <div class="detail-icon">üèõÔ∏è</div>
                        <div class="detail-content">
                            <div class="detail-label">Espacio</div>
                            <div class="detail-value">{{ reserva.espacio.nombre }}</div>
                        </div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-icon">üìÖ</div>
                        <div class="detail-content">
                            <div class="detail-label">Fecha</div>
                            <div class="detail-value">{{ reserva.fecha_reserva|date:"l, d F Y" }}</div>
                        </div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-icon">‚è∞</div>
                        <div class="detail-content">
                            <div class="detail-label">Horario</div>
                            <div class="detail-value">{{ reserva.hora_inicio|time:"H:i" }} - {{ reserva.hora_fin|time:"H:i" }}</div>
                        </div>
                    </div>

                   <div class="detail-item">
                        <div class="detail-icon">‚è±Ô∏è</div>
                        <div class="detail-content">
                            <div class="detail-label">Duraci√≥n</div>
                            <div class="detail-value">
                                {% if reserva.hora_inicio and reserva.hora_fin %}
                                    {{ reserva.hora_inicio|time:"H:i" }} - {{ reserva.hora_fin|time:"H:i" }}
                                {% else %}
                                    No especificado
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-icon">üë•</div>
                        <div class="detail-content">
                            <div class="detail-label">Asistentes</div>
                            <div class="detail-value">{{ reserva.num_asistentes }} personas</div>
                        </div>
                    </div>

                    <div class="detail-item">
                        <div class="detail-icon">üìù</div>
                        <div class="detail-content">
                            <div class="detail-label">Prop√≥sito</div>
                            <div class="detail-value">{{ reserva.proposito }}</div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Information Section -->
            <div class="info-section">
                <div class="info-header">
                    <span>‚ÑπÔ∏è</span>
                    <h3 class="info-title">Informaci√≥n Importante</h3>
                </div>
                <div class="info-content">
                    <strong>Tiempo estimado de respuesta:</strong> 24-48 horas laborables
                    <ul class="info-list">
                        <li>Recibir√°s una notificaci√≥n por correo electr√≥nico cuando tu solicitud sea revisada</li>
                        <li>Puedes consultar el estado de tu reserva en cualquier momento desde tu historial</li>
                        <li>Si tu solicitud es rechazada, recibir√°s informaci√≥n sobre motivos y alternativas</li>
                    </ul>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <a href="{% url 'reservas' %}" class="action-btn primary">
                    <span>üìã</span>
                    Ver en Historial
                </a>
                <a href="{% url 'crear_reserva' %}" class="action-btn secondary">
                    <span>‚ûï</span>
                    Nueva Reserva
                </a>
                <a href="{% url 'dashboard' %}" class="action-btn link">
                    <span>üè†</span>
                    Volver al Dashboard
                </a>
            </div>

            <!-- Additional Info -->
            <div class="additional-info">
                <h4 class="additional-info-title">üìß Confirmaci√≥n por Email</h4>
                <p class="additional-info-text">
                    Se ha enviado una copia de esta solicitud a tu correo electr√≥nico 
                    <strong>{{ user.email }}</strong> para tus registros.
                </p>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const successIcon = document.querySelector('.success-icon');
                successIcon.style.animation = 'successPulse 2s ease-in-out infinite';
            }, 500);

            const buttons = document.querySelectorAll('.action-btn');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    this.style.transform = 'scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });

            const reservationNumber = document.querySelector('.reservation-number');
            if (reservationNumber) {
                reservationNumber.addEventListener('click', function() {
                    const text = this.textContent.trim();
                    navigator.clipboard.writeText(text).then(() => {
                        const originalText = this.textContent;
                        this.textContent = '‚úì Copiado!';
                        this.style.background = '#10b981';
                        
                        setTimeout(() => {
                            this.textContent = originalText;
                            this.style.background = '#2563eb';
                        }, 2000);
                    }).catch(() => {
                        console.log('No se pudo copiar al portapapeles');
                    });
                });
            }

            const reservationCard = document.querySelector('.reservation-card');
            if (reservationCard) {
                reservationCard.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.02)';
                    this.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.1)';
                });

                reservationCard.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                    this.style.boxShadow = '';
                });
            }
        });
    </script>
</body>
</html>
============================================================


===== revisar_solicitud.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revisar Solicitud</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #F9FAFB;
            color: #111827;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
        }
        
        /* Header */
        .page-header {
            margin-bottom: 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-left h1 {
            font-size: 32px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
        }
        
        .breadcrumb {
            color: #6B7280;
            font-size: 14px;
        }
        
        .breadcrumb a {
            color: #2563EB;
            text-decoration: none;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .btn-secondary { background: #6B7280; color: white; }
        .btn-primary { background: #2563EB; color: white; }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 32px;
        }
        
        /* Left Panel - Request Details */
        .request-panel {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .card-header {
            padding: 20px;
            border-bottom: 1px solid #E5E7EB;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
        }
        
        .card-content {
            padding: 24px;
        }
        
        /* User Info Card */
        .user-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: 600;
        }
        
        .user-details h3 {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 4px;
        }
        
        .user-details p {
            color: #6B7280;
            font-size: 14px;
            margin-bottom: 2px;
        }
        
        .user-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 20px;
        }
        
        .stat-item {
            text-align: center;
            padding: 12px;
            background: #F9FAFB;
            border-radius: 8px;
        }
        
        .stat-value {
            font-size: 20px;
            font-weight: 700;
            color: #111827;
        }
        
        .stat-label {
            font-size: 12px;
            color: #6B7280;
            margin-top: 4px;
        }
        
        /* Request Details */
        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }
        
        .detail-section h4 {
            font-size: 16px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            padding: 8px 0;
        }
        
        .detail-icon {
            width: 20px;
            height: 20px;
            color: #6B7280;
        }
        
        .detail-label {
            font-weight: 600;
            color: #374151;
            min-width: 100px;
        }
        
        .detail-value {
            color: #111827;
        }
        
        .space-preview {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 200px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            margin-bottom: 16px;
        }
        
        .space-name {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .space-description {
            color: #6B7280;
            margin-bottom: 16px;
        }
        
        .equipment-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .equipment-tag {
            background: #EFF6FF;
            color: #2563EB;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .purpose-text {
            background: #F9FAFB;
            padding: 16px;
            border-radius: 8px;
            color: #374151;
            line-height: 1.6;
            border-left: 4px solid #2563EB;
        }
        
        /* Right Panel - Decision Tools */
        .decision-panel {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        
        /* Calendar */
        .mini-calendar {
            background: #F9FAFB;
            border-radius: 8px;
            padding: 16px;
        }
        
        .calendar-header {
            text-align: center;
            font-weight: 600;
            margin-bottom: 16px;
            color: #374151;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            text-align: center;
            font-size: 12px;
        }
        
        .calendar-day {
            padding: 8px 4px;
            border-radius: 4px;
        }
        
        .calendar-day.header {
            font-weight: 600;
            color: #6B7280;
        }
        
        .calendar-day.available {
            background: #D1FAE5;
            color: #065F46;
        }
        
        .calendar-day.occupied {
            background: #FEE2E2;
            color: #991B1B;
        }
        
        .calendar-day.partial {
            background: #FEF3C7;
            color: #92400E;
        }
        
        .calendar-day.today {
            background: #2563EB;
            color: white;
            font-weight: 600;
        }
        
        .calendar-legend {
            margin-top: 12px;
            font-size: 11px;
            color: #6B7280;
            display: flex;
            justify-content: space-between;
        }
        
        /* Conflicts */
        .conflict-alert {
            background: #FEF3C7;
            border: 1px solid #F59E0B;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .alert-header {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #92400E;
            margin-bottom: 8px;
        }
        
        .conflict-item {
            background: white;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 4px solid #F59E0B;
        }
        
        .conflict-time {
            font-size: 12px;
            color: #78350F;
        }
        
        .conflict-title {
            font-weight: 500;
            color: #92400E;
        }
        
        /* Existing Reservations */
        .reservation-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #F3F4F6;
            border-radius: 8px;
            margin-bottom: 8px;
        }
        
        .reservation-time {
            font-size: 12px;
            color: #6B7280;
        }
        
        .reservation-title {
            font-weight: 500;
            color: #374151;
        }
        
        .status-badge {
            padding: 2px 6px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-confirmed {
            background: #D1FAE5;
            color: #065F46;
        }
        
        /* Verification Tools */
        .verification-tools {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .verify-btn {
            background: #EFF6FF;
            border: 1px solid #2563EB;
            color: #2563EB;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            text-align: center;
            transition: all 0.2s;
        }
        
        .verify-btn:hover {
            background: #2563EB;
            color: white;
        }
        
        /* Decision Form */
        .decision-form {
            background: #F8FAFC;
            border: 2px solid #E2E8F0;
            border-radius: 12px;
            padding: 24px;
        }
        
        .decision-options {
            margin-bottom: 20px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .radio-option:hover {
            border-color: #D1D5DB;
        }
        
        .radio-option.selected {
            border-color: #2563EB;
            background: #EFF6FF;
        }
        
        .radio-option input[type="radio"] {
            width: 16px;
            height: 16px;
        }
        
        .option-info {
            flex: 1;
        }
        
        .option-title {
            font-weight: 600;
            color: #374151;
        }
        
        .option-description {
            font-size: 12px;
            color: #6B7280;
        }
        
        .option-icon {
            font-size: 20px;
        }
        
        .approve { color: #10B981; }
        .approve-conditional { color: #F59E0B; }
        .reject { color: #DC2626; }
        .request-info { color: #2563EB; }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }
        
        .required {
            color: #DC2626;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            transition: all 0.2s;
            resize: vertical;
            min-height: 80px;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #2563EB;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .checkbox-option input[type="checkbox"] {
            width: 16px;
            height: 16px;
        }
        
        .form-actions {
            display: flex;
            gap: 12px;
        }
        
        .btn-success { background: #10B981; color: white; }
        .btn-outline { background: white; color: #6B7280; border: 2px solid #E5E7EB; }
        
        .btn-outline:hover { background: #F9FAFB; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="page-header">
            <div class="header-left">
                <h1>üìã Revisar Solicitud</h1>
                <div class="breadcrumb">
                    <a href="#">Solicitudes</a> > <a href="#">Pendientes</a> > Revisar #REQ-2025-0234
                </div>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary">‚¨ÖÔ∏è Volver a la Lista</button>
                <button class="btn btn-primary">üìß Contactar Usuario</button>
            </div>
        </div>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Left Panel - Request Details -->
            <div class="request-panel">
                <!-- User Information -->
                <div class="card">
                    <div class="card-header">
                        <span>üë§</span>
                        <h3 class="card-title">Informaci√≥n del Solicitante</h3>
                    </div>
                    <div class="card-content">
                        <div class="user-info">
                            <div class="user-avatar">MR</div>
                            <div class="user-details">
                                <h3>Mar√≠a Rodr√≠guez</h3>
                                <p>üìß maria.rodriguez@empresa.com</p>
                                <p>üìû +56 9 8765 4321</p>
                                <p>üè¢ Tecnolog√≠a - Desarrollo</p>
                                <p>üÜî ID: USR-001</p>
                            </div>
                        </div>
                        
                        <div class="user-stats">
                            <div class="stat-item">
                                <div class="stat-value">45</div>
                                <div class="stat-label">Total Reservas</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">95%</div>
                                <div class="stat-label">Tasa Aprobaci√≥n</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">2</div>
                                <div class="stat-label">Este Mes</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Request Details -->
                <div class="card">
                    <div class="card-header">
                        <span>üìã</span>
                        <h3 class="card-title">Detalles de la Reserva</h3>
                    </div>
                    <div class="card-content">
                        <div class="space-preview">üè¢</div>
                        <div class="space-name">Sala de Conferencias A1</div>
                        <div class="space-description">
                            Sala equipada con proyector 4K, sistema de audio profesional y capacidad para videoconferencias. 
                            Ubicada en Edificio Principal, Piso 2.
                        </div>
                        
                        <div class="equipment-tags">
                            <div class="equipment-tag">üì∫ Proyector 4K</div>
                            <div class="equipment-tag">üé§ Sistema Audio</div>
                            <div class="equipment-tag">üì∂ WiFi</div>
                            <div class="equipment-tag">‚ùÑÔ∏è Aire Acondicionado</div>
                            <div class="equipment-tag">üìπ Videoconferencia</div>
                        </div>
                        
                        <div class="detail-grid">
                            <div class="detail-section">
                                <h4>‚è∞ Informaci√≥n Temporal</h4>
                                <div class="detail-item">
                                    <span class="detail-icon">üìÖ</span>
                                    <span class="detail-label">Fecha:</span>
                                    <span class="detail-value">Viernes, 22 Mar 2025</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">üïê</span>
                                    <span class="detail-label">Hora:</span>
                                    <span class="detail-value">14:00 - 16:00</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">‚è±Ô∏è</span>
                                    <span class="detail-label">Duraci√≥n:</span>
                                    <span class="detail-value">2 horas</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">üìù</span>
                                    <span class="detail-label">Solicitado:</span>
                                    <span class="detail-value">15 Mar, 12:30</span>
                                </div>
                            </div>
                            
                            <div class="detail-section">
                                <h4>üë• Detalles Adicionales</h4>
                                <div class="detail-item">
                                    <span class="detail-icon">üë•</span>
                                    <span class="detail-label">Asistentes:</span>
                                    <span class="detail-value">15 personas</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">üè¢</span>
                                    <span class="detail-label">Capacidad:</span>
                                    <span class="detail-value">20 personas</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">üÜî</span>
                                    <span class="detail-label">ID Solicitud:</span>
                                    <span class="detail-value">REQ-2025-0234</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">‚ö°</span>
                                    <span class="detail-label">Prioridad:</span>
                                    <span class="detail-value" style="color: #DC2626; font-weight: 600;">Alta</span>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="margin-bottom: 12px;">üéØ Prop√≥sito de la Reuni√≥n</h4>
                            <div class="purpose-text">
                                Presentaci√≥n del nuevo producto Q2 al equipo ejecutivo. Necesitamos el proyector 4K para mostrar demos interactivas y el sistema de audio para videoconferencia con stakeholders remotos. La reuni√≥n incluye una sesi√≥n de Q&A y toma de decisiones estrat√©gicas para el lanzamiento.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Communication History -->
                <div class="card">
                    <div class="card-header">
                        <span>üí¨</span>
                        <h3 class="card-title">Historial de Comunicaci√≥n</h3>
                    </div>
                    <div class="card-content">
                        <div style="color: #6B7280; text-align: center; padding: 20px;">
                            No hay comunicaci√≥n previa para esta solicitud
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Decision Tools -->
            <div class="decision-panel">
                <!-- Calendar -->
                <div class="card">
                    <div class="card-header">
                        <span>üìÖ</span>
                        <h3 class="card-title">Verificaci√≥n de Disponibilidad</h3>
                    </div>
                    <div class="card-content">
                        <div class="mini-calendar">
                            <div class="calendar-header">Marzo 2025</div>
                            <div class="calendar-grid">
                                <div class="calendar-day header">L</div>
                                <div class="calendar-day header">M</div>
                                <div class="calendar-day header">X</div>
                                <div class="calendar-day header">J</div>
                                <div class="calendar-day header">V</div>
                                <div class="calendar-day header">S</div>
                                <div class="calendar-day header">D</div>
                                
                                <div class="calendar-day"></div>
                                <div class="calendar-day"></div>
                                <div class="calendar-day"></div>
                                <div class="calendar-day"></div>
                                <div class="calendar-day"></div>
                                <div class="calendar-day available">1</div>
                                <div class="calendar-day available">2</div>
                                
                                <div class="calendar-day occupied">3</div>
                                <div class="calendar-day available">4</div>
                                <div class="calendar-day partial">5</div>
                                <div class="calendar-day available">6</div>
                                <div class="calendar-day available">7</div>
                                <div class="calendar-day available">8</div>
                                <div class="calendar-day available">9</div>
                                
                                <div class="calendar-day available">10</div>
                                <div class="calendar-day occupied">11</div>
                                <div class="calendar-day available">12</div>
                                <div class="calendar-day partial">13</div>
                                <div class="calendar-day available">14</div>
                                <div class="calendar-day today">15</div>
                                <div class="calendar-day available">16</div>
                                
                                <div class="calendar-day available">17</div>
                                <div class="calendar-day occupied">18</div>
                                <div class="calendar-day available">19</div>
                                <div class="calendar-day available">20</div>
                                <div class="calendar-day available">21</div>
                                <div class="calendar-day available" style="border: 2px solid #DC2626;">22</div>
                                <div class="calendar-day available">23</div>
                            </div>
                            <div class="calendar-legend">
                                <span>üü¢ Disponible</span>
                                <span>üü° Parcial</span>
                                <span>üî¥ Ocupado</span>
                                <span>üîµ Hoy</span>
                            </div>
                        </div>
                        
                        <div class="verification-tools">
                            <button class="verify-btn">üîÑ Verificar Disponibilidad en Tiempo Real</button>
                            <button class="verify-btn">üë§ Ver Perfil Completo del Usuario</button>
                            <button class="verify-btn">üìä Historial de Reservas del Usuario</button>
                        </div>
                    </div>
                </div>

                <!-- Conflicts Alert -->
                <div class="card">
                    <div class="card-header">
                        <span>‚ö†Ô∏è</span>
                        <h3 class="card-title">Verificaci√≥n de Conflictos</h3>
                    </div>
                    <div class="card-content">
                        <div class="conflict-alert">
                            <div class="alert-header">
                                <span>‚ö†Ô∏è</span>
                                <span>Conflictos Detectados</span>
                            </div>
                            <div class="conflict-item">
                                <div class="conflict-time">22 Mar, 15:30 - 16:30</div>
                                <div class="conflict-title">Mantenimiento Programado - Proyector</div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 16px;">
                            <h4 style="margin-bottom: 12px; color: #374151;">üìã Reservas Existentes del D√≠a</h4>
                            <div class="reservation-item">
                                <div>
                                    <div class="reservation-time">09:00 - 10:30</div>
                                    <div class="reservation-title">Reuni√≥n de Equipo</div>
                                </div>
                                <span class="status-badge status-confirmed">Confirmada</span>
                            </div>
                            <div class="reservation-item">
                                <div>
                                    <div class="reservation-time">11:00 - 12:00</div>
                                    <div class="reservation-title">Entrevistas</div>
                                </div>
                                <span class="status-badge status-confirmed">Confirmada</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Decision Form -->
                <div class="card">
                    <div class="card-header">
                        <span>‚öñÔ∏è</span>
                        <h3 class="card-title">Tomar Decisi√≥n</h3>
                    </div>
                    <div class="card-content">
                        <div class="decision-form">
                            <div class="decision-options">
                                <div class="radio-option" onclick="selectOption(this, 'approve')">
                                    <input type="radio" name="decision" value="approve">
                                    <div class="option-info">
                                        <div class="option-title">Aprobar</div>
                                        <div class="option-description">Autorizar la reserva tal como fue solicitada</div>
                                    </div>
                                    <div class="option-icon approve">‚úÖ</div>
                                </div>
                                
                                <div class="radio-option" onclick="selectOption(this, 'approve-conditional')">
                                    <input type="radio" name="decision" value="approve-conditional">
                                    <div class="option-info">
                                        <div class="option-title">Aprobar con Condiciones</div>
                                        <div class="option-description">Aprobar con modificaciones o restricciones</div>
                                    </div>
                                    <div class="option-icon approve-conditional">‚ö†Ô∏è</div>
                                </div>
                                
                                <div class="radio-option" onclick="selectOption(this, 'reject')">
                                    <input type="radio" name="decision" value="reject">
                                    <div class="option-info">
                                        <div class="option-title">Rechazar</div>
                                        <div class="option-description">Denegar la solicitud de reserva</div>
                                    </div>
                                    <div class="option-icon reject">‚ùå</div>
                                </div>
                                
                                <div class="radio-option" onclick="selectOption(this, 'request-info')">
                                    <input type="radio" name="decision" value="request-info">
                                    <div class="option-info">
                                        <div class="option-title">Solicitar M√°s Informaci√≥n</div>
                                        <div class="option-description">Pedir detalles adicionales antes de decidir</div>
                                    </div>
                                    <div class="option-icon request-info">üí¨</div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="comments" class="form-label">
                                    Comentarios <span class="required">*</span>
                                </label>
                                <textarea 
                                    id="comments" 
                                    class="form-control" 
                                    placeholder="Proporciona detalles sobre tu decisi√≥n..."
                                    required
                                ></textarea>
                            </div>
                            
                            <div class="checkbox-option">
                                <input type="checkbox" id="autoNotify" checked>
                                <label for="autoNotify">Enviar notificaci√≥n autom√°tica al usuario</label>
                            </div>
                            
                            <div class="form-actions">
                                <button class="btn btn-success" onclick="processDecision()" disabled id="processBtn">
                                    ‚öñÔ∏è Procesar Solicitud
                                </button>
                                <button class="btn btn-secondary">üíæ Guardar como Borrador</button>
                                <button class="btn btn-outline">‚ùå Cancelar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedDecision = null;
        
        function selectOption(element, decision) {
            // Remove previous selection
            document.querySelectorAll('.radio-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Select current option
            element.classList.add('selected');
            element.querySelector('input[type="radio"]').checked = true;
            selectedDecision = decision;
            
            // Enable process button
            document.getElementById('processBtn').disabled = false;
            
            // Update placeholder text based on decision
            const textarea = document.getElementById('comments');
            const placeholders = {
                'approve': 'Solicitud aprobada. Puedes agregar comentarios adicionales...',
                'approve-conditional': 'Especifica las condiciones o modificaciones requeridas...',
                'reject': 'Explica el motivo del rechazo (requerido)...',
                'request-info': 'Especifica qu√© informaci√≥n adicional necesitas...'
            };
            
            textarea.placeholder = placeholders[decision];
            
            // Make comments required for rejection
            if (decision === 'reject') {
                textarea.required = true;
            } else {
                textarea.required = false;
            }
        }
        
        function processDecision() {
            const comments = document.getElementById('comments').value.trim();
            const autoNotify = document.getElementById('autoNotify').checked;
            
            if (!selectedDecision) {
                alert('Por favor, selecciona una decisi√≥n.');
                return;
            }
            
            if (selectedDecision === 'reject' && comments.length < 10) {
                alert('Para rechazar una solicitud, debes proporcionar un motivo detallado (m√≠nimo 10 caracteres).');
                return;
            }
            
            // Show confirmation modal (simulated)
            const decisionNames = {
                'approve': 'aprobada',
                'approve-conditional': 'aprobada con condiciones',
                'reject': 'rechazada',
                'request-info': 'marcada para solicitar m√°s informaci√≥n'
            };
            
            const confirmMessage = `¬øConfirmas que deseas procesar esta solicitud como "${decisionNames[selectedDecision]}"?
            
${autoNotify ? 'Se enviar√° una notificaci√≥n autom√°tica al usuario.' : 'No se enviar√° notificaci√≥n autom√°tica.'}`;
            
            if (confirm(confirmMessage)) {
                // Simulate processing
                document.getElementById('processBtn').innerHTML = '‚è≥ Procesando...';
                document.getElementById('processBtn').disabled = true;
                
                setTimeout(() => {
                    alert(`¬°Solicitud procesada exitosamente! La solicitud ha sido ${decisionNames[selectedDecision]}.`);
                    // In a real app, this would redirect to the requests list
                }, 1500);
            }
        }
        
        // Enable process button when comments are added for rejection
        document.getElementById('comments').addEventListener('input', function() {
            const processBtn = document.getElementById('processBtn');
            if (selectedDecision === 'reject') {
                processBtn.disabled = this.value.trim().length < 10;
            }
        });
    </script>
</body>
</html>
============================================================


===== solicitudes_pendientes.html =====
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solicitudes Pendientes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #F9FAFB;
            color: #111827;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
        }
        
        /* Header */
        .page-header {
            margin-bottom: 32px;
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .page-title {
            font-size: 32px;
            font-weight: 700;
            color: #111827;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .pending-count {
            background: #FEF3C7;
            color: #92400E;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .btn-primary { background: #2563EB; color: white; }
        .btn-secondary { background: #6B7280; color: white; }
        .btn-success { background: #10B981; color: white; }
        .btn-danger { background: #DC2626; color: white; }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        /* Filters */
        .filters-toolbar {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 24px;
        }
        
        .filters-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .quick-filters {
            display: flex;
            gap: 8px;
        }
        
        .quick-filter {
            padding: 6px 12px;
            border: 1px solid #D1D5DB;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }
        
        .quick-filter.active, .quick-filter:hover {
            background: #2563EB;
            color: white;
            border-color: #2563EB;
        }
        
        .sort-dropdown {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .sort-select {
            padding: 8px 12px;
            border: 1px solid #D1D5DB;
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }
        
        .advanced-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .filter-label {
            font-weight: 600;
            font-size: 12px;
            color: #374151;
        }
        
        .filter-input {
            padding: 8px 12px;
            border: 1px solid #D1D5DB;
            border-radius: 6px;
            font-size: 14px;
        }
        
        /* Request Cards */
        .requests-container {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .request-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: all 0.2s;
            overflow: hidden;
        }
        
        .request-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .request-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .request-info {
            flex: 1;
        }
        
        .request-datetime {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 4px;
        }
        
        .request-space {
            font-size: 16px;
            color: #2563EB;
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .request-user {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .user-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 11px;
            font-weight: 600;
        }
        
        .user-name {
            color: #374151;
            font-weight: 500;
        }
        
        .request-time {
            font-size: 12px;
            color: #9CA3AF;
        }
        
        .request-meta {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 8px;
        }
        
        .time-since {
            font-size: 12px;
            color: #6B7280;
            background: #F3F4F6;
            padding: 4px 8px;
            border-radius: 12px;
        }
        
        .priority-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .priority-high { background: #FEE2E2; color: #991B1B; }
        .priority-medium { background: #FEF3C7; color: #92400E; }
        .priority-low { background: #F0FDF4; color: #166534; }
        
        .expand-icon {
            font-size: 20px;
            color: #9CA3AF;
            transition: transform 0.2s;
        }
        
        .request-card.expanded .expand-icon {
            transform: rotate(180deg);
        }
        
        /* Expanded Content */
        .request-details {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .request-card.expanded .request-details {
            max-height: 400px;
            padding: 0 20px 20px 20px;
        }
        
        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .detail-section h4 {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .detail-icon {
            color: #6B7280;
        }
        
        .detail-value {
            color: #111827;
        }
        
        .purpose-text {
            background: #F9FAFB;
            padding: 12px;
            border-radius: 8px;
            color: #374151;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 16px;
        }
        
        .contact-info {
            background: #EFF6FF;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #2563EB;
        }
        
        .contact-info h5 {
            color: #1E40AF;
            margin-bottom: 4px;
            font-size: 14px;
        }
        
        .contact-info p {
            color: #3730A3;
            font-size: 13px;
            margin-bottom: 2px;
        }
        
        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 8px;
            padding-top: 16px;
            border-top: 1px solid #F3F4F6;
        }
        
        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }
        
        /* Bulk Actions */
        .bulk-actions {
            position: sticky;
            bottom: 24px;
            background: white;
            padding: 16px 20px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            display: none;
            align-items: center;
            gap: 16px;
            margin-top: 24px;
        }
        
        .bulk-actions.active {
            display: flex;
        }
        
        .selected-count {
            font-weight: 600;
            color: #374151;
        }
        
        .bulk-buttons {
            display: flex;
            gap: 8px;
        }
        
        /* Checkbox */
        .request-checkbox {
            margin-right: 12px;
            width: 16px;
            height: 16px;
            cursor: pointer;
        }
        
        /* Search */
        .search-section {
            margin-bottom: 16px;
        }
        
        .search-input {
            width: 100%;
            max-width: 400px;
            padding: 12px 16px;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #2563EB;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="page-header">
            <div class="header-top">
                <h1 class="page-title">
                    ‚è∞ Solicitudes Pendientes
                    <span class="pending-count">8 pendientes</span>
                </h1>
                <div class="header-actions">
                    <button class="btn btn-secondary">üìä Exportar Lista</button>
                    <button class="btn btn-primary">üìß Notificar Usuarios</button>
                </div>
            </div>
            
            <div class="search-section">
                <input type="text" class="search-input" placeholder="üîç Buscar por usuario, espacio o prop√≥sito...">
            </div>
        </div>

        <!-- Filters Toolbar -->
        <div class="filters-toolbar">
            <div class="filters-top">
                <div class="quick-filters">
                    <button class="quick-filter active">Todas</button>
                    <button class="quick-filter">Hoy</button>
                    <button class="quick-filter">Esta Semana</button>
                    <button class="quick-filter">Urgentes</button>
                </div>
                
                <div class="sort-dropdown">
                    <label style="font-size: 14px; color: #6B7280;">Ordenar por:</label>
                    <select class="sort-select">
                        <option>Fecha de solicitud</option>
                        <option>Fecha del evento</option>
                        <option>Prioridad</option>
                        <option>Espacio</option>
                        <option>Usuario</option>
                    </select>
                </div>
            </div>
            
            <div class="advanced-filters">
                <div class="filter-group">
                    <label class="filter-label">Espacio</label>
                    <select class="filter-input">
                        <option>Todos los espacios</option>
                        <option>Sala A1</option>
                        <option>Auditorio</option>
                        <option>Sala B2</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Departamento</label>
                    <select class="filter-input">
                        <option>Todos los departamentos</option>
                        <option>Tecnolog√≠a</option>
                        <option>Marketing</option>
                        <option>RRHH</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Fecha desde</label>
                    <input type="date" class="filter-input" value="2025-03-15">
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Fecha hasta</label>
                    <input type="date" class="filter-input" value="2025-03-31">
                </div>
            </div>
        </div>

        <!-- Requests List -->
        <div class="requests-container">
            <!-- Request 1 -->
            <div class="request-card" onclick="toggleCard(this)">
                <div class="request-header">
                    <input type="checkbox" class="request-checkbox" onclick="event.stopPropagation(); toggleBulkActions()">
                    <div class="request-info">
                        <div class="request-datetime">Viernes, 22 de Marzo 2025 - 14:00 a 16:00</div>
                        <div class="request-space">üè¢ Sala de Conferencias A1</div>
                        <div class="request-user">
                            <div class="user-avatar">MR</div>
                            <span class="user-name">Mar√≠a Rodr√≠guez</span>
                            <span class="request-time">‚Ä¢ Tecnolog√≠a</span>
                        </div>
                    </div>
                    <div class="request-meta">
                        <div class="time-since">Hace 2 horas</div>
                        <div class="priority-badge priority-high">Alta</div>
                        <div class="expand-icon">‚åÑ</div>
                    </div>
                </div>
                
                <div class="request-details">
                    <div class="details-grid">
                        <div class="detail-section">
                            <h4>üìã Detalles de la Reserva</h4>
                            <div class="detail-item">
                                <span class="detail-icon">üë•</span>
                                <span class="detail-value">15 asistentes</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">‚è±Ô∏è</span>
                                <span class="detail-value">2 horas</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">üìÖ</span>
                                <span class="detail-value">Solicitud: 15 Mar, 12:30</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">‚öôÔ∏è</span>
                                <span class="detail-value">Proyector, Audio, WiFi</span>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>üë§ Informaci√≥n del Solicitante</h4>
                            <div class="contact-info">
                                <h5>Mar√≠a Rodr√≠guez</h5>
                                <p>üìß maria.rodriguez@empresa.com</p>
                                <p>üìû +56 9 8765 4321</p>
                                <p>üè¢ Tecnolog√≠a - Desarrollo</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4>üéØ Prop√≥sito de la Reuni√≥n</h4>
                        <div class="purpose-text">
                            Presentaci√≥n del nuevo producto Q2 al equipo ejecutivo. Necesitamos el proyector 4K para mostrar demos interactivas y el sistema de audio para videoconferencia con stakeholders remotos.
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <button class="btn btn-success btn-small" onclick="event.stopPropagation(); approveRequest()">‚úÖ Aprobar</button>
                        <button class="btn btn-danger btn-small" onclick="event.stopPropagation(); rejectRequest()">‚ùå Rechazar</button>
                        <button class="btn btn-primary btn-small" onclick="event.stopPropagation(); viewDetails()">üëÅÔ∏è Ver Detalles</button>
                        <button class="btn btn-secondary btn-small" onclick="event.stopPropagation(); requestInfo()">üí¨ Solicitar Info</button>
                    </div>
                </div>
            </div>
            
            <!-- Request 2 -->
            <div class="request-card" onclick="toggleCard(this)">
                <div class="request-header">
                    <input type="checkbox" class="request-checkbox" onclick="event.stopPropagation(); toggleBulkActions()">
                    <div class="request-info">
                        <div class="request-datetime">Lunes, 18 de Marzo 2025 - 09:00 a 11:30</div>
                        <div class="request-space">üé≠ Auditorio Principal</div>
                        <div class="request-user">
                            <div class="user-avatar">CA</div>
                            <span class="user-name">Carlos √Åvila</span>
                            <span class="request-time">‚Ä¢ Marketing</span>
                        </div>
                    </div>
                    <div class="request-meta">
                        <div class="time-since">Hace 4 horas</div>
                        <div class="priority-badge priority-medium">Media</div>
                        <div class="expand-icon">‚åÑ</div>
                    </div>
                </div>
                
                <div class="request-details">
                    <div class="details-grid">
                        <div class="detail-section">
                            <h4>üìã Detalles de la Reserva</h4>
                            <div class="detail-item">
                                <span class="detail-icon">üë•</span>
                                <span class="detail-value">80 asistentes</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">‚è±Ô∏è</span>
                                <span class="detail-value">2.5 horas</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">üìÖ</span>
                                <span class="detail-value">Solicitud: 15 Mar, 10:15</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">‚öôÔ∏è</span>
                                <span class="detail-value">Escenario, Iluminaci√≥n, Audio</span>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>üë§ Informaci√≥n del Solicitante</h4>
                            <div class="contact-info">
                                <h5>Carlos √Åvila</h5>
                                <p>üìß carlos.avila@empresa.com</p>
                                <p>üìû +56 9 5555 1234</p>
                                <p>üè¢ Marketing - Eventos</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4>üéØ Prop√≥sito de la Reuni√≥n</h4>
                        <div class="purpose-text">
                            Lanzamiento de la campa√±a Q2 para todo el equipo de ventas. Incluye presentaci√≥n de estrategia, workshops interactivos y sesi√≥n de networking. Requerimos setup completo de escenario y sistema de audio profesional.
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <button class="btn btn-success btn-small" onclick="event.stopPropagation(); approveRequest()">‚úÖ Aprobar</button>
                        <button class="btn btn-danger btn-small" onclick="event.stopPropagation(); rejectRequest()">‚ùå Rechazar</button>
                        <button class="btn btn-primary btn-small" onclick="event.stopPropagation(); viewDetails()">üëÅÔ∏è Ver Detalles</button>
                        <button class="btn btn-secondary btn-small" onclick="event.stopPropagation(); requestInfo()">üí¨ Solicitar Info</button>
                    </div>
                </div>
            </div>
            
            <!-- Request 3 -->
            <div class="request-card" onclick="toggleCard(this)">
                <div class="request-header">
                    <input type="checkbox" class="request-checkbox" onclick="event.stopPropagation(); toggleBulkActions()">
                    <div class="request-info">
                        <div class="request-datetime">Mi√©rcoles, 20 de Marzo 2025 - 16:00 a 17:00</div>
                        <div class="request-space">üíº Sala de Juntas B3</div>
                        <div class="request-user">
                            <div class="user-avatar">LP</div>
                            <span class="user-name">Laura P√©rez</span>
                            <span class="request-time">‚Ä¢ RRHH</span>
                        </div>
                    </div>
                    <div class="request-meta">
                        <div class="time-since">Hace 1 d√≠a</div>
                        <div class="priority-badge priority-low">Baja</div>
                        <div class="expand-icon">‚åÑ</div>
                    </div>
                </div>
                
                <div class="request-details">
                    <div class="details-grid">
                        <div class="detail-section">
                            <h4>üìã Detalles de la Reserva</h4>
                            <div class="detail-item">
                                <span class="detail-icon">üë•</span>
                                <span class="detail-value">6 asistentes</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">‚è±Ô∏è</span>
                                <span class="detail-value">1 hora</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">üìÖ</span>
                                <span class="detail-value">Solicitud: 14 Mar, 16:45</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">‚öôÔ∏è</span>
                                <span class="detail-value">TV, WiFi</span>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>üë§ Informaci√≥n del Solicitante</h4>
                            <div class="contact-info">
                                <h5>Laura P√©rez</h5>
                                <p>üìß laura.perez@empresa.com</p>
                                <p>üìû +56 9 7777 8888</p>
                                <p>üè¢ RRHH - Reclutamiento</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4>üéØ Prop√≥sito de la Reuni√≥n</h4>
                        <div class="purpose-text">
                            Entrevistas finales para candidatos a developer senior. Sesi√≥n de evaluaci√≥n t√©cnica con el equipo de liderazgo. Necesitamos ambiente privado y conexi√≥n estable para videoconferencia.
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <button class="btn btn-success btn-small" onclick="event.stopPropagation(); approveRequest()">‚úÖ Aprobar</button>
                        <button class="btn btn-danger btn-small" onclick="event.stopPropagation(); rejectRequest()">‚ùå Rechazar</button>
                        <button class="btn btn-primary btn-small" onclick="event.stopPropagation(); viewDetails()">üëÅÔ∏è Ver Detalles</button>
                        <button class="btn btn-secondary btn-small" onclick="event.stopPropagation(); requestInfo()">üí¨ Solicitar Info</button>
                    </div>
                </div>
            </div>
            
            <!-- Request 4 -->
            <div class="request-card" onclick="toggleCard(this)">
                <div class="request-header">
                    <input type="checkbox" class="request-checkbox" onclick="event.stopPropagation(); toggleBulkActions()">
                    <div class="request-info">
                        <div class="request-datetime">Jueves, 21 de Marzo 2025 - 10:00 a 12:00</div>
                        <div class="request-space">ü§ù Espacio Colaborativo C1</div>
                        <div class="request-user">
                            <div class="user-avatar">DM</div>
                            <span class="user-name">Diego Morales</span>
                            <span class="request-time">‚Ä¢ Finanzas</span>
                        </div>
                    </div>
                    <div class="request-meta">
                        <div class="time-since">Hace 6 horas</div>
                        <div class="priority-badge priority-medium">Media</div>
                        <div class="expand-icon">‚åÑ</div>
                    </div>
                </div>
                
                <div class="request-details">
                    <div class="details-grid">
                        <div class="detail-section">
                            <h4>üìã Detalles de la Reserva</h4>
                            <div class="detail-item">
                                <span class="detail-icon">üë•</span>
                                <span class="detail-value">8 asistentes</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">‚è±Ô∏è</span>
                                <span class="detail-value">2 horas</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">üìÖ</span>
                                <span class="detail-value">Solicitud: 15 Mar, 09:20</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-icon">‚öôÔ∏è</span>
                                <span class="detail-value">Pizarra, Mobiliario flexible</span>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>üë§ Informaci√≥n del Solicitante</h4>
                            <div class="contact-info">
                                <h5>Diego Morales</h5>
                                <p>üìß diego.morales@empresa.com</p>
                                <p>üìû +56 9 3333 4444</p>
                                <p>üè¢ Finanzas - An√°lisis</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4>üéØ Prop√≥sito de la Reuni√≥n</h4>
                        <div class="purpose-text">
                            Workshop de planificaci√≥n presupuestaria Q2. Sesi√≥n colaborativa de brainstorming y an√°lisis financiero. Necesitamos espacio flexible para trabajo en grupos peque√±os y pizarra para diagramas.
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <button class="btn btn-success btn-small" onclick="event.stopPropagation(); approveRequest()">‚úÖ Aprobar</button>
                        <button class="btn btn-danger btn-small" onclick="event.stopPropagation(); rejectRequest()">‚ùå Rechazar</button>
                        <button class="btn btn-primary btn-small" onclick="event.stopPropagation(); viewDetails()">üëÅÔ∏è Ver Detalles</button>
                        <button class="btn btn-secondary btn-small" onclick="event.stopPropagation(); requestInfo()">üí¨ Solicitar Info</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bulk Actions -->
        <div class="bulk-actions" id="bulkActions">
            <div class="selected-count">
                <span id="selectedCount">0</span> solicitudes seleccionadas
            </div>
            <div class="bulk-buttons">
                <button class="btn btn-success btn-small">‚úÖ Aprobar Seleccionadas</button>
                <button class="btn btn-danger btn-small">‚ùå Rechazar Seleccionadas</button>
                <button class="btn btn-secondary btn-small">üìß Enviar Mensaje</button>
                <button class="btn btn-secondary btn-small">üìä Exportar</button>
            </div>
        </div>
    </div>

    <script>
        function toggleCard(card) {
            card.classList.toggle('expanded');
        }
        
        function toggleBulkActions() {
            const checkboxes = document.querySelectorAll('.request-checkbox:checked');
            const bulkActions = document.getElementById('bulkActions');
            const selectedCount = document.getElementById('selectedCount');
            
            if (checkboxes.length > 0) {
                bulkActions.classList.add('active');
                selectedCount.textContent = checkboxes.length;
            } else {
                bulkActions.classList.remove('active');
            }
        }
        
        function approveRequest() {
            alert('Solicitud aprobada exitosamente');
        }
        
        function rejectRequest() {
            alert('Solicitud rechazada');
        }
        
        function viewDetails() {
            alert('Navegando a detalles completos...');
        }
        
        function requestInfo() {
            alert('Enviando solicitud de informaci√≥n adicional...');
        }
        
        // Quick filter functionality
        document.querySelectorAll('.quick-filter').forEach(filter => {
            filter.addEventListener('click', function() {
                document.querySelectorAll('.quick-filter').forEach(f => f.classList.remove('active'));
                this.classList.add('active');
            });
        });
        
        // Search functionality
        document.querySelector('.search-input').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.request-card');
            
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>
============================================================
